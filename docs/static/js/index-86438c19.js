import{ax as v,m as _,H as y,o as w,a as x,b as u,d as h,c as T,s as r}from"./vendor-0c23bfd6.js";import{M as c}from"./chunk-bin-ui-next-be5ed89c.js";import{r as z}from"./file-helper-e95db66d.js";import"./chunk-brace-b1f520b9.js";const k=(a,s)=>{const o={allowType:"jpeg|jpg|png",allowSize:2,...s};return new RegExp(`\\.(${o.allowType})$`,"i").test(a.name)?a.size/1024/1024>o.allowSize?(c.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${o.allowSize}MB\uFF01`),!1):!0:(c.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u683C\u5F0F\u53EA\u80FD\u662F ${o.allowType} \u4E2D\u7684\u4E00\u79CD\uFF01`),!1)};const B=["onDrop"],D=["multiple","accept"],I={class:"g-upload-image-wrap"},S={__name:"index",props:{allowType:{type:String,default:"jpeg|jpg|png|svg|gif"},size:{type:Number,default:2},multiple:{type:Boolean,default:!1}},emits:["upload"],setup(a,{emit:s}){const o=a,n=_(null);function f(){n.value.click()}function d(l){const e=l.target.files;!e||(i(e),n.value.value=null)}function m(l){l.preventDefault(),i(l.dataTransfer.files)}function i(l){let e=Array.prototype.slice.call(l);o.multiple||(e=e.slice(0,1));const t=[];e.forEach(p=>{k(p,{allowType:o.allowType,allowSize:o.size})&&t.push(p)}),g(t)}function g(l){const e=l.map(t=>z(t));Promise.all(e).then(t=>{s("upload",t)})}return(l,e)=>{const t=y("b-icon");return w(),x("div",{class:"dv-gui g-upload",onClick:f,onDrop:r(m,["prevent"]),onDragover:e[0]||(e[0]=r(()=>{},["prevent"])),onDragleave:e[1]||(e[1]=r(()=>{},["prevent"]))},[u("input",{ref_key:"fileInputRef",ref:n,type:"file",class:"custom-file-input",multiple:a.multiple,accept:a.allowType,onChange:d},null,40,D),h(l.$slots,"default",{},()=>[u("div",I,[T(t,{name:"plus"})])],!0)],40,B)}}};var E=v(S,[["__scopeId","data-v-129847ad"]]);export{E as default};
