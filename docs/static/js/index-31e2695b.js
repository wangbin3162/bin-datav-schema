import{d as F,g as j,u as L,a as M}from"./images.api-0817f38a.js";import{ax as R,j as G,r as p,K as y,Q,b as a,k as $,l as z,h as m,v as _,c as o,F as w,d as K,q as S,p as T,a1 as C,e as b,z as H,a3 as J}from"./vendor-0bcca4c5.js";import"./index-ce12cd56.js";import"./chunk-bin-ui-next-98c8f2d2.js";import"./chunk-brace-b1f520b9.js";import"./chunk-bin-datav-bdc06cb1.js";import"./chunk-three-06bdd351.js";import"./chunk-gsap-80ac4909.js";import"./chunk-particles.vue3-83a83be1.js";import"./chunk-mockjs-9e1335a8.js";const O={class:"images-modal-wrap"},P={class:"group-wrap"},W=["onClick"],X={class:"img-wrap"},Y={key:0,class:"comp-item img-add"},Z=["onClick"],ee={__name:"image-select",props:{modelValue:{type:String,default:""},ignoreGroupKeys:{type:Array,default:()=>[]}},emits:["update:modelValue","change","resize"],setup(r,{expose:u,emit:f}){const s=r,h=G({get:()=>s.modelValue,set:e=>f("update:modelValue",e)}),d=p(!1),g=p([]),n=p(""),k=p([]),i=p(!1),V=G(()=>!F.includes(n.value));j().then(e=>{g.value=e.filter(t=>!s.ignoreGroupKeys.includes(t.key))});async function v(e){try{i.value=!0,k.value=await M(e)}catch(t){console.log(t)}i.value=!1}function x(e){n.value=e,v(e)}function B(e){h.value=e.src,f("change",e),d.value=!1}async function U(e){try{const t=e.map(c=>({group:n.value,name:c.name,attr:{w:c.width,h:c.height},src:c.image}));await L(t),B(t[0])}catch(t){console.log(t)}}function D(){var e;d.value=!0,n.value=(e=g.value[0])==null?void 0:e.key,v(n.value)}return u({open:D}),(e,t)=>{const c=y("b-scrollbar"),N=y("g-upload"),q=y("g-loading"),A=y("b-modal"),E=Q("lazy");return a(),$(A,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),title:"\u9009\u62E9\u56FE\u7247","append-to-body":"",top:"60px",width:"720px","custom-class":"schema-modal"},{default:z(()=>[m("div",O,[m("div",P,[_(c,{native:""},{default:z(()=>[(a(!0),o(w,null,K(g.value,l=>(a(),o("div",{key:l.key,class:S(["group-item t-ellipsis",{active:n.value===l.key}]),onClick:I=>x(l.key)},T(l.value),11,W))),128))]),_:1})]),m("div",X,[_(c,{native:""},{default:z(()=>[i.value?(a(),$(q,{key:1,spinning:"",type:"square"})):(a(),o(w,{key:0},[C(V)?(a(),o("div",Y,[_(N,{onUpload:U})])):b("",!0),(a(!0),o(w,null,K(k.value,(l,I)=>(a(),o("div",{class:"comp-item",key:I,onClick:ie=>B(l)},[H(m("img",null,null,512),[[E,l.src]])],8,Z))),128))],64))]),_:1})])])]),_:1},8,["modelValue"])}}};var ae=R(ee,[["__scopeId","data-v-2cfb266c"]]);const te={class:"dv-gui g-select-image-wrap"},oe=["src"],se={key:0,class:"g-resize"},le={key:1,class:"g-resize"},ne={__name:"index",props:{modelValue:{type:String,default:""},showResize:{type:Boolean,default:!0},showClear:{type:Boolean,default:!1},ignoreGroupKeys:{type:Array,default:()=>[]}},emits:["update:modelValue","change","resize","clear"],setup(r,{emit:u}){const f=r,s=G({get:()=>f.modelValue,set:i=>u("update:modelValue",i)}),h=p(null);function d(){h.value.open()}function g(i){u("change",i)}function n(){u("resize")}function k(){s.value="",u("clear")}return(i,V)=>{const v=y("b-icon");return a(),o(w,null,[m("div",te,[m("div",{class:S(["g-img",{resize:r.showResize}]),onClick:d},[C(s)?(a(),o("img",{key:0,src:C(s)},null,8,oe)):b("",!0)],2),r.showResize?(a(),o("div",se,[_(v,{name:"expend",type:"button",title:"\u6062\u590D\u9ED8\u8BA4\u56FE\u7247\u5C3A\u5BF8",onClick:n})])):b("",!0),r.showClear?(a(),o("div",le,[_(v,{name:"undo",type:"button",title:"\u91CD\u7F6E",onClick:k})])):b("",!0)]),_(ae,{ref_key:"modalRef",ref:h,"ignore-group-keys":r.ignoreGroupKeys,modelValue:C(s),"onUpdate:modelValue":V[0]||(V[0]=x=>J(s)?s.value=x:null),onChange:g},null,8,["ignore-group-keys","modelValue"])],64)}}};var fe=R(ne,[["__scopeId","data-v-30134738"]]);export{fe as default};
