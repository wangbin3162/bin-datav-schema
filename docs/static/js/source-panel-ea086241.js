import{aw as I,a6 as x,l as D,k as b,C as S,D as A,o as d,a as m,b as n,c as f,w as g,F as E,O as M,e as w,m as V,t as k,H as B,G as l,aH as H,aI as N}from"./vendor-b7d265ee.js";import{L as P,u as z,C as L,D as R,A as U,U as F}from"./index-f0c9e2c9.js";import{M as O}from"./chunk-bin-ui-next-925ea2c7.js";import"./chunk-brace-b4ee70be.js";const Y={name:"source-panel",components:{DataEditor:P(()=>x(()=>import("./data-editor-7bd96db6.js"),["static/js/data-editor-7bd96db6.js","static/js/vendor-b7d265ee.js","static/css/vendor-2b79d43b.css","static/js/chunk-brace-b4ee70be.js"]))},setup(){const o=D("260px"),i=D(null),h=B("ModelTree",[]),a=b(()=>{const t=e=>{const r=s.value.config?s.value.config.modelId:"",C={...e,icon:e.directory==="Y"?"folder":e.modelType==="DM"?"deploymentunit":"database",selected:r===e.id};return e.children&&e.children.length&&(C.children=e.children.map(t)),C};return h.value.map(t)}),{schemaStore:v,storeToRefs:y}=z(),{selectedCom:p}=y(v),s=b(()=>p.value.apiData),_=t=>{s.value.config.data=t},c=()=>{o.value=`${document.body.clientHeight-260}px`},u=(t,e)=>{var r;e.directory==="Y"?(e.selected=!1,O.warning("\u4E0D\u80FD\u9009\u62E9\u6587\u4EF6\u5939\uFF01")):(s.value.config.modelId===e.id&&(e.selected=!0),(r=i.value)==null||r.open({modelId:e.id,modelName:e.name}))};return S(()=>{c(),L(window,"resize",c)}),A(()=>{R(window,"resize",c)}),{staticEditorHeight:o,sourceDrawerRef:i,ApiType:U,apiDataConfig:s,modelTree:a,handleChange:u,ApiTypeMap:F(),updateData:_}}},T=o=>(H("data-v-4aec554a"),o=o(),N(),o),j={class:"api-editor"},G={class:"attr-source-wp"},K={class:"data-source"},q=T(()=>n("div",{class:"data-result-title"},"\u6570\u636E\u6E90\u914D\u7F6E",-1)),J={class:"data-source-config"},Q={key:1,class:"pt-10"},W=T(()=>n("div",{class:"data-result-title"},"\u9009\u62E9\u5206\u6790\u6A21\u578B",-1)),X={class:"p16"};function Z(o,i,h,a,v,y){const p=l("b-radio"),s=l("b-radio-group"),_=l("g-field"),c=l("data-editor"),u=l("b-tree");return d(),m("div",j,[n("div",G,[n("div",K,[q,n("div",J,[f(_,{label:"\u6570\u636E\u6765\u6E90"},{default:g(()=>[f(s,{modelValue:a.apiDataConfig.type,"onUpdate:modelValue":i[0]||(i[0]=t=>a.apiDataConfig.type=t),type:"button",size:"mini"},{default:g(()=>[(d(!0),m(E,null,M(a.ApiTypeMap,(t,e)=>(d(),w(p,{key:e,label:e},{default:g(()=>[V(k(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a.apiDataConfig.type===a.ApiType.static?(d(),w(c,{key:0,"model-value":a.apiDataConfig.config.data,height:a.staticEditorHeight,onChange:a.updateData},null,8,["model-value","height","onChange"])):(d(),m("div",Q,[W,n("div",X,[f(u,{data:a.modelTree,titleKey:"name","default-expand":"",onSelectChange:a.handleChange},null,8,["data","onSelectChange"])])]))])])])])}var oe=I(Y,[["render",Z],["__scopeId","data-v-4aec554a"]]);export{oe as default};
