var G=Object.defineProperty,O=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var L=(r,e,n)=>e in r?G(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,T=(r,e)=>{for(var n in e||(e={}))K.call(e,n)&&L(r,n,e[n]);if(z)for(var n of z(e))J.call(e,n)&&L(r,n,e[n]);return r},B=(r,e)=>O(r,U(e));import{u as Q}from"./useStoreRouter-e9efff79.js";import{U as q,a as Y}from"./chunk-bin-ui-next-ebb85d31.js";import{as as I,f as x,g as H,J as w,o as f,c as E,w as C,B as a,t as _,D as k,q as p,A as m,E as S,a as A,K as D,F as M,aa as N,u as b,az as P,aA as R,a5 as Z,j as F,Q as V,h as tt,T as et,aC as nt,O as at}from"./vendor-d82059d1.js";import{e as X,f as st}from"./index-9b587de5.js";import{_ as ot}from"./logo-39114ead.js";import"./chunk-brace-7fd40d4c.js";const it="9ff1ccd697f149429674a860034faf66",rt="101190801",W={location:rt,key:it},ct={name:"Weather",setup(){const r=x([]),e=x({aqi:"",level:"",category:"",primary:"",pm2p5:""}),n=x([]),t=x({}),s=H(()=>r.value[0]||{});async function i(){await o(),await c(),await h(),await u()}async function o(){try{const{data:l}=await N.get("https://devapi.qweather.com/v7/weather/24h",{params:W}),{hourly:d,code:g}=l;g==="200"&&(r.value=d.slice(0,6).map(j=>B(T({},j),{fxTime:q.util.parseTime(new Date(j.fxTime),"{h}:{i}")})))}catch(l){console.log(l)}}async function c(){try{const{data:l}=await N.get("https://devapi.qweather.com/v7/air/now",{params:W}),{now:d,code:g}=l;g==="200"&&(e.value=T({},d))}catch(l){console.log(l)}}async function h(){try{const{data:l}=await N.get("https://devapi.qweather.com/v7/weather/3d",{params:W});l.code==="200"&&(n.value=l.daily.map((d,g)=>({date:g===0?"\u4ECA\u5929":g===1?"\u660E\u5929":q.util.parseTime(d.fxDate,"\u5468{a}"),icon:d.iconDay,text:d.textDay,temp:`${d.tempMin}\xB0/${d.tempMax}\xB0`})))}catch(l){console.log(l)}}async function u(){try{const{data:l}=await N.get("https://devapi.qweather.com/v7/warning/now",{params:W});if(l.code==="200"&&l.warning.length>0){const d=l.warning[0];["\u84DD\u8272","\u9EC4\u8272","\u6A59\u8272","\u7EA2\u8272"].includes(d.level)&&(t.value=T({},l.warning[0]))}}catch(l){console.log(l)}}function y(l){const d=+l;return d<=50?{background:"#52c41a",color:"#fff"}:d<=100?{background:"#ffff00",color:"#666"}:d<=150?{background:"#fa8c16",color:"#fff"}:d<=200?{background:"#f5222d",color:"#fff"}:d<=300?{background:"#722ed1",color:"#fff"}:{background:"#93141b",color:"#fff"}}function v(l){return l==="\u84DD\u8272"?{background:"rgba(64,161,255,0.8)",color:"#fff"}:l==="\u9EC4\u8272"?{background:"rgba(255,255,0,0.8)",color:"#fff"}:l==="\u6A59\u8272"?{background:"rgba(251,163,69,0.8)",color:"#fff"}:l==="\u7EA2\u8272"?{background:"rgba(247,78,87,0.8)",color:"#fff"}:{background:"transparent",color:"rgba(255,255,255,0.7)"}}return i(),{current:s,weather:r,air:e,daily:n,warning:t,getAirColor:y,getWarningColor:v,currentDate:q.util.parseTime(new Date,"{y}-{m}-{d} \u5468{a}")}}},lt={class:"global-header-trigger",flex:"cross:center"},dt={class:"f-s-12 mr-8"},ht=["title"],_t={class:"weather-content"},ut={class:"city mb-5",flex:"main:justify"},ft=a("span",null,"\u5F90\u5DDE\u5E02",-1),vt={class:"weather-current",flex:"cross:center"},mt=["title"],gt={class:"weather-text"},pt={class:"temp"},wt={class:"weather-title"},bt=a("span",null,null,-1),yt=["title"],xt={class:"weather-air mb-5",flex:"cross:center"},Ct=p(" \u7A7A\u6C14\u8D28\u91CF\u6307\u6570 "),kt=a("i",{class:"b-iconfont b-icon-cloud",style:{"font-size":"14px"}},null,-1),$t=p("\xA0 "),Mt=p("\xA0 "),Tt=p("\xA0 "),It={class:"weather-desc mb-5"},St=["title"],Dt={key:0,class:"weather-daily"},Nt={class:"pl-20",flex:"cross:center"},Wt={class:"ml-8"},qt={class:"t-right"};function At(r,e,n,t,s,i){const o=w("b-popover");return f(),E(o,{placement:"bottom-end",width:"320px","popper-class":"weather-box",trigger:"hover","show-arrow":!1,offset:4},{content:C(()=>[a("div",_t,[a("div",ut,[ft,a("span",null,_(t.currentDate),1)]),a("div",vt,[a("i",{class:k(`qi-icon qi-${t.current.icon}`),title:t.current.text},null,10,mt),a("div",gt,[a("div",pt,_(t.current.temp)+"\xB0",1),a("p",wt,[p(_(t.current.text)+" ",1),bt,p(" "+_(t.current.windDir)+" "+_(t.current.windScale)+"\u7EA7 ",1)])]),t.warning.typeName?(f(),m("div",{key:0,class:"warning-tag",style:S(t.getWarningColor(t.warning.level)),title:t.warning.text},_(t.warning.typeName)+_(t.warning.level)+"\u9884\u8B66 ",13,yt)):A("",!0)]),a("div",xt,[Ct,a("div",{class:"air-tag",style:S(t.getAirColor(t.air.aqi))},[kt,$t,a("span",null,_(t.air.category),1),Mt,a("span",null,_(t.air.aqi),1),Tt],4),p(" PM2.5: "+_(t.air.pm2p5),1)]),a("div",It,[(f(!0),m(M,null,D(t.weather,(c,h)=>(f(),m("div",{key:h,class:"hour-item"},[a("div",null,_(c.fxTime),1),a("i",{class:k(`weather-icon qi-${c.icon}`),title:c.text},null,10,St),a("div",null,_(c.temp)+"\u2103",1)]))),128))]),t.daily.length>0?(f(),m("div",Dt,[(f(!0),m(M,null,D(t.daily,(c,h)=>(f(),m("div",{key:h,class:"daily-item"},[a("div",null,_(c.date),1),a("div",Nt,[a("i",{class:k(`weather-icon qi-${c.icon}`),style:{"font-size":"20px"}},null,2),a("div",Wt,_(c.text),1)]),a("div",qt,_(c.temp),1)]))),128))])):A("",!0)])]),default:C(()=>[a("div",lt,[a("p",dt,_(t.currentDate),1),a("i",{class:k(`qi-${t.current.icon}`),style:{"font-size":"14px"},title:t.current.text},null,10,ht)])]),_:1})}var jt=I(ct,[["render",At]]),zt="/bin-datav-schema/static/jpeg/avatar05-2e078c6d.jpeg";const Lt={name:"NavHeader",components:{Weather:jt},props:{isFixed:{type:Boolean,default:!1}},setup(){const{$store:r,$router:e,$route:n}=Q(),t=H(()=>r.state.user.userInfo);function s(i){i==="userCenter"&&e.push("/userCenter"),i==="logout"&&Y.confirm({type:"warning",title:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\u5417\uFF1F"}).then(()=>{r.dispatch("user/clearToken"),e.push(`/login?redirect=${n.fullPath}`)}).catch(o=>{console.log(o)})}return{userInfo:t,handleClick:s,welcome:"Welcome to the data analysis system",version:X.version,title:X.description}}},$=r=>(P("data-v-658f1d1a"),r=r(),R(),r),Bt={class:"logo"},Ht={class:"top-tip"},Et=$(()=>a("strong",{class:"tip-strong"},"\u516C\u544A",-1)),Pt={class:"dv-marquee"},Rt={class:"content"},Ft=$(()=>a("span",{class:"content-space"},null,-1)),Vt={class:"user"},Xt={class:"header-item"},Gt={class:"user-link-wrap"},Ot=$(()=>a("img",{src:zt,class:"avatar",alt:"avatar"},null,-1)),Ut={key:0,class:"user-link"},Kt={flex:"cross:center"},Jt=$(()=>a("span",{class:"ml-5"},"\u6CE8\u9500\u767B\u5F55",-1)),Qt={class:"dv-nav"},Yt={class:"header-img"},Zt={class:"nav-img-text"},te=$(()=>a("img",{src:ot,alt:"logo"},null,-1)),ee={class:"nav-welcome"},ne=$(()=>a("div",{class:"nav-img"},null,-1));function ae(r,e,n,t,s,i){const o=w("weather"),c=w("b-icon"),h=w("b-dropdown-item"),u=w("b-dropdown-menu"),y=w("b-dropdown");return f(),m("div",null,[a("div",{class:"dv-header",style:S({background:n.isFixed?"#171b22":""})},[a("div",Bt,[a("div",Ht,[Et,a("div",Pt,[a("span",Rt,[(f(),m(M,null,D(2,v=>(f(),m(M,{key:v},[p(" \u6B22\u8FCE\u4F7F\u7528"+_(t.title)+"\uFF0C \u7248\u672C\u53F7\uFF1AV"+_(t.version)+"\uFF0C\u672C\u7CFB\u7EDF\u652F\u6301Chrome\u3001Edge\u3001Firefox\u7B49\u4E3B\u6D41\u6D4F\u89C8\u5668\u3002 ",1),Ft],64))),64))])])])]),a("div",Vt,[b(o),a("div",Xt,[b(y,{onCommand:t.handleClick,"append-to-body":""},{dropdown:C(()=>[b(u,{style:{width:"120px"}},{default:C(()=>[b(h,{name:"logout"},{default:C(()=>[a("div",Kt,[b(c,{name:"logout",size:"16"}),Jt])]),_:1})]),_:1})]),default:C(()=>[a("div",Gt,[Ot,t.userInfo?(f(),m("span",Ut,[p(_(t.userInfo.realName)+" ",1),b(c,{name:"down"})])):A("",!0)])]),_:1},8,["onCommand"])])])],4),a("div",Qt,[a("div",Yt,[a("div",Zt,[te,a("div",ee,[a("h2",null,_(t.title),1),a("h4",null,_(t.welcome),1)])]),ne])])])}var se=I(Lt,[["render",ae],["__scopeId","data-v-658f1d1a"]]);class oe{constructor(e,n,t=0){this.j=.85,this.k=10,this.l=4,this.pattern=null,this.tabHeight=0,this.tabWidthList=[],this.opt={currentIndex:0,nextIndex:1,speed:1,timer:0,width:200,height:100,animating:!1,curDisX:0,distance:0},this.canvas=document.getElementById(e),this.tabs=document.querySelectorAll(n);const{opt:s}=this;this.calcTabs(),this.initCanvas(this.canvas,s.width,s.height),this.createPattern(this.canvas),this.startDraw(0),this.toggle(t)}calcTabs(){const{opt:e,tabs:n}=this,t=[];let s=0;n.forEach(i=>{t.push(s),s+=i.offsetWidth}),t[0]=-20,t.push(s),this.tabWidthList=t,this.tabHeight=n[0].offsetHeight+0,e.height=this.tabHeight+20,e.width=window.innerWidth}initCanvas(e,n,t){const s=e.getContext("2d"),{devicePixelRatio:i}=window;e.width=n*i,e.height=t*i,e.style.width=`${n}px`,e.style.height=`${t}px`,s.scale(i,i)}createPattern(e){const n=140,t=63,s=1,i=document.createElement("canvas");i.width=n,i.height=t,i.style.width=`${n/s}px`,i.style.height=`${t/s}px`;const o=i.getContext("2d");o.scale(s,s),o.lineWidth=.4;for(let c=3,h=.8,u=1;30>u;u++)o.strokeStyle=`RGBA(22, 120, 160, ${h})`,o.beginPath(),o.moveTo(0,u*c),o.lineTo(n,u*c),o.stroke(),o.closePath(),10<u&&(h-=.1);this.pattern=e.getContext("2d").createPattern(i,"repeat-x")}calcAVGSpeed(e){const{l:n,j:t,k:s}=this;let i=(n*t*e+s*(1-t)*e)/(s*n*20);return i=Math.max(Math.abs(i),2.5)*Math.sign(i),i}getCurSpeed(e,n){const{l:t,j:s,k:i,opt:o}=this;return Math.abs(e)>Math.abs(s*n)?t*o.speed:i*o.speed}calCurve(e,n,t,s,i,o){e.bezierCurveTo(n+o,t,s-o,i,s,i)}drawHightlight(e){const{opt:n}=this,t=this.canvas.getContext("2d"),s=.3;t.clearRect(0,0,2*n.width,2*n.height),t.shadowColor="rgba(36, 131, 255, 1)",t.shadowBlur=5,t.strokeStyle="#004CB3",t.lineWidth=.8,t.fillStyle="none",this.draw(t,!1);const i=t.createLinearGradient(0,0,n.width,n.height),o=e-s;i.addColorStop(Math.min(1,Math.max(0,0+o)),"rgba(0,0,0,0)"),i.addColorStop(Math.min(1,Math.max(0,0+o+.1)),"#8ed6ff"),i.addColorStop(Math.min(1,0+o+s),"#8ed6ff"),i.addColorStop(Math.min(1,0+o+s+.1),"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,0)"),t.lineWidth=1.5,t.strokeStyle=i,t.fillStyle=this.pattern,this.draw(t,!0)}startDraw(e){this.drawHightlight(e),this.opt.timer=requestAnimationFrame(()=>{this.startDraw((e+.005)%1.6)})}draw(e,n){const{opt:t,tabWidthList:s,tabHeight:i}=this,o=t.currentIndex,c=i,h=0,u=40,y=20,v=.5,l=2.5;let d=0;if(e.beginPath(),e.moveTo(-50,t.height+10),e.lineTo(-50,c+v),t.animating){const g=this.getCurSpeed(t.curDisX,t.distance);d=Math.min(Math.abs(t.distance),Math.abs(t.curDisX+g))*Math.sign(g)}if(e.lineTo(h+s[o]+d-u/2,c+v),this.calCurve(e,h+s[o]+d-u/2,c+v,h+s[o]+d+u/2,l+v,y),t.animating){const g=s[t.nextIndex+1]-s[t.nextIndex];e.lineTo(h+s[o]+g+d-u/2,l+v),this.calCurve(e,h+s[o]+g+d-u/2,l+v,h+s[o]+g+d+u/2,c+v,y)}else e.lineTo(h+s[o+1]+d-u/2,l+v),this.calCurve(e,h+s[o+1]+d-u/2,l+v,h+s[o+1]+d+u/2,c+v,y);e.lineTo(t.width+10,c+v),e.lineTo(t.width+10,t.height+10),e.closePath(),e.stroke(),n&&e.fill(),n&&t.animating&&(t.curDisX=d,Math.abs(d)>=Math.abs(t.distance)&&(t.animating=!1,t.currentIndex=t.nextIndex))}toggle(e){const{opt:n,tabWidthList:t}=this;e!==n.currentIndex&&t&&t.length&&(!n.animating||e!==n.nextIndex)&&(n.animating=!0,n.distance=t[e]-t[n.currentIndex],n.speed=this.calcAVGSpeed(n.distance),n.curDisX=0,n.nextIndex=e)}resize(){const{opt:e}=this;e.timer&&cancelAnimationFrame(e.timer),this.calcTabs(),this.initCanvas(this.canvas,e.width,e.height),this.startDraw(0)}}const ie={name:"nav-main",props:{navs:{type:Array,required:!0}},emits:["change"],setup(r,{emit:e}){const n=Z(),t=x(0);let s=null;const i=(c,h)=>{s&&(t.value=h,s.toggle(h),e("change",c))},o=st(()=>{s&&s.resize()},500);return F(()=>{const c=r.navs.findIndex(h=>h.name===n.name);t.value=c>-1?c:0,s=new oe("nav-canvas",".nav-main .nav-span",t.value),window.addEventListener("resize",o)}),V(()=>{window.removeEventListener("resize",o)}),{toggleNav:i,activeNav:t}}},re=r=>(P("data-v-8cea7a48"),r=r(),R(),r),ce={class:"nav-main"},le=re(()=>a("canvas",{id:"nav-canvas",style:{position:"absolute","z-index":"-1",left:"0"}},null,-1)),de=["onClick"];function he(r,e,n,t,s,i){return f(),m("div",ce,[le,(f(!0),m(M,null,D(n.navs,(o,c)=>(f(),m("span",{key:o.name,class:"nav-span"},[a("a",{class:k(["nav-link",{"nav-active":t.activeNav===c}]),onClick:h=>t.toggleNav(o,c)},[a("i",{class:k(`b-iconfont b-icon-${o.icon} nav-icon`)},null,2),p(_(o.title),1)],10,de)]))),128))])}var _e=I(ie,[["render",he],["__scopeId","data-v-8cea7a48"]]),ue={name:"MoveTransition",functional:!0,setup(r,{slots:e}){return()=>tt(et,{name:"fade-transverse",appear:!0,onBeforeLeave(n){n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.overflow="hidden"},onAfterLeave(n){n.style=""}},e.default)}};const fe={name:"Home",components:{MoveTransition:ue,NavMain:_e,NavHeader:se},setup(){const r=x(null),e=x(!1),n=nt(),t=()=>{e.value=r.value.$el.offsetTop>200},s=i=>{n.push({name:i.name})};return F(()=>{window.addEventListener("scroll",t)}),V(()=>{window.removeEventListener("scroll",t)}),{navMainRef:r,isFixed:e,onNavChange:s}}},ve={class:"dv-home"},me=a("div",{class:"nav-shadow"},null,-1),ge={class:"dv-main"},pe={class:"dv-content"};function we(r,e,n,t,s,i){const o=w("nav-header"),c=w("nav-main"),h=w("router-view");return f(),m("div",ve,[b(o,{"is-fixed":t.isFixed},null,8,["is-fixed"]),b(c,{ref:"navMainRef",navs:r.$store.state.menu.menu,style:S({background:t.isFixed?"#171b22":""}),onChange:t.onNavChange},null,8,["navs","style","onChange"]),me,a("div",ge,[a("div",pe,[b(h,null,{default:C(({Component:u})=>[(f(),E(at(u)))]),_:1})])])])}var Te=I(fe,[["render",we]]);export{Te as default};
