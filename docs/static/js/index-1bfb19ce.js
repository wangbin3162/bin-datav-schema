import{u as f}from"./useSchemaStore-5d048447.js";import{a4 as g,a6 as _,a7 as y,f as w,j as b,J as x,o as r,A as i,d as S,z as k,B as d,u as $,F as j,K as z,E as v,c as B,O as C}from"./vendor-cf8cb8a4.js";import{l as E}from"./database.api-4a38f059.js";import{Q as I,s as D,R as c}from"./index-20325587.js";import"./chunk-brace-7fd40d4c.js";import"./chunk-bin-ui-next-406e974a.js";const R={name:"Screen",components:{GLoading:I},setup(){const l=_(),u=y(),{loadScreenData:m,pageConfig:t,comps:p}=f(),n=w(!1),s=()=>{const o=t.value.width,a=document.documentElement.clientWidth/o;c(document.body,{transform:`scale(${a})`,transformOrigin:"left top",backgroundSize:"100%"})},e=async()=>{const{screenId:o}=u.params;if(!!o)try{n.value=!0;const a=await E(o);a.data&&(await m(a.data),h(a.data),setTimeout(()=>{n.value=!1},500),D(window,"resize",s))}catch(a){l.push("/notfound")}},h=o=>{const{pageInfo:a}=o;document.title=a.name,document.querySelector('meta[name="viewport"]').setAttribute("content",`width=${t.value.width}`),c(document.documentElement,{overflowX:"hidden",overflowY:"visible"}),c(document.body,{width:`${t.value.width}px`,height:`${t.value.height}px`,backgroundImage:`url(${t.value.bgImage})`,backgroundColor:t.value.bgColor}),s()};return b(()=>{e()}),{loading:n,comps:p}}},A={class:"screen-wrapper"},F={class:"dv-loading"},L={class:"scene"};function N(l,u,m,t,p,n){const s=x("g-loading");return r(),i("div",A,[S(d("div",F,[$(s,{spinning:""})],512),[[k,t.loading]]),d("div",{class:"dv-layout",style:v({visibility:t.loading?"hidden":"visible"})},[d("div",L,[(r(!0),i(j,null,z(t.comps,e=>(r(),i("div",{class:"dv-com absolute",key:e.id,style:v({left:e.attr.x+"px",top:e.attr.y+"px",width:e.attr.w+"px",height:e.attr.h+"px",opacity:e.attr.opacity,transform:`rotate(${e.attr.rotate}deg)`})},[(r(),B(C(e.name),{data:e},null,8,["data"]))],4))),128))])],4)])}var M=g(R,[["render",N]]);export{M as default};
