var ht=Object.defineProperty,gt=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var $e=(o,t,n)=>t in o?ht(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,F=(o,t)=>{for(var n in t||(t={}))vt.call(t,n)&&$e(o,n,t[n]);if(Be)for(var n of Be(t))_t.call(t,n)&&$e(o,n,t[n]);return o},De=(o,t)=>gt(o,pt(t));import{S as bt}from"./index-8d61f74e.js";import{a4 as I,a5 as Ie,g as S,o as p,A as _,D as k,f as T,n as _e,J as v,c as O,w as y,B as a,u as m,x as be,q as B,a6 as Le,a7 as Te,d as te,X as ye,F as U,y as yt,L as xt,E as $,K as X,H as ze,t as P,a as se,_ as Ct,j as oe,Q as Ne,a8 as ie,a9 as ce,aM as wt,k as xe,z as Ce,r as Ue,I as re,W as St,O as Re,T as kt}from"./vendor-cf8cb8a4.js";import{a as de,M as je}from"./chunk-bin-ui-next-406e974a.js";import{u as N}from"./useSchemaStore-5d048447.js";import{p as Ae,q as Mt,s as J,v as Q,M as q,w as E,x as K,C as ne,y as we,z as Se,A as Vt,d as Bt,c as $t,B as Dt,D as Ee,F as It,i as Lt,G as Tt,I as zt,K as Nt,L as Ut,N as Rt,O as jt}from"./index-20325587.js";import{b as At}from"./config-81a2abf5.js";import{m as Et}from"./config-49dfba69.js";import{h as Ht}from"./config-e9964004.js";import{b as Wt}from"./config-42e4e32d.js";import{d as fe}from"./colors-f71480cd.js";import{a as He,l as Ot}from"./database.api-4a38f059.js";import"./chunk-brace-7fd40d4c.js";const Yt={name:"HeadLoading",setup(){const o=Ie();return{loading:S(()=>o.state.schema.toolbar.loading)}}};function Ft(o,t,n,e,s,l){return p(),_("div",{class:k(["loading-indicator",{loading:e.loading}])},null,2)}var Pt=I(Yt,[["render",Ft],["__scopeId","data-v-5de99d01"]]);const Xt={name:"publish-screen",props:{projectId:{type:String,required:!0},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,t){const n=T(!1),{saveScreenData:e}=N(),s=S(()=>`${window.location.origin}/#/screen/${o.projectId}`),l=()=>{n.value=!1,t.emit("update:modelValue",!1)},r=()=>{be(()=>{Ae(s.value)&&de.success("\u590D\u5236\u6210\u529F")})},i=async()=>{await e(),de.success("\u53D1\u5E03\u6210\u529F\uFF01")};return _e(()=>o.modelValue,c=>{n.value=c}),{visible:n,shareUrl:s,closeDialog:l,copyUrl:r,handlePublishDown:i}}},qt={style:{"padding-bottom":"24px"}},Kt=a("div",{style:{color:"#fff","font-size":"14px","padding-bottom":"12px"}},"\u53D1\u5E03\u94FE\u63A5",-1),Gt={flex:""},Zt=B("\u590D\u5236"),Jt={class:"t-center"},Qt=B("\u53D1\u5E03\u5927\u5C4F");function eo(o,t,n,e,s,l){const r=v("g-input"),i=v("b-button"),c=v("b-modal");return p(),O(c,{modelValue:e.visible,"onUpdate:modelValue":t[1]||(t[1]=d=>e.visible=d),"append-to-body":"",title:"\u53D1\u5E03",top:"200px","custom-class":"publish-modal",onClose:e.closeDialog},{default:y(()=>[a("div",qt,[Kt,a("div",Gt,[m(r,{modelValue:e.shareUrl,"onUpdate:modelValue":t[0]||(t[0]=d=>e.shareUrl=d),readonly:"",type:"textarea",autosize:{minRows:3},style:{width:"80%","line-height":"22px",background:"#1d262e",cursor:"pointer","margin-right":"16px"}},null,8,["modelValue"]),m(i,{type:"text",onClick:e.copyUrl},{default:y(()=>[Zt]),_:1},8,["onClick"])])]),a("div",Jt,[m(i,{type:"primary",onClick:e.handlePublishDown,style:{width:"200px"}},{default:y(()=>[Qt]),_:1},8,["onClick"])])]),_:1},8,["modelValue","onClose"])}var to=I(Xt,[["render",eo]]);const oo={name:"header-bar",components:{PublishScreen:to,HeadLoading:Pt},props:{backUrl:{type:String},backTarget:{type:String,default:"_blank",validator:o=>["_self","_blank"].includes(o)},pageStatus:{type:Object,default:()=>({})}},setup(o){const t=Le(),n=Te(),e=N(),s=T(!1),l=T(""),r=()=>{const u=o.backUrl||"/";if(o.backTarget==="_blank"){const h=t.resolve(u);window.open(h.href,o.backTarget)}else t.push(u)},i=async()=>{const{data:u}=await e.saveScreenData();await Ae(JSON.stringify(u)),Mt.primary("\u5DF2\u62F7\u8D1D\u914D\u7F6E\u81F3\u526A\u5207\u677F\uFF01")},c=async()=>{const u=e.pageInfo.value.id,{data:h}=await e.saveScreenData();if(!u){let C=t.resolve({path:"/schema/screen",query:{id:h.pageInfo.id}});window.location.replace(C.href)}de.success({message:"\u4FDD\u5B58\u6210\u529F\uFF01",showClose:!0})},d=async()=>{const{data:u}=await e.saveScreenData();let h=t.resolve({path:`/screen/preview/${u.pageInfo.id}`,query:{}});window.open(h.href,"_blank")},f=()=>{s.value=!0,l.value=n.query.id};return De(F({},e),{publishVisible:s,publishAppId:l,copyCfg:i,handleBack:r,handleSave:c,handPreview:d,handlePublish:f})}},no={class:"header-container"},ao={class:"left-actions"},lo={class:"screen-info"},so=a("span",null,"\u5DE5\u4F5C\u7A7A\u95F4",-1),io=a("span",{style:{padding:"0 6px 0 12px"}},"-",-1),co={class:"global-actions"};function ro(o,t,n,e,s,l){const r=v("b-icon"),i=v("b-tooltip"),c=v("b-space"),d=v("head-loading"),f=v("publish-screen");return p(),_(U,null,[a("div",no,[a("div",ao,[m(c,{size:"mini"},{default:y(()=>[m(i,{content:"\u56FE\u5C42","open-delay":500},{default:y(()=>[a("div",{class:k(["head-btn",{active:o.toolbar.layer}]),onClick:t[0]||(t[0]=u=>o.toggleLayerPanel())},[m(r,{name:"container"})],2)]),_:1}),m(i,{content:"\u7EC4\u4EF6\u5217\u8868","open-delay":500},{default:y(()=>[a("div",{class:k(["head-btn",{active:o.toolbar.components}]),onClick:t[1]||(t[1]=u=>o.toggleCompsPanel())},[m(r,{name:"hourglass",class:k(["com-list-icon",{"is-rotate":!o.toolbar.components}])},null,8,["class"])],2)]),_:1}),m(i,{content:"\u53F3\u4FA7\u9762\u677F","open-delay":500},{default:y(()=>[a("div",{class:k(["head-btn",{active:o.toolbar.config}]),onClick:t[2]||(t[2]=u=>o.toggleConfigPanel())},[m(r,{name:"control"})],2)]),_:1}),m(i,{content:"\u5DE5\u5177\u7BB1","open-delay":500},{default:y(()=>[a("div",{class:k(["head-btn",{active:o.toolbar.toolbox}]),onClick:t[3]||(t[3]=u=>o.toggleToolbox())},[m(r,{name:"shopping"})],2)]),_:1})]),_:1})]),a("div",lo,[m(i,{content:"\u8FD4\u56DE","open-delay":500},{default:y(()=>[m(r,{name:"laptop",type:"button",onClick:e.handleBack},null,8,["onClick"])]),_:1}),so,io,te(a("input",{class:"header-input",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",maxlength:"50",type:"text","onUpdate:modelValue":t[4]||(t[4]=u=>o.pageInfo.name=u)},null,512),[[ye,o.pageInfo.name]])]),a("div",co,[m(c,{size:"mini"},{default:y(()=>[m(i,{content:"\u4FDD\u5B58\u5FEB\u7167","open-delay":500},{default:y(()=>[a("div",{class:"head-btn",onClick:t[5]||(t[5]=(...u)=>e.copyCfg&&e.copyCfg(...u))},[m(r,{name:"codelibrary"})])]),_:1}),m(i,{content:"\u4FDD\u5B58","open-delay":500},{default:y(()=>[a("div",{class:"head-btn",onClick:t[6]||(t[6]=(...u)=>e.handleSave&&e.handleSave(...u))},[m(r,{name:"save"})])]),_:1}),m(i,{content:"\u53D1\u5E03","open-delay":500},{default:y(()=>[a("div",{class:"head-btn",onClick:t[7]||(t[7]=(...u)=>e.handlePublish&&e.handlePublish(...u))},[m(r,{name:"send"})])]),_:1}),m(i,{content:"\u9884\u89C8","open-delay":500},{default:y(()=>[a("div",{class:"head-btn",onClick:t[8]||(t[8]=(...u)=>e.handPreview&&e.handPreview(...u))},[m(r,{name:"eye"})])]),_:1})]),_:1})])]),m(d),m(f,{modelValue:e.publishVisible,"onUpdate:modelValue":t[9]||(t[9]=u=>e.publishVisible=u),"project-id":e.publishAppId},null,8,["modelValue","project-id"])],64)}var mo=I(oo,[["render",ro]]);const me=yt({x:0,y:0});function ke(o={}){const t=Ie(),n=S(()=>t.state.schema),e=S(()=>n.value.contextMenuInfo),s=S(()=>n.value.selectedCom),l=S(()=>{var h;return(h=s.value)==null?void 0:h.locked}),r=S(()=>{var h;return(h=s.value)==null?void 0:h.hided}),i=S(()=>n.value.renamingId),c=S(()=>({display:e.value.show?"block":"none",left:`${me.x+10}px`,top:`${me.y+10}px`,transform:document.documentElement.clientHeight-me.y<250?"translate(0px, -100%)":""})),d=h=>{h.preventDefault(),s.value&&(me.x=h.clientX,me.y=h.clientY,e.value.show=!0,J(document,"click",f))},f=()=>{Q(document,"click",f),o&&o.beforeClose&&o.beforeClose(),e.value.show=!1};return{contextMenu:e,showMenu:d,renamingId:i,renamingCom:h=>{t.dispatch("schema/renamingCom",h)},selectedCom:s,isLocked:l,isHided:r,contextMenuStyle:c}}const uo={name:"layer-panel",setup(){const{toolbar:o,toggleLayerPanel:t,comps:n,selectedCom:e,hoveredCom:s,onCompHovered:l,onCompSelected:r,onCompMoved:i}=N(),{showMenu:c,renamingId:d,renamingCom:f}=ke(),u=S(()=>!!e.value),h=S(()=>({opacity:e.value?1:.3})),C=S(()=>{var M;return{enable:!!e.value,checked:(M=e.value)==null?void 0:M.locked}}),g=S(()=>{var M;return{enable:!!e.value,checked:(M=e.value)==null?void 0:M.hided}}),w=S(()=>[...n.value].reverse()),x=M=>{e.value&&i(e.value.id,M)};return{comps:n,toolbar:o,toggleLayerPanel:t,enableBtnClass:u,enableBtnStyle:h,moveUp:()=>x(q.up),moveDown:()=>x(q.down),moveTop:()=>x(q.top),moveBottom:()=>x(q.bottom),descComs:w,enableLockBtnClass:C,enableHideBtnClass:g,onEnter:M=>{l(M)},onLeave:()=>{l("")},selectCom:M=>{const W=n.value.find(Y=>Y.id===M);W&&r(W)},hoveredCom:s,selectedCom:e,showMenu:c,cancelSelectCom:()=>{r()},renamingId:d,renamingCom:f}}},fo={class:"layer-panel"},ho={class:"layer-top"},go=a("div",{class:"layer-num pl-10"},"\u56FE\u5C42",-1),po=a("i",{class:"b-iconfont b-icon-left",title:"\u6536\u8D77"},null,-1),vo=[po],_o={class:"layer-toolbar layer-toolbar-top"},bo={class:"layer-manager-wrap"},yo=["title","onMousedown","onMouseenter"],xo=["onUpdate:modelValue"],Co={key:1,class:"layer-item-span"},wo={class:"layer-item-text"},So=["onClick"],ko=["onClick"];function Mo(o,t,n,e,s,l){const r=v("b-icon"),i=xt("focus");return p(),_("div",{class:k(["layer-panel-wp",{"is-hide":!e.toolbar.layer}])},[a("div",fo,[a("div",ho,[go,a("div",{class:"layer-action",onClick:t[0]||(t[0]=c=>e.toggleLayerPanel(!1))},vo)]),a("div",_o,[a("i",{title:"\u4E0A\u79FB\u4E00\u5C42",class:k(["b-iconfont b-icon-arrowup toolbar-icon standard",e.enableBtnClass]),style:$(e.enableBtnStyle),onClick:t[1]||(t[1]=(...c)=>e.moveUp&&e.moveUp(...c))},null,6),a("i",{title:"\u4E0B\u79FB\u4E00\u5C42",class:k(["b-iconfont b-icon-arrowdown toolbar-icon standard",e.enableBtnClass]),style:$(e.enableBtnStyle),onClick:t[2]||(t[2]=(...c)=>e.moveDown&&e.moveDown(...c))},null,6),a("i",{title:"\u7F6E\u9876",class:k(["b-iconfont b-icon-vertical-align-botto toolbar-icon standard",e.enableBtnClass]),style:$(F({transform:"rotate(180deg)"},e.enableBtnStyle)),onClick:t[3]||(t[3]=(...c)=>e.moveTop&&e.moveTop(...c))},null,6),a("i",{title:"\u7F6E\u5E95",class:k(["b-iconfont b-icon-vertical-align-botto toolbar-icon standard",e.enableBtnClass]),style:$(e.enableBtnStyle),onClick:t[4]||(t[4]=(...c)=>e.moveBottom&&e.moveBottom(...c))},null,6)]),a("div",bo,[(p(!0),_(U,null,X(e.descComs,c=>(p(),_("div",{key:c.id,title:c.alias,class:k(["layer-manager-item",[{hided:c.hided,locked:c.locked,hovered:c.id===e.hoveredCom,selected:e.selectedCom&&c.id===e.selectedCom.id}]]),onMousedown:d=>e.selectCom(c.id),onMouseenter:d=>e.onEnter(c.id),onMouseleave:t[7]||(t[7]=(...d)=>e.onLeave&&e.onLeave(...d)),onContextmenu:t[8]||(t[8]=d=>e.showMenu(d))},[m(r,{name:c.icon},null,8,["name"]),c.id===e.renamingId?te((p(),_("input",{key:0,"onUpdate:modelValue":d=>c.alias=d,class:"layer-item-input",onBlur:t[5]||(t[5]=d=>e.renamingCom("")),onKeydown:t[6]||(t[6]=ze(d=>e.renamingCom(""),["enter"]))},null,40,xo)),[[ye,c.alias,void 0,{trim:!0}],[i]]):(p(),_("span",Co,[a("span",wo,P(c.alias),1)])),c.hided?(p(),_("i",{key:2,class:"b-iconfont b-icon-eye show-toggle-btn",onClick:d=>c.hided=!1},null,8,So)):se("",!0),c.locked?(p(),_("i",{key:3,class:"b-iconfont b-icon-lock show-toggle-btn",onClick:d=>c.locked=!1},null,8,ko)):se("",!0)],42,yo))),128)),a("div",{class:"last-flex-item",onClick:t[9]||(t[9]=(...c)=>e.cancelSelectCom&&e.cancelSelectCom(...c))})])])],2)}var Vo=I(uo,[["render",Mo]]);const We={name:"VBasicBar",alias:"\u57FA\u672C\u67F1\u56FE",img:E("basic-bar.png"),type:"bar",used:!0},Oe={name:"VHorizontalBar",alias:"\u57FA\u672C\u6761\u5F62\u56FE",img:E("hori-basic-bar.png"),type:"bar",used:!0},Ye={name:"VBasicLine",alias:"\u57FA\u672C\u6298\u7EBF\u56FE",img:E("basic-line.png"),type:"line",used:!0},Fe={name:"VBasicArea",alias:"\u57FA\u672C\u533A\u57DF\u56FE",img:E("basic-area.png"),type:"line",used:!0},Pe={name:"VMainTitle",alias:"\u901A\u7528\u6807\u9898",img:E("main-title.png"),type:"info",used:!0},Xe={name:"VNumberTitleFlop",alias:"\u6570\u5B57\u6307\u6807",img:E("number-title-flop.png"),type:"info",used:!0},qe={name:"VTimer",alias:"\u65F6\u95F4\u5668",img:E("timer.png"),type:"info",used:!0},Ke={name:"VBgBox",alias:"\u80CC\u666F\u5757",img:E("bg-box.png"),type:"media",used:!0},Ge={name:"VBorderBox",alias:"\u8FB9\u6846",img:E("border-box.png"),type:"media",used:!0},Ze={name:"VDecoration",alias:"\u88C5\u9970\u5668",img:E("decoration.png"),type:"media",used:!0},Je={name:"VMainImg",alias:"\u5355\u5F20\u56FE\u7247",img:E("img.png"),type:"media",used:!0},he=[{type:"normal",name:"\u5E38\u7528",icon:"star",data:[We,Oe,Ye,Fe,Pe,Xe,qe,Ze,Je,Ge,Ke]},{type:"bar",name:"\u67F1\u56FE",icon:"barchart",data:[We,Oe]},{type:"line",name:"\u7EBF\u56FE",icon:"linechart",data:[Ye,Fe]},{type:"info",name:"\u4FE1\u606F",icon:"info-circle",data:[Pe,Xe,qe]},{type:"media",name:"\u5A92\u4F53",icon:"Youtube",data:[Ke,Ge,Ze,Je]}];function Bo(o){for(let t=0;t<he.length;t++){const n=he[t];for(let e=0;e<n.data.length;e++){const s=n.data[e];if(s.name===o)return{classification:n,com:s}}}return null}const $o=[K("title",{description:"\u6807\u9898\u503C",optional:!0}),K("url",{description:"\u8D85\u94FE\u63A5url",optional:!0})],Do={alias:"\u901A\u7528\u6807\u9898",icon:"file-word",type:ne.com,attr:{w:300,h:48},config:{title:"\u6211\u662F\u6807\u9898\u6570\u636E",textStyle:{fontFamily:"Microsoft Yahei",fontSize:24,color:"#fff",fontWeight:"normal"},textAlign:"center",writingMode:"horizontal-tb",backgroundStyle:{show:!1,bgColor:"#008bff",borderRadius:15,borderColor:"#fff",borderStyle:"solid",borderWidth:1},ellipsis:!1,urlConfig:{url:"",isBlank:!1}},apis:we({fields:Object.assign({},...$o)}),apiData:Se({staticPath:"text/main-title"}),events:{},actions:{}},Io=[K("title",{description:"\u6807\u9898",optional:!0}),K("value",{description:"\u7FFB\u724C\u5668\u6570\u503C"}),K("prefix",{description:"\u7FFB\u724C\u5668\u524D\u7F00",optional:!0}),K("suffix",{description:"\u7FFB\u724C\u5668\u540E\u7F00",optional:!0})],Lo={alias:"\u6570\u5B57\u6307\u6807",icon:"orderedlist",type:ne.com,attr:{w:300,h:74},config:{global:{fontFamily:"Microsoft Yahei",arrangement:"top",distance:0},title:{content:"\u6570\u5B57\u6307\u6807\u6807\u9898",textStyle:{fontSize:18,color:"#79daff",fontWeight:"normal",textAlign:"flex-start"}},counter:{textStyle:{fontFamily:"Microsoft Yahei",fontSize:36,color:"#0a73ff",fontWeight:"bold",textAlign:"left"},value:1234567,duration:1e3,autoplay:!0,decimals:2,decimal:".",separator:",",prefix:"\uFFE5",suffix:""}},apis:we({fields:Object.assign({},...Io)}),apiData:Se({staticPath:"text/number-title-flop"}),events:{},actions:{}},To={alias:"\u88C5\u9970\u5668",icon:"pushpin",type:ne.com,attr:{w:200,h:200},config:{img:"decoration10"},apis:{},apiData:{},events:{},actions:{}},zo={alias:"\u8FB9\u6846",icon:"gateway",type:ne.com,attr:{w:300,h:180},config:{img:"box1"},apis:{},apiData:{},events:{},actions:{}},No={alias:"\u65F6\u95F4\u5668",icon:"time-circle",type:ne.com,attr:{w:300,h:56},config:{iconStyle:{show:!0,size:1.2,color:"rgba(93,245,244,1)",marginRight:6},time:{textStyle:{fontFamily:"Microsoft Yahei",fontSize:18,color:"#fff",fontWeight:"normal"},format:"YYYY-MM-DD HH:mm:ss",duration:1e3,horizontal:"center",vertical:"center"}},apis:{},apiData:{},events:{},actions:{}},Qe=[K("x",{description:"\u7C7B\u76EE"}),K("y",{description:"\u503C"})],Uo=o=>({type:"line",name:o||"\u7CFB\u5217",lineStyle:{width:2,color:fe[0],type:"solid"},areaStyle:{from:fe[0],to:fe[1],opacity:.8}}),Ro={alias:"\u57FA\u672C\u533A\u57DF\u56FE",icon:"linechart",type:ne.com,attr:{w:500,h:300},config:{color:fe,global:{fontFamily:"Microsoft Yahei",margin:{top:40,bottom:50,left:50,right:10},smooth:!1},label:{show:!1,position:"top",textStyle:{fontSize:12,color:"rgba(255, 255, 255, 0.6)",fontWeight:"normal"},offsetX:0,offsetY:0},legend:{show:!0,position:"top-center",orient:"horizontal",textStyle:{fontSize:12,color:"#90a0ae",fontWeight:"normal"},symbol:{show:!0,icon:"auto",width:25,height:14,gap:10}},xAxis:{show:!0,type:"category",boundaryGap:!0,title:{show:!1,name:"X\u8F74",location:"center",display:{rotate:0,offset:20},textStyle:{fontSize:12,color:"#90a0ae",fontWeight:"normal"}},axisLine:{show:!0,type:"solid",width:1,color:"rgba(255, 255, 255, 0.5)"},axisTick:{show:!0,type:"solid",width:1,color:"rgba(255, 255, 255, 0.5)"},axisLabel:{show:!0,timeFormat:"MM/DD",interval:"auto",display:{rotate:0,margin:10},align:"center",textStyle:{fontSize:12,color:"rgba(255, 255, 255, 0.6)",fontWeight:"normal"}},grid:{show:!1,line:{type:"dashed",width:1,color:"rgba(233, 228, 228, 0.1)",dashedLength:4,dashedSpace:4}}},yAxis:{show:!0,extent:{min:"auto",max:"auto"},splitNumber:0,title:{show:!1,name:"Y\u8F74",location:"end",display:{rotate:0,offset:12},textStyle:{fontSize:12,color:"#90a0ae",fontWeight:"normal"}},axisLine:{show:!1,type:"solid",width:1,color:"rgba(255, 255, 255, 0.5)"},axisTick:{show:!1,type:"solid",width:1,color:"rgba(255, 255, 255, 0.5)"},axisLabel:{show:!0,valueFormat:"auto",boundaryGap:0,display:{rotate:0,margin:10},align:"center",textStyle:{fontSize:12,color:"rgba(255, 255, 255, 0.6)",fontWeight:"normal"}},grid:{show:!0,line:{type:"solid",width:1,color:"rgba(233, 228, 228, 0.1)",dashedLength:4,dashedSpace:4}}},tooltip:{show:!0,textStyle:{fontSize:14,color:"#fff",fontWeight:"normal"},background:{padding:{h:5,v:5},color:"rgba(0, 0, 0, 0.65)"},pointer:{show:!0,line:{type:"dashed",width:1,color:"#f5dc69",dashedLength:4,dashedSpace:4}}},series:[Uo("\u7CFB\u5217\u4E00")]},apis:we({fields:Object.assign({},...Qe),description:"\u57FA\u672C\u7EBF\u56FE\u63A5\u53E3"}),apiData:Se({staticPath:"line/basic-line"}),events:{click:{description:"\u5F53\u70B9\u51FB\u6570\u636E\u9879\u65F6",fields:Object.assign({},...Qe)}},actions:{}},jo={id:"",name:"",alias:"",type:"",locked:!1,hided:!1,attr:{x:0,y:0,w:100,h:100,rotate:0,opacity:1},apiData:{},apis:{},events:{}};function H(o,t){const n=Vt(Bt(jo),t||{});return n.id=`${o}_${$t()}`,n.name=`V${o}`,n.apiData.source&&(n.apiData.source.comId=n.id),n}function et(o){switch(o.substr(1)){case"BasicBar":return H("BasicBar",At);case"HorizontalBar":return H("HorizontalBar",Ht);case"BasicLine":return H("BasicLine",Wt);case"BasicArea":return H("BasicArea",Ro);case"MainTitle":return H("MainTitle",Do);case"NumberTitleFlop":return H("NumberTitleFlop",Lo);case"Timer":return H("Timer",No);case"BgBox":return H("BgBox",Dt);case"BorderBox":return H("BorderBox",zo);case"Decoration":return H("Decoration",To);case"MainImg":return H("MainImg",Et);default:throw Error(`Unknown component type: ${o}.`)}}const Ao={name:"components-panel",setup(){const{toggleCompsPanel:o,pageConfig:t,toolbar:n,addCom:e,onCompSelected:s,selectedCom:l}=N(),r=T(0),i=S(()=>he[r.value].data);return{toolbar:n,toggleCompsPanel:o,activeIndex:r,componentsList:he,comps:i,changeComp:h=>{o(!0),r.value=h},dragStart:(h,C)=>{h.dataTransfer.setData("text",C)},toAddCom:async(h,C)=>{if(C){const g=et(h);if(g.attr.x=Math.floor((t.value.width-g.attr.w)/2),g.attr.y=Math.floor((t.value.height-g.attr.h)/2),await e({component:g}),await s(g),g.apiData.source&&g.apiData.source.type===Ee.static&&g.apiData.source.staticPath){const{data:w}=await He(g.id,g.apiData.source.staticPath);l.value.apiData.source.config.data=JSON.stringify(w)}}else console.log("\u6B63\u5728\u5F00\u53D1\u4E2D\u3002\u3002\u3002")},dragOver:h=>{h.preventDefault(),h.stopPropagation(),h.dataTransfer.dropEffect="none"}}}},Eo={class:"components-panel"},Ho={class:"panel-title"},Wo={class:"components-type"},Oo=["onClick"],Yo={class:"com-tab-title"},Fo={class:"components-list p10"},Po=["title","draggable","onDragstart","onClick"],Xo={class:"comp-item-text"};function qo(o,t,n,e,s,l){const r=v("b-icon"),i=v("b-scrollbar");return p(),_("div",{class:k(["components-panel-wp",{"is-hide":!e.toolbar.components}])},[a("div",Eo,[a("div",Ho,[a("span",{class:"panel-text",onClick:t[0]||(t[0]=c=>e.toggleCompsPanel(!0))},P(e.toolbar.components?"\u5168\u90E8\u7EC4\u4EF6":"\u7EC4\u4EF6"),1),a("i",{class:"b-iconfont b-icon-left comps-action",title:"\u6536\u8D77",onClick:t[1]||(t[1]=c=>e.toggleCompsPanel(!1))})]),a("div",{class:"components-panel-content",onDragover:t[2]||(t[2]=(...c)=>e.dragOver&&e.dragOver(...c))},[a("div",Wo,[m(i,null,{default:y(()=>[(p(!0),_(U,null,X(e.componentsList,(c,d)=>(p(),_("div",{class:k(["components-item",{active:e.activeIndex===d}]),key:d,onClick:f=>e.changeComp(d)},[m(r,{class:"com-tab-icon",name:c.icon,size:"16"},null,8,["name"]),a("span",Yo,P(c.name),1)],10,Oo))),128))]),_:1})]),a("div",Fo,[(p(!0),_(U,null,X(e.comps,(c,d)=>(p(),_("div",{class:"comp-item",key:d,title:c.alias,draggable:c.used,onDragstart:f=>e.dragStart(f,c.name),onClick:f=>e.toAddCom(c.name,c.used)},[a("div",Xo,P(c.alias),1),a("div",{class:"comp-item-img",style:$(`background-image: url(${c.img});`)},null,4)],40,Po))),128))])],32)])],2)}var Ko=I(Ao,[["render",qo]]);const tt=o=>`${o}px`,ot=(o,t,n,e)=>{const s=o!=null?o:document.createElement("canvas");s.width=t*e,s.height=n*e,s.style.width=tt(t),s.style.height=tt(n);const l=s.getContext("2d");return l&&l.setTransform(e,0,0,e,0,0),s};class nt{constructor(t,n){this.el=t,this.options=F({direction:"TB",width:1e3,height:20,bgColor:"#0e1013",fontFamily:"sans-serif",fontSize:"10px",fontColor:"#90a0ae",strokeStyle:"rgba(161, 174, 179, 0.8)",lineWidth:.5,indicatorLineWidth:1,scale:1,offset:40,ratio:2},n),this.canvas=null,this.ctx=null,this.ruler={width:0,height:0},this.constructRuler()}constructRuler(){const{el:t,options:n}=this,{direction:e,width:s,height:l,ratio:r}=n,i=Math.max(e==="TB"?t.offsetWidth:t.offsetHeight,s),c=l;this.ruler.width=i,this.ruler.height=c;const d=ot(null,i,c,r);It(d,"canvas-ruler"),t.appendChild(d),this.canvas=d,this.ctx=d.getContext("2d"),this.drawRuler()}drawRuler(){const{ctx:t,options:n,ruler:e}=this,{width:s,height:l}=e;t.beginPath(),t.fillStyle=n.bgColor,t.fillRect(0,0,s,l),t.closePath(),t.beginPath(),t.font=`${n.fontSize} ${n.fontFamily}`,t.textAlign="left",t.fillStyle=n.fontColor,t.strokeStyle=n.strokeStyle,t.lineWidth=n.lineWidth,this.drawPoints(),t.stroke()}drawPoints(){const{ctx:t,options:n,ruler:e}=this,{width:s,height:l}=e,{offset:r,scale:i}=n,c=0,d=l/1.5,f=l/1.2;for(let u=0;u<=s;u+=1){const h=u-r;if(h<0)continue;let C=-1,g=-1;h%50==0?(C=Math.floor(h/i),g=c):h%25==0?g=d:h%5==0&&(g=f),g>=0&&(t.moveTo(u+.5,l+.5),t.lineTo(u+.5,g),C>-1&&t.fillText(`${C}`,u+2.5,l/1.5))}}setSize(t,n,e){const{el:s,options:l}=this;l.width=t,l.height=n,l.scale=e;const{direction:r,width:i,height:c,ratio:d}=l,f=Math.max(r==="TB"?s.offsetWidth:s.offsetHeight,i),u=c;this.ruler.width=f,this.ruler.height=u,ot(this.canvas,f,u,d),this.drawRuler()}destroy(){const{el:t}=this;t.remove()}}const Go={name:"ruler",setup(){const{canvas:o}=N(),t=T(null),n=T(null),e=T(null),s=T(null),l=T(!0),r=T(0),i=T(0),c=document.documentElement.clientWidth;Ct(()=>{if(t.value&&n.value){const f=Math.max(o.value.width,c);e.value?e.value.setSize(f,20,o.value.scale):e.value=new nt(t.value,{direction:"TB",width:f,scale:o.value.scale}),s.value?s.value.setSize(o.value.height,20,o.value.scale):s.value=new nt(n.value,{direction:"LR",width:o.value.height,scale:o.value.scale})}});const d=f=>{const u=f.target;r.value=u.scrollLeft,i.value=u.scrollTop};return oe(()=>{const f=document.getElementById("canvas-wp");f==null||f.addEventListener("scroll",d)}),Ne(()=>{const f=document.getElementById("canvas-wp");f==null||f.removeEventListener("scroll",d)}),{visible:l,hRulerWpRef:t,vRulerWpRef:n,vScroll:i,hScroll:r}}},Zo=o=>(ie("data-v-d5375d52"),o=o(),ce(),o),Jo={class:"canvas-ruler-wp"},Qo=Zo(()=>a("div",{class:"ruler-corner"},null,-1));function en(o,t,n,e,s,l){return p(),_("div",Jo,[a("div",{ref:"hRulerWpRef",class:"ruler-wrapper h-container",style:$(`transform: translateX(-${e.hScroll}px);`)},null,4),a("div",{ref:"vRulerWpRef",class:"ruler-wrapper v-container",style:$(`transform: rotate(90deg) translateX(-${e.vScroll}px);`)},null,4),Qo])}var tn=I(Go,[["render",en],["__scopeId","data-v-d5375d52"]]);const ae=wt();function at(o){return o*Math.PI/180}function lt(o){return Math.abs(Math.sin(at(o)))}function st(o){return Math.abs(Math.cos(at(o)))}function it(o){if(o=F({},o),o.rotate!==0){const t=o.width*st(o.rotate)+o.height*lt(o.rotate),n=(o.width-t)/2;o.left+=n,o.right=o.left+t;const e=o.height*st(o.rotate)+o.width*lt(o.rotate),s=(e-o.height)/2;o.top-=s,o.bottom=o.top+e,o.width=t,o.height=e}else o.bottom=o.top+o.height,o.right=o.left+o.width;return o}const on=5,nn={name:"mark-line",setup(){const{comps:o,selectedCom:t,canvas:n,setSingleComAttr:e,toolbox:s}=N(),l=T([]),r=T(["xt","xc","xb","yl","yc","yr"]),i=T({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),c=()=>{Object.keys(i.value).forEach(g=>{i.value[g]=!1})},d=(g,w)=>{const x=l.value,V=t.value,D=o.value.filter(Z=>!Z.hided),L=n.value.scale,b=it(h(V.attr)),A=b.width/2,G=b.height/2;c(),D.forEach(Z=>{if(Z.id===V.id)return;const{top:j,left:M,bottom:W,right:Y,width:Me,height:z}=it(h(Z.attr)),le=Me/2,pe=z/2,Ve={top:[{isNearly:C(b.top,j),lineNode:x.xt,line:"xt",dragShift:j,lineShift:j*L+60},{isNearly:C(b.bottom,j),lineNode:x.xt,line:"xt",dragShift:j-b.height,lineShift:j*L+60},{isNearly:C(b.top+G,j+pe),lineNode:x.xc,line:"xc",dragShift:j+pe-G,lineShift:(j+pe)*L+60},{isNearly:C(b.top,W),lineNode:x.xb,line:"xb",dragShift:W,lineShift:W*L+60},{isNearly:C(b.bottom,W),lineNode:x.xb,line:"xb",dragShift:W-b.height,lineShift:W*L+60}],left:[{isNearly:C(b.left,M),lineNode:x.yl,line:"yl",dragShift:M,lineShift:M*L+60},{isNearly:C(b.right,M),lineNode:x.yl,line:"yl",dragShift:M-b.width,lineShift:M*L+60},{isNearly:C(b.left+A,M+le),lineNode:x.yc,line:"yc",dragShift:M+le-A,lineShift:(M+le)*L+60},{isNearly:C(b.left,Y),lineNode:x.yr,line:"yr",dragShift:Y,lineShift:Y*L+60},{isNearly:C(b.right,Y),lineNode:x.yr,line:"yr",dragShift:Y-b.width,lineShift:Y*L+60}]},ve=[],{rotate:ut}=b;Object.keys(Ve).forEach(ue=>{Ve[ue].forEach(ee=>{if(!ee.isNearly)return;const ft=ut!==0?f(ue,ee,b):ee.dragShift;e({key:ue,value:ft}),ee.lineNode.style[ue]=`${ee.lineShift}px`,ve.push(ee.line)})}),ve.length&&u(ve,g,w)})},f=(g,w,x)=>{const{width:V,height:D}=x;return Math.round(g==="top"?w.dragShift-(D-x.height)/2:w.dragShift-(V-x.width)/2)},u=(g,w,x)=>{x?g.includes("yr")?i.value.yr=!0:g.includes("yc")?i.value.yc=!0:g.includes("yl")&&(i.value.yl=!0):g.includes("yl")?i.value.yl=!0:g.includes("yc")?i.value.yc=!0:g.includes("yr")&&(i.value.yr=!0),w?g.includes("xb")?i.value.xb=!0:g.includes("xc")?i.value.xc=!0:g.includes("xt")&&(i.value.xt=!0):g.includes("xt")?i.value.xt=!0:g.includes("xc")?i.value.xc=!0:g.includes("xb")&&(i.value.xb=!0)},h=g=>({left:g.x,top:g.y,width:g.w,height:g.h,rotate:g.rotate}),C=(g,w)=>Math.abs(g-w)<=on;return oe(()=>{ae.on("move",({isDownward:g,isRightward:w})=>{s.value.markLine&&d(g,w)}),ae.on("unmove",()=>{c()})}),xe(()=>{ae.off("move"),ae.off("unmove")}),{lineRefs:l,lines:r,lineStatus:i}}},an={class:"mark-line"};function ln(o,t,n,e,s,l){return p(),_("div",an,[(p(!0),_(U,null,X(e.lines,r=>te((p(),_("div",{key:r,class:k(["line",[r.includes("x")?"xline":"yline",r]]),ref:i=>{e.lineRefs[r]=i}},null,2)),[[Ce,e.lineStatus[r]||!1]])),128))])}var sn=I(nn,[["render",ln],["__scopeId","data-v-0e7539c7"]]);const cn=[{direction:"lt",angle:0},{direction:"t",angle:45},{direction:"rt",angle:90},{direction:"r",angle:135},{direction:"rb",angle:180},{direction:"b",angle:225},{direction:"lb",angle:270},{direction:"l",angle:315}],ct=[{start:338,end:23,cursor:"nwse-resize"},{start:23,end:68,cursor:"ns-resize"},{start:68,end:113,cursor:"nesw-resize"},{start:113,end:158,cursor:"ew-resize"},{start:158,end:203,cursor:"nwse-resize"},{start:203,end:248,cursor:"ns-resize"},{start:248,end:293,cursor:"nesw-resize"},{start:293,end:338,cursor:"ew-resize"}],rn=o=>{const t=(o+360)%360,n={};let e=-1;return cn.forEach(s=>{const l=(s.angle+t)%360,r=ct.length,i=0;for(;i<r;){e=(e+1)%r;const c=ct[e];if(l<23||l>=338){n[s.direction]="nwse-resize";break}if(c.start<=l&&l<c.end){n[s.direction]=c.cursor;break}}}),n};function dn(o,t,n,e,s,l){o==="t"?(l.h=Math.round(t.h+(n.y-e.y)/s),l.y=Math.round(t.y+(e.y-n.y)/s),l.h=Math.max(l.h,20)):o==="rt"?(l.h=Math.round(t.h+(n.y-e.y)/s),l.w=Math.round(t.w+(e.x-n.x)/s),l.y=Math.round(t.y+(e.y-n.y)/s),l.w=Math.max(l.w,20),l.h=Math.max(l.h,20)):o==="r"?(l.w=Math.round(t.w+(e.x-n.x)/s),l.w=Math.max(l.w,20)):o==="rb"?(l.h=Math.round(t.h+(e.y-n.y)/s),l.w=Math.round(t.w+(e.x-n.x)/s),l.w=Math.max(l.w,20),l.h=Math.max(l.h,20)):o==="b"?(l.h=Math.round(t.h+(e.y-n.y)/s),l.h=Math.max(l.h,20)):o==="lb"?(l.h=Math.round(t.h+(e.y-n.y)/s),l.w=Math.round(t.w+(n.x-e.x)/s),l.x=Math.round(t.x+(e.x-n.x)/s),l.w=Math.max(l.w,20),l.h=Math.max(l.h,20)):o==="l"?(l.w=Math.round(t.w+(n.x-e.x)/s),l.x=Math.round(t.x+(e.x-n.x)/s),l.w=Math.max(l.w,20)):o==="lt"&&(l.h=Math.round(t.h+(n.y-e.y)/s),l.w=Math.round(t.w+(n.x-e.x)/s),l.x=Math.round(t.x+(e.x-n.x)/s),l.y=Math.round(t.y+(e.y-n.y)/s),l.w=Math.max(l.w,20),l.h=Math.max(l.h,20))}const rt=(o,t,n,e,s)=>{const l=F({},n.attr),r=Object.create(null),i=o.clientX,c=o.clientY,d=u=>{const h=u.clientX,C=u.clientY;t?dn(t,l,{x:i,y:c},{x:h,y:C},e,r):(r.x=l.x+Math.round((h-i)/e/s)*s,r.y=l.y+Math.round((C-c)/e/s)*s),n.attr=F(F({},n.attr),r),be().then(()=>{ae.emit("move",{isDownward:C-c>0,isRightward:h-i>0})})},f=()=>{ae.emit("unmove"),Q(document,"mousemove",d),Q(document,"mouseup",f)};J(document,"mousemove",d),J(document,"mouseup",f)},mn=(o,t,n,e)=>{rt(o,null,t,n,e)},un=(o,t,n,e)=>{rt(o,t,n,e)},fn=(o,t,n)=>{const e=t.getBoundingClientRect(),s=e.left+e.width/2,l=e.top+e.height/2,r=Math.atan2(l-o.clientY,s-o.clientX)*180/Math.PI-n.attr.rotate,i=d=>{const f=Math.atan2(l-d.clientY,s-d.clientX)*180/Math.PI-r,u=Math.round(f%360);n.attr.rotate=u<0?u+360:u},c=()=>{Q(document,"mousemove",i),Q(document,"mouseup",c)};J(document,"mousemove",i),J(document,"mouseup",c)},hn={name:"refer-line",props:{attr:{type:Object,required:!0},scale:{type:Number,required:!0}},setup(o){const t=S(()=>({height:`${o.attr.y+60/o.scale}px`,borderLeftWidth:`${.9/o.scale}px`})),n=S(()=>({width:`${o.attr.x+60/o.scale}px`,borderTopWidth:`${.9/o.scale}px`})),e=S(()=>({fontSize:`${12/o.scale}px`,top:`-${6/o.scale}px`,left:`-${6/o.scale}px`}));return{topLineStyle:t,leftLineStyle:n,accountStyle:e}}},gn={class:"nav-line"};function pn(o,t,n,e,s,l){return p(),_("div",gn,[a("div",{class:"nav-line-top",style:$(e.topLineStyle)},null,4),a("div",{class:"nav-line-left",style:$(e.leftLineStyle)},null,4),a("div",{class:"nav-line-account",style:$(e.accountStyle)},P(n.attr.x)+", "+P(n.attr.y),5)])}var vn=I(hn,[["render",pn]]);const _n={name:"dv-transform",components:{ReferLine:vn},props:{data:{type:Object,required:!0}},setup(o,t){const n=St(),{canvas:e,comps:s,pageConfig:l,selectedCom:r,hoveredCom:i,onCompHovered:c,onCompSelected:d,toolbox:f}=N(),{showMenu:u}=ke(),h=S(()=>i.value===o.data.id),C=S(()=>!Lt(r.value)&&r.value.id===o.data.id),g=S(()=>({locked:o.data.locked,selected:C.value})),w=S(()=>({top:0,left:0,width:`${o.data.attr.w}px`,height:`${o.data.attr.h}px`,transform:`translate(${o.data.attr.x}px, ${o.data.attr.y}px)`})),x=S(()=>({"is-hide":!C.value||o.data.locked})),V=S(()=>({cursor:"move",transform:`rotate(${o.data.attr.rotate}deg)`})),D=S(()=>({width:`${o.data.attr.w}px`,height:`${o.data.attr.h}px`})),L=S(()=>({display:o.data.hided?"none":"block"})),b=S(()=>rn(o.data.attr.rotate)),A=S(()=>e.value.scale),G=S(()=>{const z=`scale(${1/A.value}, ${1/A.value})`;return{t:{name:"top",style:{cursor:b.value.t,transform:z}},rt:{name:"top-right",style:{cursor:b.value.rt},rotateStyle:{"transform-origin":"25% 75%",transform:z}},r:{name:"right",style:{cursor:b.value.r,transform:z}},rb:{name:"bottom-right",style:{cursor:b.value.rb},rotateStyle:{"transform-origin":"25% 25%",transform:z}},b:{name:"bottom",style:{cursor:b.value.b,transform:z}},lb:{name:"bottom-left",style:{cursor:b.value.lb},rotateStyle:{"transform-origin":"75% 25%",transform:z}},l:{name:"left",style:{cursor:b.value.l,transform:z}},lt:{name:"top-left",style:{cursor:b.value.lt},rotateStyle:{"transform-origin":"75% 75%",transform:z}}}}),Z=()=>{c(o.data.id)},j=()=>{c("")},M=()=>{C.value||d(o.data)};return{comps:s,selectedCom:r,hoveredCom:i,toolbox:f,isHovered:h,isSelected:C,hideStyle:L,transformClass:g,transformStyle:w,handlerClass:x,handlerStyle:V,wrapperStyle:D,onEnter:Z,onLeave:j,onMove:z=>{M(),mn(z,o.data,A.value,l.value.grid)},onZoom:(z,le)=>{M(),un(z,le,o.data,A.value)},onRotate:z=>{fn(z,n.vnode.el,o.data)},points:G,scale:A,showMenu:u}}},bn={class:"dv-com"},yn=["onMousedown"],xn=["onMousedown"],Cn=a("div",{class:"transform-bg"},null,-1);function wn(o,t,n,e,s,l){const r=v("refer-line");return p(),_("div",{class:k(["dv-transform",e.transformClass]),style:$(e.transformStyle)},[e.toolbox.referLine&&e.isSelected?(p(),O(r,{key:0,attr:n.data.attr,scale:e.scale},null,8,["attr","scale"])):se("",!0),a("div",{class:k(["dv-scale",{hovered:e.isHovered}]),style:$(e.hideStyle),onMouseenter:t[2]||(t[2]=(...i)=>e.onEnter&&e.onEnter(...i)),onMouseleave:t[3]||(t[3]=(...i)=>e.onLeave&&e.onLeave(...i)),onMousedown:t[4]||(t[4]=re((...i)=>e.onMove&&e.onMove(...i),["prevent","stop"]))},[a("div",{class:k(["transform-handler",e.handlerClass]),style:$(e.handlerStyle)},[a("div",bn,[Ue(o.$slots,"default"),a("div",{class:"dv-event-disable",style:$(e.wrapperStyle),onContextmenu:t[0]||(t[0]=(...i)=>e.showMenu&&e.showMenu(...i))},null,36)]),(p(!0),_(U,null,X(e.points,(i,c)=>(p(),_(U,{key:c},[i.rotateStyle?(p(),_("i",{key:0,class:k(`${i.name}-handler`),"data-html2canvas-ignore":""},[a("span",{class:"rotate-handler",style:$(i.rotateStyle),onMousedown:t[1]||(t[1]=re((...d)=>e.onRotate&&e.onRotate(...d),["prevent","stop"]))},[a("span",{class:"control-point",style:$(i.style),onMousedown:re(d=>e.onZoom(d,c),["prevent","stop"])},null,44,yn)],36)],2)):(p(),_("i",{key:1,class:k(`${i.name}-handler`),"data-html2canvas-ignore":""},[a("span",{class:"control-point",style:$(i.style),onMousedown:re(d=>e.onZoom(d,c),["prevent","stop"])},null,44,xn)],2))],64))),128)),Cn],6)],38)],6)}var Sn=I(_n,[["render",wn]]);const kn={name:"canvas-main",components:{MarkLine:sn,DvTransform:Sn,Ruler:tn},setup(){const{canvas:o,pageConfig:t,autoCanvasScale:n,comps:e,onCompSelected:s,getPanelOffsetLeft:l,getPanelOffsetTop:r,selectedCom:i,addCom:c,toolbox:d}=N(),f=S(()=>({width:`${o.value.width}px`,height:`${o.value.height}px`})),u=S(()=>({position:"absolute",width:`${t.value.width}px`,height:`${t.value.height}px`,transform:`scale(${o.value.scale}) translate(0px, 0px)`,backgroundImage:`url(${t.value.bgImage})`,backgroundColor:t.value.bgColor})),h=Tt(n,200),C=async x=>{x.preventDefault();try{const V=x.dataTransfer.getData("text");if(V){const D=et(V),{scale:L}=o.value,b=(x.clientX-l.value)/L,A=(x.clientY-r.value)/L;if(D.attr.x=Math.round(b-D.attr.w/2),D.attr.y=Math.round(A-D.attr.h/2),await c({component:D}),await s(D),D.apiData.source&&D.apiData.source.type===Ee.static&&D.apiData.source.staticPath){const{data:G}=await He(D.id,D.apiData.source.staticPath);i.value.apiData.source.config.data=JSON.stringify(G)}}}catch(V){console.warn(V)}},g=()=>{s()},w=x=>{x.preventDefault(),x.stopPropagation(),x.dataTransfer.dropEffect="copy"};return oe(()=>{J(window,"resize",h),h()}),xe(()=>{Q(window,"resize",h)}),{screenShotStyle:f,canvasPanelStyle:u,comps:e,toolbox:d,cancelSelectCom:g,dropToAddCom:C,dragOver:w}}},Mn={class:"canvas-main"};function Vn(o,t,n,e,s,l){const r=v("mark-line"),i=v("ruler"),c=v("dv-transform");return p(),_("div",Mn,[a("div",{id:"canvas-wp",class:"canvas-panel-wrap",onMousedown:t[2]||(t[2]=re((...d)=>e.cancelSelectCom&&e.cancelSelectCom(...d),["stop"]))},[a("div",{class:"screen-shot",style:$(e.screenShotStyle)},[e.toolbox.markLine?(p(),O(r,{key:0,style:$(e.screenShotStyle)},null,8,["style"])):se("",!0),m(i),a("div",{id:"canvas-components",class:"canvas-panel",style:$(e.canvasPanelStyle),onDragover:t[0]||(t[0]=(...d)=>e.dragOver&&e.dragOver(...d)),onDrop:t[1]||(t[1]=(...d)=>e.dropToAddCom&&e.dropToAddCom(...d))},[(p(!0),_(U,null,X(e.comps,d=>(p(),O(c,{key:d.id,data:d},{default:y(()=>[(p(),O(Re(d.name),{data:d,style:$({transform:"translateZ(0px)",opacity:d.attr.opacity})},null,8,["data","style"]))]),_:2},1032,["data"]))),128))],36)],4)],32)])}var Bn=I(kn,[["render",Vn]]);const $n={name:"page-config",setup(){const{pageConfig:o,autoCanvasScale:t}=N();return{onSizeChange:async()=>{await t()},resetBGImage:()=>{o.value.bgColor="#0d2a42",o.value.bgImage=Nt("bg.png")},backgroundImages:zt,pageConfig:o}}},Dn=o=>(ie("data-v-2b18d640"),o=o(),ce(),o),In={class:"page-config-panel"},Ln=Dn(()=>a("div",{class:"page-config-top"},"\u9875\u9762\u8BBE\u7F6E",-1)),Tn={class:"page-config-content"},zn={class:"page-config-wp"},Nn=B("\u6062\u590D\u9ED8\u8BA4\u80CC\u666F"),Un={class:"page-config-wp"};function Rn(o,t,n,e,s,l){const r=v("g-input-number"),i=v("g-field"),c=v("g-color-picker"),d=v("g-upload-img"),f=v("g-images-select"),u=v("b-button");return p(),_("div",In,[Ln,a("div",Tn,[a("div",zn,[m(i,{label:"\u5C4F\u5E55\u5927\u5C0F",flat:""},{default:y(()=>[m(r,{modelValue:e.pageConfig.width,"onUpdate:modelValue":t[0]||(t[0]=h=>e.pageConfig.width=h),label:"\u5BBD\u5EA6",min:1e3,max:3840,inline:"",suffix:"px",onChange:e.onSizeChange},null,8,["modelValue","onChange"]),m(r,{modelValue:e.pageConfig.height,"onUpdate:modelValue":t[1]||(t[1]=h=>e.pageConfig.height=h),label:"\u9AD8\u5EA6",min:600,max:2160,inline:"",suffix:"px",onChange:e.onSizeChange},null,8,["modelValue","onChange"])]),_:1}),m(i,{label:"\u80CC\u666F\u989C\u8272"},{default:y(()=>[m(c,{modelValue:e.pageConfig.bgColor,"onUpdate:modelValue":t[2]||(t[2]=h=>e.pageConfig.bgColor=h)},null,8,["modelValue"])]),_:1}),m(i,{label:"\u80CC\u666F\u56FE",tooltip:"\u652F\u6301\u56FE\u7247\u5730\u5740\u3001\u9759\u6001\u8DEF\u5F84\u3001base64\u5B58\u50A8"},{default:y(()=>[m(d,{modelValue:e.pageConfig.bgImage,"onUpdate:modelValue":t[3]||(t[3]=h=>e.pageConfig.bgImage=h)},null,8,["modelValue"])]),_:1}),m(i,{label:"\u80CC\u666F\u9884\u8BBE",tooltip:"\u53EF\u4EE5\u52A0\u8F7D\u5BF9\u5E94\u9884\u8BBE\u7684\u56FE\u7247\u80CC\u666F"},{default:y(()=>[m(f,{modelValue:e.pageConfig.bgImage,"onUpdate:modelValue":t[4]||(t[4]=h=>e.pageConfig.bgImage=h),images:e.backgroundImages,"value-key":"src"},null,8,["modelValue","images"])]),_:1}),m(i,{label:"\u91CD\u7F6E"},{default:y(()=>[m(u,{type:"primary",size:"small",onClick:e.resetBGImage},{default:y(()=>[Nn]),_:1},8,["onClick"])]),_:1})]),a("div",Un,[m(i,{label:"\u6805\u683C\u95F4\u8DDD",tooltip:"\u6BCF\u6B21\u79FB\u52A8\u7684\u8DDD\u79BB\uFF0C\u5355\u4F4Dpx"},{default:y(()=>[m(r,{modelValue:e.pageConfig.grid,"onUpdate:modelValue":t[5]||(t[5]=h=>e.pageConfig.grid=h),min:1,max:20,suffix:"px"},null,8,["modelValue"])]),_:1})])])])}var jn=I($n,[["render",Rn],["__scopeId","data-v-2b18d640"]]);const An={name:"config-title",props:{comName:{type:String,required:!0},comAlias:{type:String,required:!0}},setup(o){const t=S(()=>{const e=Bo(o.comName);return e==null?void 0:e.com.name});return{toSearch:()=>{window.open("https://echarts.apache.org/zh/option.html#title","_blank")},comTitle:t}}},dt=o=>(ie("data-v-5bc1a558"),o=o(),ce(),o),En={class:"com-title-wp"},Hn={class:"com-title"},Wn={class:"title-name"},On={class:"alias-name"},Yn={class:"version-tag"},Fn=dt(()=>a("i",{class:"b-iconfont b-icon-search"},null,-1)),Pn=dt(()=>a("span",null,"\u641C\u7D22\u914D\u7F6E",-1)),Xn=[Fn,Pn];function qn(o,t,n,e,s,l){return p(),_("div",En,[a("div",Hn,[a("div",Wn,[a("span",On,P(n.comAlias),1)]),a("div",Yn,[a("span",null,P(e.comTitle),1)])]),Ue(o.$slots,"default",{},()=>[a("div",{class:"search-config",onClick:t[0]||(t[0]=(...r)=>e.toSearch&&e.toSearch(...r)),title:"echarts option config"},Xn)],!0)])}var mt=I(An,[["render",qn],["__scopeId","data-v-5bc1a558"]]);const Kn={name:"data-center-panel",components:{ConfigTitle:mt,SourcePanel:Ut(()=>Rt(()=>import("./source-panel-1e2096b5.js"),["static/js/source-panel-1e2096b5.js","static/css/source-panel-8438f192.css","static/js/index-20325587.js","static/css/index-74cdb240.css","static/js/vendor-cf8cb8a4.js","static/js/chunk-brace-7fd40d4c.js","static/js/chunk-bin-ui-next-406e974a.js","static/css/chunk-bin-ui-next-d2edf0dc.css","static/js/useSchemaStore-5d048447.js","static/js/database.api-4a38f059.js","static/js/field-type-icon-f89bd422.js","static/css/field-type-icon-d3ae34ac.css"]))},setup(){const{selectedCom:o}=N(),t=S(()=>Object.keys(o.value.apis));return{com:o,dataKeys:t}}},Gn={class:"data-center-panel"},Zn={class:"scroll-container"},Jn={key:1,style:{"min-height":"300px"},flex:"main:center cross:center"},Qn=B("\u8BE5\u7EC4\u4EF6\u4E0D\u9700\u8981\u914D\u7F6E\u6570\u636E");function ea(o,t,n,e,s,l){const r=v("config-title"),i=v("source-panel"),c=v("b-empty"),d=v("b-scrollbar");return p(),_("div",Gn,[m(r,{"com-name":e.com.name,"com-alias":e.com.alias},null,8,["com-name","com-alias"]),a("div",Zn,[m(d,{native:""},{default:y(()=>[(p(!0),_(U,null,X(e.dataKeys,f=>(p(),O(i,{key:f,"api-name":f,"active-name":e.dataKeys[0],collapse:e.dataKeys.length>1},null,8,["api-name","active-name","collapse"]))),128)),e.dataKeys.length>0?(p(),_(U,{key:0},[],64)):(p(),_("div",Jn,[m(c,null,{default:y(()=>[Qn]),_:1})]))]),_:1})])])}var ta=I(Kn,[["render",ea]]);const oa={name:"basic-setting",props:{attr:{type:Object,required:!0}}},na={class:"basic-setting-wp"},aa={style:{width:"50%"}},la=B("\u91CD\u7F6E\u65CB\u8F6C");function sa(o,t,n,e,s,l){const r=v("g-input-number"),i=v("g-field"),c=v("b-button"),d=v("g-slider");return p(),_("div",na,[m(i,{label:"\u56FE\u8868\u5C3A\u5BF8",flat:""},{default:y(()=>[m(r,{modelValue:n.attr.w,"onUpdate:modelValue":t[0]||(t[0]=f=>n.attr.w=f),label:"\u5BBD\u5EA6",min:10,max:4e3,inline:"",suffix:"px"},null,8,["modelValue"]),m(r,{modelValue:n.attr.h,"onUpdate:modelValue":t[1]||(t[1]=f=>n.attr.h=f),label:"\u9AD8\u5EA6",min:10,max:4e3,inline:"",suffix:"px"},null,8,["modelValue"])]),_:1}),m(i,{label:"\u56FE\u8868\u4F4D\u7F6E",flat:""},{default:y(()=>[m(r,{modelValue:n.attr.x,"onUpdate:modelValue":t[2]||(t[2]=f=>n.attr.x=f),label:"offsetX",inline:"",suffix:"px"},null,8,["modelValue"]),m(r,{modelValue:n.attr.y,"onUpdate:modelValue":t[3]||(t[3]=f=>n.attr.y=f),label:"offsetY",inline:"",suffix:"px"},null,8,["modelValue"])]),_:1}),m(i,{label:"\u65CB\u8F6C\u89D2\u5EA6",flat:""},{default:y(()=>[m(r,{modelValue:n.attr.rotate,"onUpdate:modelValue":t[4]||(t[4]=f=>n.attr.rotate=f),min:0,max:360,step:1,inline:""},null,8,["modelValue"]),a("div",aa,[m(c,{size:"small",onClick:t[5]||(t[5]=f=>n.attr.rotate=0)},{default:y(()=>[la]),_:1})])]),_:1}),m(i,{label:"\u900F\u660E\u5EA6"},{default:y(()=>[m(d,{modelValue:n.attr.opacity,"onUpdate:modelValue":t[6]||(t[6]=f=>n.attr.opacity=f),min:0,max:1,step:.05},null,8,["modelValue","step"])]),_:1})])}var ia=I(oa,[["render",sa]]);const ca={name:"setting-panel",components:{BasicSetting:ia,ConfigTitle:mt},setup(){const{selectedCom:o}=N();return{selectedCom:o}}},ra={class:"setting-panel"},da={class:"setting-panel-content"},ma={class:"scroll-container"};function ua(o,t,n,e,s,l){const r=v("config-title"),i=v("basic-setting"),c=v("b-scrollbar");return p(),_("div",ra,[m(r,{"com-name":e.selectedCom.name,"com-alias":e.selectedCom.alias},null,8,["com-name","com-alias"]),a("div",da,[a("div",ma,[m(c,null,{default:y(()=>[m(i,{key:`${e.selectedCom.id}'_basic-setting`,attr:e.selectedCom.attr},null,8,["attr"]),(p(),O(Re(e.selectedCom.name+"Config"),{key:e.selectedCom.id,data:e.selectedCom},null,8,["data"]))]),_:1})])])])}var fa=I(ca,[["render",ua]]);const ha={name:"config-panel",components:{SettingPanel:fa,DataCenterPanel:ta,PageConfig:jn},setup(){const{toolbar:o,selectedCom:t,toggleConfigPanel:n}=N(),e=T(0);return{toolbar:o,selectedCom:t,toggleConfigPanel:n,curTabIndex:e,changeTab:l=>{if(l===2){de.warning("\u6682\u672A\u5F00\u653E!");return}e.value!==l&&(e.value=l)}}}},ga={class:"config-panel"},pa={key:1,class:"page-config-panel"},va={class:"page-config-top"},_a={class:"tabs-wrapper"},ba={class:"page-config-content"},ya={style:{height:"100%"}},xa={style:{height:"100%"}};function Ca(o,t,n,e,s,l){const r=v("page-config"),i=v("b-icon"),c=v("b-tooltip"),d=v("setting-panel"),f=v("data-center-panel");return p(),_("div",{class:k(["config-panel-wp",{"is-hide":!e.toolbar.config}])},[a("div",ga,[e.selectedCom?(p(),_("div",pa,[a("div",va,[a("div",_a,[a("div",{class:k(["tab-item",{active:e.curTabIndex===0}]),onClick:t[0]||(t[0]=u=>e.changeTab(0))},[m(c,{content:"\u914D\u7F6E"},{default:y(()=>[m(i,{name:"control",size:"20"})]),_:1})],2),a("div",{class:k(["tab-item",{active:e.curTabIndex===1}]),onClick:t[1]||(t[1]=u=>e.changeTab(1))},[m(c,{content:"\u6570\u636E"},{default:y(()=>[m(i,{name:"cloud-server",size:"22"})]),_:1})],2),a("div",{class:k(["tab-item",{active:e.curTabIndex===2}]),onClick:t[2]||(t[2]=u=>e.changeTab(2))},[m(c,{content:"\u4EA4\u4E92"},{default:y(()=>[m(i,{name:"deploymentunit",size:"18"})]),_:1})],2)])]),a("div",ba,[te(a("div",ya,[m(d,{key:e.selectedCom.id})],512),[[Ce,e.curTabIndex===0]]),te(a("div",xa,[m(f,{key:e.selectedCom.id})],512),[[Ce,e.curTabIndex===1]])])])):(p(),O(r,{key:0}))])],2)}var wa=I(ha,[["render",Ca]]);const Sa={name:"toolbox-panel",setup(){const{store:o,toolbar:t,toolbox:n}=N();return{toolbar:t,toolbox:n,clearCanvas:()=>{je.confirm({type:"error",title:"\u786E\u8BA4\u6E05\u7A7A\u753B\u5E03\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"}).then(()=>{o.dispatch("schema/clearScreen")}).catch(()=>{})}}}},ka={class:"toolbox-panel",flex:"main:justify"},Ma={style:{width:"500px"},flex:""},Va={class:"btn-box"},Ba=B("\u53C2\u8003\u7EBF\xA0\xA0 "),$a={class:"btn-box"},Da=B("\u5BF9\u9F50\u7EBF\xA0\xA0 "),Ia={class:"ctrl-box"},La=B("\xA0\xA0 "),Ta=B("\u6E05\u7A7A\u753B\u5E03");function za(o,t,n,e,s,l){const r=v("b-switch"),i=v("b-button");return p(),_("div",{class:k(["toolbox-panel-wp",{"is-hide":!e.toolbar.toolbox}])},[a("div",ka,[a("div",Ma,[a("div",Va,[Ba,m(r,{modelValue:e.toolbox.referLine,"onUpdate:modelValue":t[0]||(t[0]=c=>e.toolbox.referLine=c),size:"small"},null,8,["modelValue"])]),a("div",$a,[Da,m(r,{modelValue:e.toolbox.markLine,"onUpdate:modelValue":t[1]||(t[1]=c=>e.toolbox.markLine=c),size:"small"},null,8,["modelValue"])])]),a("div",Ia,[La,m(i,{size:"mini",icon:"clear",onClick:e.clearCanvas},{default:y(()=>[Ta]),_:1},8,["onClick"])])])],2)}var Na=I(Sa,[["render",za]]);const Ua={name:"footer-panel",setup(){const{canvas:o,autoCanvasScale:t,setCanvasScale:n,toggleLayerPanel:e,toggleCompsPanel:s,toggleConfigPanel:l,pageInfo:r,saveScreenData:i}=N(),c=Le(),d=T([150,100,75,50]),f=T(20),u=T(20),h=async w=>{w===-1?await t():await n(w===0?f.value:w)};_e(()=>o.value.scale,w=>{const x=parseInt((w*100).toFixed(2));u.value=x,f.value=x});const C=w=>{const x=w.target;if(!["input","textarea"].includes(x.tagName.toLowerCase())&&w.ctrlKey){const V=w.key.toLowerCase();V==="arrowleft"?e():V==="arrowup"?s():V==="arrowright"?l():V==="a"?t():V==="d"?h(100):V==="s"&&g(),w.preventDefault()}},g=async()=>{const w=r.value.id,{data:x}=await i();if(!w){let V=c.resolve({path:"/schema/screen",query:{id:x.pageInfo.id}});window.location.replace(V.href)}de.success({message:"\u4FDD\u5B58\u6210\u529F\uFF01",showClose:!0})};return oe(()=>{document.addEventListener("keydown",C,!1)}),Ne(()=>{document.removeEventListener("keydown",C,!1)}),{scaleList:d,inputScale:f,scale:u,submitScale:h}}},ge=o=>(ie("data-v-ab1454a8"),o=o(),ce(),o),Ra={class:"footer-panel"},ja=ge(()=>a("i",{class:"b-iconfont b-icon-codelibrary",style:{"font-size":"18px"}},null,-1)),Aa=ge(()=>a("div",{class:"shortcut-wp"},[a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5F00\u5173\u56FE\u5C42\u9762\u677F"),a("div",{class:"shortcut-value"},"Ctrl/Cmd + \u2190")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5207\u6362\u7EC4\u4EF6\u9762\u677F"),a("div",{class:"shortcut-value"},"Ctrl/Cmd + \u2191")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5207\u6362\u53F3\u4FA7\u9762\u677F"),a("div",{class:"shortcut-value"},"Ctrl/Cmd + \u2192")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u753B\u5E03\u7F29\u653E\u5230\u6700\u4F73\u4F4D\u7F6E"),a("div",{class:"shortcut-value"},"Ctrl/Cmd + a")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u753B\u5E03\u7F29\u653E\u4E3A100%"),a("div",{class:"shortcut-value"},"Ctrl/Cmd + d")])],-1)),Ea={class:"scale-input-wp"},Ha=ge(()=>a("span",{class:"percent"},"%",-1)),Wa=ge(()=>a("i",{class:"b-iconfont b-icon-down"},null,-1)),Oa=B("\u81EA\u9002\u5E94"),Ya={class:"scale-slider-wp"};function Fa(o,t,n,e,s,l){const r=v("b-popover"),i=v("b-dropdown-item"),c=v("b-dropdown-menu"),d=v("b-dropdown"),f=v("b-slider");return p(),_("div",Ra,[m(r,{width:"235",placement:"top",trigger:"hover","popper-class":"editor-popover","show-arrow":!1},{content:y(()=>[Aa]),default:y(()=>[ja]),_:1}),m(d,{trigger:"click",onCommand:e.submitScale},{dropdown:y(()=>[m(c,null,{default:y(()=>[(p(!0),_(U,null,X(e.scaleList,u=>(p(),O(i,{key:u,name:u},{default:y(()=>[B(P(`${u}%`),1)]),_:2},1032,["name"]))),128)),m(i,{name:-1},{default:y(()=>[Oa]),_:1})]),_:1})]),default:y(()=>[a("div",Ea,[te(a("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>e.inputScale=u),type:"number",class:"scale-input",onKeydown:t[1]||(t[1]=ze(u=>e.submitScale(0),["enter"]))},null,544),[[ye,e.inputScale]]),Ha,Wa])]),_:1},8,["onCommand"]),a("div",Ya,[m(f,{modelValue:e.scale,"onUpdate:modelValue":t[2]||(t[2]=u=>e.scale=u),min:10,max:150,step:5,"show-tooltip":!1,onChange:e.submitScale},null,8,["modelValue","onChange"])])])}var Pa=I(Ua,[["render",Fa],["__scopeId","data-v-ab1454a8"]]);const Xa={name:"context-menu",setup(){const{onCompMoved:o,deleteCom:t,copyCom:n}=N(),{contextMenu:e,selectedCom:s,isLocked:l,isHided:r,contextMenuStyle:i,renamingCom:c}=ke(),d=b=>{s.value&&o(s.value.id,b)},f=()=>d(q.up),u=()=>d(q.down),h=()=>d(q.top),C=()=>d(q.bottom),g=()=>{s.value&&(s.value.locked=!s.value.locked)},w=()=>{s.value&&(s.value.hided=!s.value.hided)},x=()=>{const b=s.value;b&&je.confirm({type:"error",title:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u76841\u4E2A\u7EC4\u4EF6"}).then(()=>{t(b.id)}).catch(()=>{})},V=()=>{const b=s.value;b&&c(b.id)},D=()=>{const b=s.value;b&&n(b.id)},L=b=>b.preventDefault();return oe(()=>{J(document,"contextmenu",L)}),xe(()=>{Q(document,"contextmenu",L)}),{contextMenu:e,contextMenuStyle:i,isLocked:l,isHided:r,moveUp:f,moveDown:u,moveTop:h,moveBottom:C,toDeleteCom:x,renameCom:V,toCopyCom:D,lockCom:g,hideCom:w}}},R=o=>(ie("data-v-4f88cc77"),o=o(),ce(),o),qa=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-vertical-align-botto",style:{transform:"rotate(180deg)"}},null,-1)),Ka=B("\u7F6E\u9876 "),Ga=[qa,Ka],Za=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-vertical-align-botto"},null,-1)),Ja=B("\u7F6E\u5E95 "),Qa=[Za,Ja],el=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-arrowup"},null,-1)),tl=B("\u4E0A\u79FB\u4E00\u5C42 "),ol=[el,tl],nl=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-arrowdown"},null,-1)),al=B("\u4E0B\u79FB\u4E00\u5C42 "),ll=[nl,al],sl=R(()=>a("div",{class:"context-menu-divider"},null,-1)),il=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-unlock"},null,-1)),cl=B("\u89E3\u9501 "),rl=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-lock"},null,-1)),dl=B("\u9501\u5B9A "),ml=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-eye"},null,-1)),ul=B("\u663E\u793A "),fl=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-eye-close"},null,-1)),hl=B("\u9690\u85CF "),gl=R(()=>a("div",{class:"context-menu-divider"},null,-1)),pl=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-edit"},null,-1)),vl=B("\u91CD\u547D\u540D "),_l=[pl,vl],bl=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-file-copy"},null,-1)),yl=B("\u590D\u5236 "),xl=[bl,yl],Cl=R(()=>a("i",{class:"menu-icon b-iconfont b-icon-delete"},null,-1)),wl=B("\u5220\u9664 "),Sl=[Cl,wl];function kl(o,t,n,e,s,l){return p(),O(kt,{name:"zoom-in-top"},{default:y(()=>[e.contextMenu.show?(p(),_("div",{key:0,class:"context-menu-wrap",style:$(e.contextMenuStyle)},[a("div",{class:"context-menu-item",onClick:t[0]||(t[0]=(...r)=>e.moveTop&&e.moveTop(...r))},Ga),a("div",{class:"context-menu-item",onClick:t[1]||(t[1]=(...r)=>e.moveBottom&&e.moveBottom(...r))},Qa),a("div",{class:"context-menu-item",onClick:t[2]||(t[2]=(...r)=>e.moveUp&&e.moveUp(...r))},ol),a("div",{class:"context-menu-item",onClick:t[3]||(t[3]=(...r)=>e.moveDown&&e.moveDown(...r))},ll),sl,a("div",{class:"context-menu-item",onClick:t[4]||(t[4]=(...r)=>e.lockCom&&e.lockCom(...r))},[e.isLocked?(p(),_(U,{key:0},[il,cl],64)):(p(),_(U,{key:1},[rl,dl],64))]),a("div",{class:"context-menu-item",onClick:t[5]||(t[5]=(...r)=>e.hideCom&&e.hideCom(...r))},[e.isHided?(p(),_(U,{key:0},[ml,ul],64)):(p(),_(U,{key:1},[fl,hl],64))]),gl,a("div",{class:"context-menu-item",onClick:t[6]||(t[6]=(...r)=>e.renameCom&&e.renameCom(...r))},_l),a("div",{class:"context-menu-item",onClick:t[7]||(t[7]=(...r)=>e.toCopyCom&&e.toCopyCom(...r))},xl),a("div",{class:"context-menu-item",onClick:t[8]||(t[8]=(...r)=>e.toDeleteCom&&e.toDeleteCom(...r))},Sl)],4)):se("",!0)]),_:1})}var Ml=I(Xa,[["render",kl],["__scopeId","data-v-4f88cc77"]]);function Vl(){const o=Te(),{loadScreenData:t}=N(),n=T(!1),e=async s=>{try{n.value=!0;const l=await Ot(s);l.data&&(await t(l.data),await be(),document.title=l.data.pageInfo.name)}catch(l){console.log(l)}n.value=!1};return _e(()=>o.path,async()=>{const{id:s}=o.query;s&&await e(s)},{immediate:!0}),{loading:n}}const Bl={name:"ScreenEditor",components:{ContextMenu:Ml,FooterPanel:Pa,ToolboxPanel:Na,CanvasMain:Bn,ConfigPanel:wa,ComponentsPanel:Ko,LayerPanel:Vo,HeaderBar:mo,SvgLoading:bt},setup(){const o=Vl();return oe(()=>{jt("data-schema","screen-editor")}),F({},o)}},$l={class:"schema-screen-container"},Dl={key:0,flex:"main:center cross:center",class:"full-wrapper"},Il={key:1,class:"editor-main-wrapper"},Ll={class:"edit-main-wp"};function Tl(o,t,n,e,s,l){const r=v("header-bar"),i=v("svg-loading"),c=v("layer-panel"),d=v("components-panel"),f=v("toolbox-panel"),u=v("canvas-main"),h=v("footer-panel"),C=v("config-panel"),g=v("context-menu");return p(),_("div",$l,[m(r,{"back-url":"/dashboardDemo"}),o.loading?(p(),_("div",Dl,[m(i,{name:"loading02"})])):(p(),_("div",Il,[m(c),m(d),a("div",Ll,[m(f),m(u),m(h)]),m(C)])),m(g)])}var Xl=I(Bl,[["render",Tl]]);export{Xl as default};
