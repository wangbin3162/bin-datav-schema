import{ad as _,r as y,R as w,b as x,c as h,h as c,i as T,M as z,P as r}from"./vendor-c1103bdb.js";import{n as f}from"./chunk-bin-ui-design-9314e876.js";import{r as k}from"./file-helper-d9722f4a.js";import"./chunk-brace-0dab6832.js";const B=(o,s)=>{const a={allowType:"jpeg|jpg|png",allowSize:2,...s};return new RegExp(`\\.(${a.allowType})$`,"i").test(o.name)?o.size/1024/1024>a.allowSize?(f.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${a.allowSize}MB\uFF01`),!1):!0:(f.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u683C\u5F0F\u53EA\u80FD\u662F ${a.allowType} \u4E2D\u7684\u4E00\u79CD\uFF01`),!1)};const I=["multiple","accept"],S={class:"g-upload-image-wrap"},C={__name:"index",props:{allowType:{type:String,default:"jpeg|jpg|png|svg|gif"},size:{type:Number,default:2},multiple:{type:Boolean,default:!1}},emits:["upload"],setup(o,{emit:s}){const a=s,n=o,i=y(null);function d(){i.value.click()}function m(l){const e=l.target.files;!e||(p(e),i.value.value=null)}function g(l){l.preventDefault(),p(l.dataTransfer.files)}function p(l){let e=Array.prototype.slice.call(l);n.multiple||(e=e.slice(0,1));const t=[];e.forEach(u=>{B(u,{allowType:n.allowType,allowSize:n.size})&&t.push(u)}),v(t)}function v(l){const e=l.map(t=>k(t));Promise.all(e).then(t=>{a("upload",t)})}return(l,e)=>{const t=w("b-icon");return x(),h("div",{class:"dv-gui g-upload",onClick:d,onDrop:r(g,["prevent"]),onDragover:e[0]||(e[0]=r(()=>{},["prevent"])),onDragleave:e[1]||(e[1]=r(()=>{},["prevent"]))},[c("input",{ref_key:"fileInputRef",ref:i,type:"file",class:"custom-file-input",multiple:o.multiple,accept:o.allowType,onChange:m},null,40,I),T(l.$slots,"default",{},()=>[c("div",S,[z(t,{name:"plus"})])],!0)],32)}}};var E=_(C,[["__scopeId","data-v-d4c7165e"]]);export{E as default};
