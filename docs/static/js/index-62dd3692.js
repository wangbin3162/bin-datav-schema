import{d as M,u as j,g as q,a as Q,b as T}from"./images.api-4400d6b9.js";import{ad as U,j as G,r as u,R as g,Q as H,b as t,k as C,l as k,h as y,M as d,c as s,F as B,d as S,q as D,p as J,e as I,z as O}from"./vendor-c1103bdb.js";import"./index-71bcd248.js";import"./chunk-bin-ui-design-9314e876.js";import"./chunk-brace-0dab6832.js";import"./chunk-bin-datav-6a4e943a.js";import"./chunk-particles.vue3-91e644a5.js";import"./chunk-three-06bdd351.js";import"./chunk-gsap-ecfb8fd4.js";import"./chunk-mockjs-03499d26.js";const P={class:"images-modal-wrap"},W={class:"group-wrap"},X=["onClick"],Y={class:"img-wrap"},Z={key:0,class:"img-inner"},ee={key:0,class:"comp-item img-add"},te=["onClick"],ae=["title"],oe={__name:"image-select",props:{modelValue:{type:String,default:""},ignoreGroupKeys:{type:Array,default:()=>[]}},emits:["update:modelValue","change","resize"],setup(r,{expose:x,emit:p}){const w=p,i=r,V=G({get:()=>i.modelValue,set:e=>w("update:modelValue",e)}),m=u(!1),f=u([]),n=u(""),h=u([]),c=u(!1),_=u(!1),b=G(()=>!M.includes(n.value));async function v(e){try{c.value=!0,h.value=await T(e)}catch(a){console.log(a)}c.value=!1}function z(e){n.value=e,v(e)}function $(e){V.value=e.url?e.url:e.src,w("change",e),m.value=!1}async function N(e){_.value=!0;try{const a=e.map(o=>({groupKey:n.value,name:o.name,attr:{w:o.width,h:o.height},file:o.file}));for(let o=0;o<a.length;o++)await j(a[o]);await v(n.value),$(h.value[0])}catch(a){console.log(a)}_.value=!1}async function A(){var e;try{m.value=!0;const a=await q();f.value=[...Q.filter(o=>!i.ignoreGroupKeys.includes(o.key)),...a],n.value=(e=f.value[0])==null?void 0:e.key,await v(n.value)}catch(a){console.log(a)}}return x({open:A}),(e,a)=>{const o=g("b-scrollbar"),E=g("g-upload"),K=g("g-loading"),F=g("b-modal"),L=H("lazy");return t(),C(F,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=l=>m.value=l),title:"\u9009\u62E9\u56FE\u7247","append-to-body":"",top:"60px",width:"800px","custom-class":"schema-modal"},{default:k(()=>[y("div",P,[y("div",W,[d(o,{native:""},{default:k(()=>[(t(!0),s(B,null,S(f.value,l=>(t(),s("div",{key:l.key,class:D(["group-item t-ellipsis",{active:n.value===l.key}]),onClick:R=>z(l.key)},J(l.value),11,X))),128))]),_:1})]),y("div",Y,[d(o,null,{default:k(()=>[c.value?(t(),C(K,{key:1,spinning:""})):(t(),s("div",Z,[b.value?(t(),s("div",ee,[_.value?(t(),C(K,{key:1,spinning:""})):(t(),C(E,{key:0,onUpload:N}))])):I("",!0),(t(!0),s(B,null,S(h.value,(l,R)=>(t(),s("div",{class:"comp-item",key:R,onClick:de=>$(l)},[O(y("img",{title:l.name},null,8,ae),[[L,l.url?l.url:l.src]])],8,te))),128))]))]),_:1})])])]),_:1},8,["modelValue"])}}};var le=U(oe,[["__scopeId","data-v-3a63ded2"]]);const se={class:"dv-gui g-select-image-wrap"},ne=["src"],ie={key:1,class:"tip"},ce={key:0,class:"g-resize"},re={key:1,class:"g-resize"},ue={__name:"index",props:{modelValue:{type:String,default:""},showResize:{type:Boolean,default:!0},showClear:{type:Boolean,default:!1},ignoreGroupKeys:{type:Array,default:()=>[]}},emits:["update:modelValue","change","resize","clear"],setup(r,{emit:x}){const p=x,w=r,i=G({get:()=>w.modelValue,set:c=>p("update:modelValue",c)}),V=u(null);function m(){V.value.open()}function f(c){p("change",c)}function n(){p("resize")}function h(){i.value="",p("clear")}return(c,_)=>{const b=g("b-icon"),v=g("b-tooltip");return t(),s(B,null,[y("div",se,[y("div",{class:D(["g-img",{resize:r.showResize}]),onClick:m},[i.value?(t(),s("img",{key:0,src:i.value},null,8,ne)):(t(),s("span",ie,"\u70B9\u51FB\u9009\u62E9\u56FE\u7247"))],2),r.showResize?(t(),s("div",ce,[d(v,{content:"\u6062\u590D\u9ED8\u8BA4\u5C3A\u5BF8"},{default:k(()=>[d(b,{name:"expend",type:"button",onClick:n})]),_:1})])):I("",!0),r.showClear?(t(),s("div",re,[d(v,{content:"\u6E05\u9664\u56FE\u7247"},{default:k(()=>[d(b,{name:"clear",type:"button",onClick:h})]),_:1})])):I("",!0)]),d(le,{ref_key:"modalRef",ref:V,"ignore-group-keys":r.ignoreGroupKeys,modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=z=>i.value=z),onChange:f},null,8,["ignore-group-keys","modelValue"])],64)}}};var Ve=U(ue,[["__scopeId","data-v-18c809ce"]]);export{Ve as default};
