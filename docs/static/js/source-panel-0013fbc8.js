import{ax as w,a6 as x,m as C,I as E,l as b,E as S,D as A,H as d,o as l,a as u,b as n,c as f,w as g,F as M,P as V,f as I,e as k,t as B,aI as N,aJ as P}from"./vendor-302fa4a4.js";import{Q as H,e as z,D as R,E as F,A as L,a2 as U}from"./index-435da3e0.js";import{M as Y}from"./chunk-bin-ui-next-e3768e6e.js";import"./chunk-brace-b1f520b9.js";const j={name:"source-panel",components:{DataEditor:H(()=>x(()=>import("./data-editor-0cd17515.js"),["static/js/data-editor-0cd17515.js","static/js/vendor-302fa4a4.js","static/css/vendor-2b79d43b.css","static/js/chunk-brace-b1f520b9.js"]))},setup(){const o=C("260px"),i=C(null),h=E("ModelTree",[]),a=b(()=>{const t=e=>{const r=s.value.config?s.value.config.modelId:"",D={...e,icon:e.directory==="Y"?"folder":e.modelType==="DM"?"deploymentunit":"database",selected:r===e.id};return e.children&&e.children.length&&(D.children=e.children.map(t)),D};return h.value.map(t)}),{schemaStore:v,storeToRefs:y}=z(),{selectedCom:p}=y(v),s=b(()=>p.value.apiData),_=t=>{s.value.config.data=t},c=()=>{o.value=`${document.body.clientHeight-260}px`},m=(t,e)=>{var r;e.directory==="Y"?(e.selected=!1,Y.warning("\u4E0D\u80FD\u9009\u62E9\u6587\u4EF6\u5939\uFF01")):(s.value.config.modelId===e.id&&(e.selected=!0),(r=i.value)==null||r.open({modelId:e.id,modelName:e.name}))};return S(()=>{c(),R(window,"resize",c)}),A(()=>{F(window,"resize",c)}),{staticEditorHeight:o,sourceDrawerRef:i,ApiType:L,apiDataConfig:s,modelTree:a,handleChange:m,ApiTypeMap:U(),updateData:_}}},T=o=>(N("data-v-4aec554a"),o=o(),P(),o),J={class:"api-editor"},K={class:"attr-source-wp"},O={class:"data-source"},Q=T(()=>n("div",{class:"data-result-title"},"\u6570\u636E\u6E90\u914D\u7F6E",-1)),q={class:"data-source-config"},G={key:1,class:"pt-10"},W=T(()=>n("div",{class:"data-result-title"},"\u9009\u62E9\u5206\u6790\u6A21\u578B",-1)),X={class:"p16"};function Z(o,i,h,a,v,y){const p=d("b-radio"),s=d("b-radio-group"),_=d("g-field"),c=d("data-editor"),m=d("b-tree");return l(),u("div",J,[n("div",K,[n("div",O,[Q,n("div",q,[f(_,{label:"\u6570\u636E\u6765\u6E90"},{default:g(()=>[f(s,{modelValue:a.apiDataConfig.type,"onUpdate:modelValue":i[0]||(i[0]=t=>a.apiDataConfig.type=t),type:"button",size:"mini"},{default:g(()=>[(l(!0),u(M,null,V(a.ApiTypeMap,(t,e)=>(l(),I(p,{key:e,label:e},{default:g(()=>[k(B(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a.apiDataConfig.type===a.ApiType.static?(l(),I(c,{key:0,"model-value":a.apiDataConfig.config.data,height:a.staticEditorHeight,onChange:a.updateData},null,8,["model-value","height","onChange"])):(l(),u("div",G,[W,n("div",X,[f(m,{data:a.modelTree,titleKey:"name","default-expand":"",onSelectChange:a.handleChange},null,8,["data","onSelectChange"])])]))])])])])}var oe=w(j,[["render",Z],["__scopeId","data-v-4aec554a"]]);export{oe as default};
