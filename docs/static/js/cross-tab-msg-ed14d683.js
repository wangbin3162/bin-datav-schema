import{k as m}from"./index-71bcd248.js";import{aK as i,am as l}from"./vendor-c1103bdb.js";const o="TPL_LIST";async function u(e){try{const t=await i.getItem(o);if(t){const a=JSON.parse(e.content);t.push(a),await i.setItem(o,t)}return!0}catch{return!1}}async function f(e){try{const t=m(`/data/template/${e}.json`),n=(await l.get(t)).data;return{id:n.template.id,name:n.template.name,content:JSON.stringify(n)}}catch{const a=await i.getItem(o);if(a){const n=a.findIndex(s=>s.template.id===e);if(n>-1){const s=a[n];return{id:s.template.id,name:s.template.name,content:JSON.stringify(s)}}}return null}}async function g(e){try{const t=await i.getItem(o);if(t){const a=t.findIndex(n=>n.id===e);t.splice(a,1),await i.setItem(o,t)}return!0}catch{return!1}}async function h(e){try{const t=await i.getItem(o);if(t)return{rows:t.map(r=>({id:r.id,name:r.name,content:JSON.stringify(r)})),total:t.length};const a=m("/data/template/temp_list.json"),s=(await l.get(a)).data;return await i.setItem(o,s),{rows:s.map(r=>({id:r.id,name:r.name,content:JSON.stringify(r)})),total:s.length}}catch(t){return console.log(t),{rows:[],total:0}}}const c=new BroadcastChannel("SchemaChannel");function w(e,t){c.postMessage({type:e,content:t})}function y(e){const t=a=>e&&e(a.data);return c.addEventListener("message",t),()=>c.removeEventListener("message",t)}export{u as a,f as b,h as g,y as l,g as r,w as s};
