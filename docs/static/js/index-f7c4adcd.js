var I=Object.defineProperty;var f=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var v=(o,a,e)=>a in o?I(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,h=(o,a)=>{for(var e in a||(a={}))M.call(a,e)&&v(o,e,a[e]);if(f)for(var e of f(a))S.call(a,e)&&v(o,e,a[e]);return o};import{at as V,m as y,H as u,o as d,a as i,c as p,w as z,b as n,u as k,j as w,t as B,aA as C,aB as T}from"./vendor-471160ad.js";import{M as b}from"./chunk-bin-ui-next-663f6350.js";import{r as j}from"./file-helper-94af9014.js";import"./chunk-brace-269ffce0.js";const E=(o,a)=>{const e=h({allowType:"jpeg|jpg|png",allowSize:2},a);return new RegExp(`\\.(${e.allowType})$`,"i").test(o.name)?o.size/1024/1024>e.allowSize?(b.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${e.allowSize}MB\uFF01`),!1):!0:(b.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u683C\u5F0F\u53EA\u80FD\u662F ${e.allowType} \u4E2D\u7684\u4E00\u79CD\uFF01`),!1)};const N={name:"g-upload-img",props:{modelValue:{type:String,required:!0},allowType:{type:String,default:"jpeg|jpg|png"},size:{type:Number,default:2},label:{type:String,default:""},prefixIcon:{type:String,default:"link"},images:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(o,a){const e=y(!1),l=y(!1),m=t=>(E(t,{allowType:o.allowType,allowSize:o.size})&&j(t).then(x=>{s(x)}),!1),_=()=>{o.modelValue&&(l.value=!0)},r=()=>{l.value=!1},s=t=>{a.emit("update:modelValue",t)};return{loading:e,visibleCover:l,handleUpload:m,handleMouseEnter:_,handleMouseLeave:r,removeImage:()=>{s(""),l.value=!1},handleInput:s}}},c=o=>(C("data-v-6031632b"),o=o(),T(),o),U={class:"dv-gui g-upload"},A={class:"g-upload-image-content"},L=["src"],q={key:1,class:"g-upload-tip",flex:"dir:top main:center cross:center"},D=c(()=>n("p",null,"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u8FD9\u91CC\u66F4\u6362",-1)),F={key:0,class:"g-upload-image-cover"},H=c(()=>n("span",null,"\u66F4\u6539",-1)),R=c(()=>n("p",{style:{padding:"0 10px"}},"|",-1)),G={key:0,class:"g-input__caption"};function J(o,a,e,l,m,_){const r=u("b-input"),s=u("b-icon"),g=u("b-upload");return d(),i("div",U,[p(r,{"model-value":e.modelValue,placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",prefix:e.prefixIcon,size:"small","onUpdate:modelValue":l.handleInput},null,8,["model-value","prefix","onUpdate:modelValue"]),p(g,{action:"","before-upload":l.handleUpload,"show-upload-list":!1},{default:z(()=>[n("div",{class:"g-upload-image-wrap",onMouseenter:a[1]||(a[1]=(...t)=>l.handleMouseEnter&&l.handleMouseEnter(...t)),onMouseleave:a[2]||(a[2]=(...t)=>l.handleMouseLeave&&l.handleMouseLeave(...t))},[n("div",A,[e.modelValue?(d(),i("img",{key:0,src:e.modelValue,alt:""},null,8,L)):(d(),i("div",q,[p(s,{name:"image",size:"52"}),D]))]),l.visibleCover?(d(),i("div",F,[H,R,n("span",{onClick:a[0]||(a[0]=k((...t)=>l.removeImage&&l.removeImage(...t),["stop"]))},"\u5220\u9664")])):w("",!0)],32)]),_:1},8,["before-upload"]),e.label?(d(),i("span",G,B(e.label),1)):w("",!0)])}var Y=V(N,[["render",J],["__scopeId","data-v-6031632b"]]);export{Y as default};
