import{u as B}from"./useStoreRouter-d60a611b.js";import{a as F}from"./chunk-bin-ui-next-c6b728c8.js";import{e as $,f as L}from"./index-0ca6328d.js";import{_ as E}from"./logo-39114ead.js";import{as as M,k as P,H as m,o as u,a as p,b as i,F as y,O as N,m as k,t as f,c as v,w as x,j as R,h as T,az as H,aA as D,a5 as j,l as I,D as z,U as W,f as S,aC as A,e as V,M as X}from"./vendor-1e0971ef.js";import"./chunk-brace-269ffce0.js";var q="/bin-datav-schema/static/jpeg/avatar05-2e078c6d.jpeg";const G={name:"NavHeader",props:{isFixed:{type:Boolean,default:!1}},setup(){const{$store:d,$router:e,$route:n}=B(),t=P(()=>d.state.user.userInfo);function s(o){o==="userCenter"&&e.push("/userCenter"),o==="logout"&&F.confirm({type:"warning",title:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\u5417\uFF1F"}).then(()=>{d.dispatch("user/clearToken"),e.push(`/login?redirect=${n.fullPath}`)}).catch(a=>{console.log(a)})}return{userInfo:t,handleClick:s,welcome:"Welcome to the data analysis system",version:$.version,title:$.description}}},w=d=>(H("data-v-1fdf31ec"),d=d(),D(),d),U={class:"logo"},O={class:"top-tip"},J=w(()=>i("strong",{class:"tip-strong"},"\u516C\u544A",-1)),K={class:"dv-marquee"},Q={class:"content"},Y=w(()=>i("span",{class:"content-space"},null,-1)),Z={class:"user"},tt={class:"header-item"},et={class:"user-link-wrap"},st=w(()=>i("img",{src:q,class:"avatar",alt:"avatar"},null,-1)),nt={key:0,class:"user-link"},at={flex:"cross:center"},ot=w(()=>i("span",{class:"ml-5"},"\u6CE8\u9500\u767B\u5F55",-1)),it={class:"dv-nav"},rt={class:"header-img"},ct={class:"nav-img-text"},dt=w(()=>i("img",{src:E,alt:"logo"},null,-1)),lt={class:"nav-welcome"},ht=w(()=>i("div",{class:"nav-img"},null,-1));function _t(d,e,n,t,s,o){const a=m("weather"),r=m("b-icon"),c=m("b-dropdown-item"),l=m("b-dropdown-menu"),b=m("b-dropdown");return u(),p("div",null,[i("div",{class:"dv-header",style:T({background:n.isFixed?"#171b22":""})},[i("div",U,[i("div",O,[J,i("div",K,[i("span",Q,[(u(),p(y,null,N(2,h=>(u(),p(y,{key:h},[k(" \u6B22\u8FCE\u4F7F\u7528"+f(t.title)+"\uFF0C \u7248\u672C\u53F7\uFF1AV"+f(t.version)+"\uFF0C\u672C\u7CFB\u7EDF\u652F\u6301Chrome\u3001Edge\u3001Firefox\u7B49\u4E3B\u6D41\u6D4F\u89C8\u5668\u3002 ",1),Y],64))),64))])])])]),i("div",Z,[v(a),i("div",tt,[v(b,{onCommand:t.handleClick,"append-to-body":""},{dropdown:x(()=>[v(l,{style:{width:"120px"}},{default:x(()=>[v(c,{name:"logout"},{default:x(()=>[i("div",at,[v(r,{name:"logout",size:"16"}),ot])]),_:1})]),_:1})]),default:x(()=>[i("div",et,[st,t.userInfo?(u(),p("span",nt,[k(f(t.userInfo.realName)+" ",1),v(r,{name:"down"})])):R("",!0)])]),_:1},8,["onCommand"])])])],4),i("div",it,[i("div",rt,[i("div",ct,[dt,i("div",lt,[i("h2",null,f(t.title),1),i("h4",null,f(t.welcome),1)])]),ht])])])}var vt=M(G,[["render",_t],["__scopeId","data-v-1fdf31ec"]]);class ut{constructor(e,n,t=0){this.j=.85,this.k=10,this.l=4,this.pattern=null,this.tabHeight=0,this.tabWidthList=[],this.opt={currentIndex:0,nextIndex:1,speed:1,timer:0,width:200,height:100,animating:!1,curDisX:0,distance:0},this.canvas=document.getElementById(e),this.tabs=document.querySelectorAll(n);const{opt:s}=this;this.calcTabs(),this.initCanvas(this.canvas,s.width,s.height),this.createPattern(this.canvas),this.startDraw(0),this.toggle(t)}calcTabs(){const{opt:e,tabs:n}=this,t=[];let s=0;n.forEach(o=>{t.push(s),s+=o.offsetWidth}),t[0]=-20,t.push(s),this.tabWidthList=t,this.tabHeight=n[0].offsetHeight+0,e.height=this.tabHeight+20,e.width=window.innerWidth}initCanvas(e,n,t){const s=e.getContext("2d"),{devicePixelRatio:o}=window;e.width=n*o,e.height=t*o,e.style.width=`${n}px`,e.style.height=`${t}px`,s.scale(o,o)}createPattern(e){const o=document.createElement("canvas");o.width=140,o.height=63,o.style.width=`${140/1}px`,o.style.height=`${63/1}px`;const a=o.getContext("2d");a.scale(1,1),a.lineWidth=.4;for(let r=3,c=.8,l=1;30>l;l++)a.strokeStyle=`RGBA(22, 120, 160, ${c})`,a.beginPath(),a.moveTo(0,l*r),a.lineTo(140,l*r),a.stroke(),a.closePath(),10<l&&(c-=.1);this.pattern=e.getContext("2d").createPattern(o,"repeat-x")}calcAVGSpeed(e){const{l:n,j:t,k:s}=this;let o=(n*t*e+s*(1-t)*e)/(s*n*20);return o=Math.max(Math.abs(o),2.5)*Math.sign(o),o}getCurSpeed(e,n){const{l:t,j:s,k:o,opt:a}=this;return Math.abs(e)>Math.abs(s*n)?t*a.speed:o*a.speed}calCurve(e,n,t,s,o,a){e.bezierCurveTo(n+a,t,s-a,o,s,o)}drawHightlight(e){const{opt:n}=this,t=this.canvas.getContext("2d"),s=.3;t.clearRect(0,0,2*n.width,2*n.height),t.shadowColor="rgba(36, 131, 255, 1)",t.shadowBlur=5,t.strokeStyle="#004CB3",t.lineWidth=.8,t.fillStyle="none",this.draw(t,!1);const o=t.createLinearGradient(0,0,n.width,n.height),a=e-s;o.addColorStop(Math.min(1,Math.max(0,0+a)),"rgba(0,0,0,0)"),o.addColorStop(Math.min(1,Math.max(0,0+a+.1)),"#8ed6ff"),o.addColorStop(Math.min(1,0+a+s),"#8ed6ff"),o.addColorStop(Math.min(1,0+a+s+.1),"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,0)"),t.lineWidth=1.5,t.strokeStyle=o,t.fillStyle=this.pattern,this.draw(t,!0)}startDraw(e){this.drawHightlight(e),this.opt.timer=requestAnimationFrame(()=>{this.startDraw((e+.005)%1.6)})}draw(e,n){const{opt:t,tabWidthList:s,tabHeight:o}=this,a=t.currentIndex,r=o,c=0,l=40,b=20,h=.5,C=2.5;let _=0;if(e.beginPath(),e.moveTo(-50,t.height+10),e.lineTo(-50,r+h),t.animating){const g=this.getCurSpeed(t.curDisX,t.distance);_=Math.min(Math.abs(t.distance),Math.abs(t.curDisX+g))*Math.sign(g)}if(e.lineTo(c+s[a]+_-l/2,r+h),this.calCurve(e,c+s[a]+_-l/2,r+h,c+s[a]+_+l/2,C+h,b),t.animating){const g=s[t.nextIndex+1]-s[t.nextIndex];e.lineTo(c+s[a]+g+_-l/2,C+h),this.calCurve(e,c+s[a]+g+_-l/2,C+h,c+s[a]+g+_+l/2,r+h,b)}else e.lineTo(c+s[a+1]+_-l/2,C+h),this.calCurve(e,c+s[a+1]+_-l/2,C+h,c+s[a+1]+_+l/2,r+h,b);e.lineTo(t.width+10,r+h),e.lineTo(t.width+10,t.height+10),e.closePath(),e.stroke(),n&&e.fill(),n&&t.animating&&(t.curDisX=_,Math.abs(_)>=Math.abs(t.distance)&&(t.animating=!1,t.currentIndex=t.nextIndex))}toggle(e){const{opt:n,tabWidthList:t}=this;e!==n.currentIndex&&t&&t.length&&(!n.animating||e!==n.nextIndex)&&(n.animating=!0,n.distance=t[e]-t[n.currentIndex],n.speed=this.calcAVGSpeed(n.distance),n.curDisX=0,n.nextIndex=e)}resize(){const{opt:e}=this;e.timer&&cancelAnimationFrame(e.timer),this.calcTabs(),this.initCanvas(this.canvas,e.width,e.height),this.startDraw(0)}}const mt={name:"nav-main",props:{navs:{type:Array,required:!0}},emits:["change"],setup(d,{emit:e}){const n=j(),t=I(0);let s=null;const o=(r,c)=>{s&&(t.value=c,s.toggle(c),e("change",r))},a=L(()=>{s&&s.resize()},500);return z(()=>{const r=d.navs.findIndex(c=>c.name===n.name);t.value=r>-1?r:0,s=new ut("nav-canvas",".nav-main .nav-span",t.value),window.addEventListener("resize",a)}),W(()=>{window.removeEventListener("resize",a)}),{toggleNav:o,activeNav:t}}},pt=d=>(H("data-v-8cea7a48"),d=d(),D(),d),gt={class:"nav-main"},ft=pt(()=>i("canvas",{id:"nav-canvas",style:{position:"absolute","z-index":"-1",left:"0"}},null,-1)),wt=["onClick"];function bt(d,e,n,t,s,o){return u(),p("div",gt,[ft,(u(!0),p(y,null,N(n.navs,(a,r)=>(u(),p("span",{key:a.name,class:"nav-span"},[i("a",{class:S(["nav-link",{"nav-active":t.activeNav===r}]),onClick:c=>t.toggleNav(a,r)},[i("i",{class:S(`b-iconfont b-icon-${a.icon} nav-icon`)},null,2),k(f(a.title),1)],10,wt)]))),128))])}var Ct=M(mt,[["render",bt],["__scopeId","data-v-8cea7a48"]]);const xt={name:"Home",components:{NavMain:Ct,NavHeader:vt},setup(){const d=I(null),e=I(!1),n=A(),t=()=>{e.value=d.value.$el.offsetTop>200},s=o=>{n.push({name:o.name})};return z(()=>{window.addEventListener("scroll",t)}),W(()=>{window.removeEventListener("scroll",t)}),{navMainRef:d,isFixed:e,onNavChange:s}}},yt={class:"dv-home"},kt=i("div",{class:"nav-shadow"},null,-1),It={class:"dv-main"},Mt={class:"dv-content"};function $t(d,e,n,t,s,o){const a=m("nav-header"),r=m("nav-main"),c=m("router-view");return u(),p("div",yt,[v(a,{"is-fixed":t.isFixed},null,8,["is-fixed"]),v(r,{ref:"navMainRef",navs:d.$store.state.menu.menu,style:T({background:t.isFixed?"#171b22":""}),onChange:t.onNavChange},null,8,["navs","style","onChange"]),kt,i("div",It,[i("div",Mt,[v(c,null,{default:x(({Component:l})=>[(u(),V(X(l)))]),_:1})])])])}var Wt=M(xt,[["render",$t]]);export{Wt as default};
