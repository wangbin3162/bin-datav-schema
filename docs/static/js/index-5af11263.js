import{aw as w,l as f,o as d,a as i,c as u,w as b,b as n,q as x,j as v,t as I,G as p,aH as M,aI as S}from"./vendor-b7d265ee.js";import{M as h}from"./chunk-bin-ui-next-925ea2c7.js";import{r as V}from"./file-helper-94af9014.js";import"./chunk-brace-b4ee70be.js";const z=(o,l)=>{const a={allowType:"jpeg|jpg|png",allowSize:2,...l};return new RegExp(`\\.(${a.allowType})$`,"i").test(o.name)?o.size/1024/1024>a.allowSize?(h.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${a.allowSize}MB\uFF01`),!1):!0:(h.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u683C\u5F0F\u53EA\u80FD\u662F ${a.allowType} \u4E2D\u7684\u4E00\u79CD\uFF01`),!1)};const k={name:"g-upload-img",props:{modelValue:{type:String,required:!0},allowType:{type:String,default:"jpeg|jpg|png"},size:{type:Number,default:2},label:{type:String,default:""},prefixIcon:{type:String,default:"link"},images:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(o,l){const a=f(!1),e=f(!1),m=t=>(z(t,{allowType:o.allowType,allowSize:o.size})&&V(t).then(y=>{s(y)}),!1),_=()=>{o.modelValue&&(e.value=!0)},r=()=>{e.value=!1},s=t=>{l.emit("update:modelValue",t)};return{loading:a,visibleCover:e,handleUpload:m,handleMouseEnter:_,handleMouseLeave:r,removeImage:()=>{s(""),e.value=!1},handleInput:s}}},c=o=>(M("data-v-6031632b"),o=o(),S(),o),C={class:"dv-gui g-upload"},T={class:"g-upload-image-content"},j=["src"],B={key:1,class:"g-upload-tip",flex:"dir:top main:center cross:center"},E=c(()=>n("p",null,"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u8FD9\u91CC\u66F4\u6362",-1)),N={key:0,class:"g-upload-image-cover"},U=c(()=>n("span",null,"\u66F4\u6539",-1)),L=c(()=>n("p",{style:{padding:"0 10px"}},"|",-1)),q={key:0,class:"g-input__caption"};function A(o,l,a,e,m,_){const r=p("b-input"),s=p("b-icon"),g=p("b-upload");return d(),i("div",C,[u(r,{"model-value":a.modelValue,placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",prefix:a.prefixIcon,size:"small","onUpdate:modelValue":e.handleInput},null,8,["model-value","prefix","onUpdate:modelValue"]),u(g,{action:"","before-upload":e.handleUpload,"show-upload-list":!1},{default:b(()=>[n("div",{class:"g-upload-image-wrap",onMouseenter:l[1]||(l[1]=(...t)=>e.handleMouseEnter&&e.handleMouseEnter(...t)),onMouseleave:l[2]||(l[2]=(...t)=>e.handleMouseLeave&&e.handleMouseLeave(...t))},[n("div",T,[a.modelValue?(d(),i("img",{key:0,src:a.modelValue,alt:""},null,8,j)):(d(),i("div",B,[u(s,{name:"image",size:"52"}),E]))]),e.visibleCover?(d(),i("div",N,[U,L,n("span",{onClick:l[0]||(l[0]=x((...t)=>e.removeImage&&e.removeImage(...t),["stop"]))},"\u5220\u9664")])):v("",!0)],32)]),_:1},8,["before-upload"]),a.label?(d(),i("span",q,I(a.label),1)):v("",!0)])}var J=w(k,[["render",A],["__scopeId","data-v-6031632b"]]);export{J as default};
