import{u as h}from"./useSchemaStore-e0ca2070.js";import{a4 as g,a6 as _,a7 as y,f as b,j as w,J as x,o as r,A as i,d as S,z as k,B as d,u as $,F as j,K as z,E as v,c as B,O as C}from"./vendor-0fc4fabe.js";import{l as E}from"./database.api-f55d9a49.js";import{P as I,s as D,Q as c}from"./index-89bf360d.js";import"./chunk-brace-7fd40d4c.js";import"./chunk-bin-ui-next-51eb6328.js";const A={name:"Screen",components:{GLoading:I},setup(){const l=_(),u=y(),{loadScreenData:m,pageConfig:t,comps:p}=h(),n=b(!1),s=()=>{const o=t.value.width,a=document.documentElement.clientWidth/o;c(document.body,{transform:`scale(${a})`,transformOrigin:"left top",backgroundSize:"100%"})},e=async()=>{const{screenId:o}=u.params;if(!!o)try{n.value=!0;const a=await E(o);a.data&&(await m(a.data),f(a.data),setTimeout(()=>{n.value=!1},500),D(window,"resize",s))}catch(a){l.push("/notfound")}},f=o=>{const{pageInfo:a}=o;document.title=a.name,document.querySelector('meta[name="viewport"]').setAttribute("content",`width=${t.value.width}`),c(document.documentElement,{overflowX:"hidden",overflowY:"visible"}),c(document.body,{width:`${t.value.width}px`,height:`${t.value.height}px`,backgroundImage:`url(${t.value.bgImage})`,backgroundColor:t.value.bgColor}),s()};return w(()=>{e()}),{loading:n,comps:p}}},F={class:"screen-wrapper"},L={class:"dv-loading"},N={class:"scene"};function O(l,u,m,t,p,n){const s=x("g-loading");return r(),i("div",F,[S(d("div",L,[$(s,{spinning:""})],512),[[k,t.loading]]),d("div",{class:"dv-layout",style:v({visibility:t.loading?"hidden":"visible"})},[d("div",N,[(r(!0),i(j,null,z(t.comps,e=>(r(),i("div",{class:"dv-com absolute",key:e.id,style:v({left:e.attr.x+"px",top:e.attr.y+"px",width:e.attr.w+"px",height:e.attr.h+"px",opacity:e.attr.opacity,transform:`rotate(${e.attr.rotate}deg)`})},[(r(),B(C(e.name),{data:e},null,8,["data"]))],4))),128))])],4)])}var K=g(A,[["render",O]]);export{K as default};
