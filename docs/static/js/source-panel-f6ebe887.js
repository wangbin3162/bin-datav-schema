import{cL as w,cx as I,r as C,L as S,j as b,f as E,g as A,K as d,b as r,c as u,h as n,v as f,l as g,F as M,d as V,k as T,y as k,p as B,db as N,dc as L}from"./vendor-9f17a1dc.js";import{Q as P,e as z,D as H,E as R,A as j,a3 as F}from"./index-d19419d6.js";import{M as K}from"./chunk-bin-ui-next-79ffd1f6.js";import"./chunk-echarts-f96fa6f1.js";import"./chunk-brace-b1f520b9.js";import"./chunk-bin-datav-a4d94f3b.js";import"./chunk-particles.vue3-d045b215.js";import"./chunk-mockjs-9e1335a8.js";const U={name:"source-panel",components:{DataEditor:P(()=>I(()=>import("./data-editor-b1a4a49b.js"),["static/js/data-editor-b1a4a49b.js","static/js/vendor-9f17a1dc.js","static/js/chunk-echarts-f96fa6f1.js","static/js/chunk-brace-b1f520b9.js"]))},setup(){const o=C("260px"),i=C(null),h=S("ModelTree",[]),a=b(()=>{const t=e=>{const l=s.value.config?s.value.config.modelId:"",D={...e,icon:e.directory==="Y"?"folder":e.modelType==="DM"?"deploymentunit":"database",selected:l===e.id};return e.children&&e.children.length&&(D.children=e.children.map(t)),D};return h.value.map(t)}),{schemaStore:v,storeToRefs:y}=z(),{selectedCom:p}=y(v),s=b(()=>p.value.apiData),_=t=>{s.value.config.data=t},c=()=>{o.value=`${document.body.clientHeight-260}px`},m=(t,e)=>{var l;e.directory==="Y"?(e.selected=!1,K.warning("\u4E0D\u80FD\u9009\u62E9\u6587\u4EF6\u5939\uFF01")):(s.value.config.modelId===e.id&&(e.selected=!0),(l=i.value)==null||l.open({modelId:e.id,modelName:e.name}))};return E(()=>{c(),H(window,"resize",c)}),A(()=>{R(window,"resize",c)}),{staticEditorHeight:o,sourceDrawerRef:i,ApiType:j,apiDataConfig:s,modelTree:a,handleChange:m,ApiTypeMap:F(),updateData:_}}},x=o=>(N("data-v-4aec554a"),o=o(),L(),o),Y={class:"api-editor"},O={class:"attr-source-wp"},Q={class:"data-source"},q=x(()=>n("div",{class:"data-result-title"},"\u6570\u636E\u6E90\u914D\u7F6E",-1)),G={class:"data-source-config"},J={key:1,class:"pt-10"},W=x(()=>n("div",{class:"data-result-title"},"\u9009\u62E9\u5206\u6790\u6A21\u578B",-1)),X={class:"p16"};function Z(o,i,h,a,v,y){const p=d("b-radio"),s=d("b-radio-group"),_=d("g-field"),c=d("data-editor"),m=d("b-tree");return r(),u("div",Y,[n("div",O,[n("div",Q,[q,n("div",G,[f(_,{label:"\u6570\u636E\u6765\u6E90"},{default:g(()=>[f(s,{modelValue:a.apiDataConfig.type,"onUpdate:modelValue":i[0]||(i[0]=t=>a.apiDataConfig.type=t),type:"button",size:"mini"},{default:g(()=>[(r(!0),u(M,null,V(a.ApiTypeMap,(t,e)=>(r(),T(p,{key:e,label:e},{default:g(()=>[k(B(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a.apiDataConfig.type===a.ApiType.static?(r(),T(c,{key:0,"model-value":a.apiDataConfig.config.data,height:a.staticEditorHeight,onChange:a.updateData},null,8,["model-value","height","onChange"])):(r(),u("div",J,[W,n("div",X,[f(m,{data:a.modelTree,titleKey:"name","default-expand":"",onSelectChange:a.handleChange},null,8,["data","onSelectChange"])])]))])])])])}var ce=w(U,[["render",Z],["__scopeId","data-v-4aec554a"]]);export{ce as default};
