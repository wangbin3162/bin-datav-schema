import{ax as F,j as I,b as g,c as $,q as A,a8 as $e,aK as it,r as R,w as ve,s as ge,K as k,k as z,l as x,v as u,F as X,y as E,e as Y,h as a,p as Q,a as be,a1 as v,Q as fe,n as J,z as le,Y as rt,P as ye,U as Vt,a3 as dt,aM as Mt,d as ae,af as Dt,I as It,L as Tt,D as oe,i as ze,A as Ue,az as Ve,$ as Rt,f as Ce,o as Bt,aI as xe,aJ as we,g as Me,J as Lt,m as ut,a0 as Nt,aN as Et,aO as zt,a9 as Ut,T as At,E as qe}from"./vendor-0bcca4c5.js";import{e as j,z as De,A as Ae,s as Ot,t as Oe,v as Gt,j as Yt,B as Ge,q as me,D as ee,E as te,M as re,F as G,u as jt,b as Ie,f as Ye,G as mt,H as Ze,J as Qe,K as Kt,L as et,N as tt,O as de,a as Pt,P as Xt,w as Jt,k as Ht,Q as Wt,R as Ft,T as qt,U as Zt,n as Qt}from"./index-a2a480dc.js";import{M as W,a as pe,s as eo,b as to}from"./chunk-bin-ui-next-98c8f2d2.js";import{a as oo,g as pt,b as ao}from"./database.api-009ddd3f.js";import{d as no,a as so}from"./file-helper-e95db66d.js";import{s as lo,l as co}from"./template.api-d178eb48.js";import{d as je,a as io,u as ro,r as uo,g as mo,m as po,b as vo,c as fo}from"./images.api-f32406c0.js";import{p as _o,m as ho}from"./select-options-04fab100.js";import"./chunk-brace-b1f520b9.js";import"./chunk-bin-datav-bdc06cb1.js";import"./chunk-three-06bdd351.js";import"./chunk-gsap-80ac4909.js";import"./chunk-particles.vue3-83a83be1.js";import"./chunk-mockjs-9e1335a8.js";const go={name:"HeadLoading",setup(){const{schemaStore:o,storeToRefs:t}=j(),{toolbar:n}=t(o);return{loading:I(()=>n.value.loading)}}};function bo(o,t,n,e,l,s){return g(),$("div",{class:A(["loading-indicator",{loading:e.loading}])},null,2)}var yo=F(go,[["render",bo],["__scopeId","data-v-5475ad30"]]);function Ke(){const o=$e(),{schemaStore:t,storeToRefs:n}=j(),{pageInfo:e,pageConfig:l,comps:s}=n(t);async function i(d="edit"){const c={id:e.value.id||o.query.id,name:e.value.name,pid:e.value.pid,status:d,layout:JSON.stringify(l.value),components:s.value.map(m=>De(m.apiData)?{name:m.alias,componentType:m.componentType,componentContent:JSON.stringify(m),componentDataType:Ae.static,modelId:"",x:[],y:[],drill:[],filters:[]}:{name:m.alias,componentType:m.componentType,componentDataType:m.apiData.type,modelId:m.apiData.config.modelId,componentContent:JSON.stringify(m),x:m.apiData.config.x,y:m.apiData.config.y,drill:[],filters:[]})};try{return await Ot(c)}catch(m){Oe("userSchemaStore/saveScreenData",m)}return""}async function r(){let d={};try{t.setGlobalLoading(!0);const c={pageInfo:{id:e.value.id,name:e.value.name||"\u770B\u677F\u9884\u89C8",pid:e.value.pid||"1"},pageConfig:l.value,comps:s.value};d=await oo(c)}catch{d={}}return t.setGlobalLoading(!1),d}return{saveScreenData:i,previewScreen:r}}function H(o){const{schemaStore:t}=j();o?t.setGlobalLoading(o):setTimeout(()=>t.setGlobalLoading(o),300)}const Co={name:"save-screen",props:{modelValue:{type:Boolean},status:{type:String,default:"edit",validator:o=>["edit","audited"].includes(o)}},emits:["update:modelValue"],setup(o,t){const n=I({get:()=>o.modelValue,set:f=>t.emit("update:modelValue",f)}),{schemaStore:e,storeToRefs:l}=j(),{pageInfo:s}=l(e),{saveScreenData:i}=Ke(),r=it(),d=$e(),c=R([]),m=R(null),h=R(!1),p=I(()=>window.location.origin+Gt(`/#/screen/${d.query.id}`));Yt().then(f=>{c.value=f.data?[f.data]:[]});const _=I(()=>o.status==="edit"?"\u4FDD\u5B58\u770B\u677F":"\u53D1\u5E03\u770B\u677F"),y=()=>{m.value.validate(async f=>{if(f){let S="";try{H(!0),h.value=!0,S=await i(o.status)}catch(w){Oe("save-screes/saveKanban",w)}H(!1),s.value.id=S,h.value=!1,n.value=!1,W.success({message:"\u4FDD\u5B58\u6210\u529F\uFF01",showClose:!0});let C=r.resolve({path:"/schema/screen",query:{id:S}});window.location.replace(C.href)}})},b=()=>{ge(()=>{Ge(p.value)&&W.success("\u590D\u5236\u53D1\u5E03\u5730\u5740\u6210\u529F!")})};return ve(()=>o.modelValue,f=>{f&&ge(()=>{m.value&&m.value.resetFields()})}),{formRef:m,pageInfo:s,dirTree:c,loading:h,visible:n,saveKanban:y,btnText:_,shareUrl:p,copyUrl:b}}},xo={class:"t-center"};function wo(o,t,n,e,l,s){const i=k("b-input"),r=k("b-form-item"),d=k("g-input"),c=k("b-button"),m=k("b-form"),h=k("b-modal");return g(),z(h,{modelValue:e.visible,"onUpdate:modelValue":t[2]||(t[2]=p=>e.visible=p),"append-to-body":"",title:e.btnText,top:"200px","custom-class":"schema-modal",onClose:t[3]||(t[3]=p=>e.visible=!1)},{default:x(()=>[u(m,{"label-width":"80px",ref:"formRef",model:e.pageInfo,"label-suffix":":"},{default:x(()=>[u(r,{label:"\u770B\u677F\u540D\u79F0",prop:"name",rules:{required:!0,message:"\u770B\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:x(()=>[u(i,{modelValue:e.pageInfo.name,"onUpdate:modelValue":t[0]||(t[0]=p=>e.pageInfo.name=p)},null,8,["modelValue"])]),_:1}),n.status==="audited"&&o.$route.query.id?(g(),$(X,{key:0},[u(r,{label:"\u9884\u89C8\u5730\u5740"},{default:x(()=>[u(d,{modelValue:e.shareUrl,"onUpdate:modelValue":t[1]||(t[1]=p=>e.shareUrl=p),readonly:"",type:"textarea",autosize:{minRows:3}},null,8,["modelValue"])]),_:1}),u(r,null,{default:x(()=>[u(c,{type:"text",onClick:e.copyUrl},{default:x(()=>[E("\u590D\u5236\u9884\u89C8\u5730\u5740")]),_:1},8,["onClick"])]),_:1})],64)):Y("",!0)]),_:1},8,["model"]),a("div",xo,[u(c,{type:"primary",onClick:e.saveKanban,loading:e.loading,style:{width:"200px"}},{default:x(()=>[E(Q(e.btnText),1)]),_:1},8,["onClick","loading"])])]),_:1},8,["modelValue","title"])}var ko=F(Co,[["render",wo]]);const So={name:"save-template",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(o,t){const{schemaStore:n,storeToRefs:e}=j(),{pageConfig:l,comps:s}=e(n),i=R(null),r=be({loading:!1,id:`temp_${me()}`,name:""}),d=I({get:()=>o.modelValue,set:p=>t.emit("update:modelValue",p)}),c=I(()=>({template:{id:r.id,name:r.name},pageConfig:l.value,comps:s.value})),m=()=>{i.value&&i.value.validate(async p=>{if(p){const _=c.value,y=JSON.stringify(_);no(y,`${_.template.id}.json`),W.success({message:"\u6A21\u677F\u6587\u4EF6\u5DF2\u4FDD\u5B58\uFF01",showClose:!0})}})},h=async()=>{i.value&&i.value.validate(async p=>{if(p){try{H(!0),r.loading=!0;const _=c.value,y=_.template.name,b=JSON.stringify(_);await lo({name:y,content:b})}catch(_){Oe("save-template/saveAsTemplate",_)}H(!1),r.loading=!1,d.value=!1,W.success({message:"\u6A21\u677F\u5DF2\u4FDD\u5B58\uFF01",showClose:!0})}})};return ve(()=>o.modelValue,p=>{p&&(i.value&&i.value.resetFields(),r.id=`temp_${me()}`)}),{formRef:i,formStatus:r,visible:d,downloadCfg:m,saveAsTemplate:h}}},$o={class:"t-center"};function Vo(o,t,n,e,l,s){const i=k("b-input"),r=k("b-form-item"),d=k("b-form"),c=k("b-button"),m=k("b-modal");return g(),z(m,{modelValue:e.visible,"onUpdate:modelValue":t[1]||(t[1]=h=>e.visible=h),"append-to-body":"",title:"\u4FDD\u5B58\u4E3A\u6A21\u677F",top:"200px","custom-class":"schema-modal",onClose:t[2]||(t[2]=h=>e.visible=!1)},{default:x(()=>[u(d,{"label-width":"80px",ref:"formRef",model:e.formStatus,"label-suffix":":"},{default:x(()=>[u(r,{label:"\u6A21\u677F\u540D\u79F0",prop:"name",rules:{required:!0,message:"\u6A21\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:x(()=>[u(i,{modelValue:e.formStatus.name,"onUpdate:modelValue":t[0]||(t[0]=h=>e.formStatus.name=h)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a("div",$o,[u(c,{type:"primary",icon:"vertical-align-botto",transparent:"",style:{width:"120px"},onClick:e.downloadCfg},{default:x(()=>[E(" \u914D\u7F6E\u6587\u4EF6 ")]),_:1},8,["onClick"]),u(c,{type:"primary",icon:"save",style:{width:"120px"},loading:e.formStatus.loading,onClick:e.saveAsTemplate},{default:x(()=>[E(" \u4FDD\u5B58\u6A21\u677F ")]),_:1},8,["loading","onClick"])])]),_:1},8,["modelValue"])}var Mo=F(So,[["render",Vo]]);const Do={class:"header-container"},Io={class:"left-actions"},To={class:"screen-info"},Ro=a("span",null,"\u5206\u6790\u770B\u677F",-1),Bo=a("span",{style:{padding:"0 8px"}},"-",-1),Lo={class:"global-actions"},No={class:"head-btn"},Eo={__name:"index",props:{backUrl:{type:String},backTarget:{type:String,default:"_self",validator:o=>["_self","_blank"].includes(o)},pageStatus:{type:Object,default:()=>({})}},setup(o,{expose:t}){const n=o,e=it(),{schemaStore:l,storeToRefs:s}=j(),{pageInfo:i,toolbar:r}=s(l),{previewScreen:d}=Ke(),c=R(!1),m=R("edit"),h=R(!1),p=()=>{const S=n.backUrl||"/";if(n.backTarget==="_blank"){const C=e.resolve(S);window.open(C.href,n.backTarget)}else pe.confirm({type:"warning",title:"\u786E\u5B9A\u8FD4\u56DE\u5217\u8868\u5417\uFF1F"}).then(()=>{e.push(S),l.clearStore()}).catch(()=>{})},_=S=>S.type!=="application/json"?(W.warning("\u8BF7\u9009\u62E9\u6B63\u786E\u7684json\u914D\u7F6E\u6587\u4EF6"),!1):(so(S).then(C=>{try{const w=JSON.parse(C),{comps:V,pageConfig:P}=w;l.loadScreenData({comps:V,pageConfig:P})}catch{console.warn("The imported file could not be converted to the correct JSON!")}}),!1),y=()=>{m.value="edit",c.value=!0},b=()=>{m.value="audited",c.value=!0},f=async()=>{const S=await d();let C=e.resolve({path:`/screen/preview/${S.pageInfo.id}`});window.open(C.href,"_blank")};return t({handleSaveScreen:y,handlePublish:b,handPreview:f}),(S,C)=>{const w=k("b-icon"),V=k("b-tooltip"),P=k("b-space"),B=k("b-upload");return g(),$(X,null,[a("div",Do,[a("div",Io,[u(P,{size:"mini"},{default:x(()=>[u(V,{content:"\u7EC4\u4EF6","open-delay":500},{default:x(()=>[a("div",{class:A(["head-btn",{active:v(r).components}]),onClick:C[0]||(C[0]=U=>v(l).toggleCompsPanel())},[u(w,{name:"hourglass",class:A(["com-list-icon",{"is-rotate":!v(r).components}])},null,8,["class"])],2)]),_:1}),u(V,{content:"\u56FE\u5C42","open-delay":500},{default:x(()=>[a("div",{class:A(["head-btn",{active:v(r).layer}]),onClick:C[1]||(C[1]=U=>v(l).toggleLayerPanel())},[u(w,{name:"container"})],2)]),_:1}),u(V,{content:"\u53F3\u4FA7\u9762\u677F","open-delay":500},{default:x(()=>[a("div",{class:A(["head-btn",{active:v(r).config}]),onClick:C[2]||(C[2]=U=>v(l).toggleConfigPanel())},[u(w,{name:"control"})],2)]),_:1}),u(V,{content:"\u5DE5\u5177\u7BB1","open-delay":500},{default:x(()=>[a("div",{class:A(["head-btn",{active:v(r).toolbox}]),onClick:C[3]||(C[3]=U=>v(l).toggleToolbox())},[u(w,{name:"shopping"})],2)]),_:1})]),_:1})]),a("div",To,[u(V,{content:"\u8FD4\u56DE","open-delay":500},{default:x(()=>[u(w,{name:"laptop",type:"button",onClick:p})]),_:1}),Ro,Bo,a("span",null,Q(v(i).name),1)]),a("div",Lo,[u(P,{size:"mini"},{default:x(()=>[u(V,{content:"\u5BFC\u5165json (\u4F1A\u8986\u76D6\u6240\u6709\u5185\u5BB9\uFF01)","open-delay":500},{default:x(()=>[u(B,{action:"/","show-upload-list":!1,"before-upload":_},{default:x(()=>[a("div",No,[u(w,{name:"Import"})])]),_:1})]),_:1}),u(V,{content:"\u4FDD\u5B58\u6A21\u677F","open-delay":500},{default:x(()=>[a("div",{class:"head-btn",onClick:C[4]||(C[4]=U=>h.value=!0)},[u(w,{name:"Storedprocedure"})])]),_:1}),u(V,{content:"\u4FDD\u5B58","open-delay":500},{default:x(()=>[a("div",{class:"head-btn",onClick:y},[u(w,{name:"save"})])]),_:1}),u(V,{content:"\u53D1\u5E03","open-delay":500},{default:x(()=>[a("div",{class:"head-btn",onClick:b},[u(w,{name:"send"})])]),_:1}),u(V,{content:"\u9884\u89C8","open-delay":500},{default:x(()=>[a("div",{class:"head-btn",onClick:f},[u(w,{name:"View"})])]),_:1})]),_:1})])]),u(yo),u(ko,{modelValue:c.value,"onUpdate:modelValue":C[5]||(C[5]=U=>c.value=U),status:m.value},null,8,["modelValue","status"]),u(Mo,{modelValue:h.value,"onUpdate:modelValue":C[6]||(C[6]=U=>h.value=U)},null,8,["modelValue"])],64)}}},he=be({x:0,y:0});function Pe(o={}){const{schemaStore:t,storeToRefs:n}=j(),{contextMenu:e,selectedCom:l}=n(t),s=I(()=>{var m;return(m=l.value)==null?void 0:m.locked}),i=I(()=>{var m;return(m=l.value)==null?void 0:m.hided}),r=I(()=>({display:e.value.show?"block":"none",left:`${he.x+10}px`,top:`${he.y+10}px`,transform:document.documentElement.clientHeight-he.y<250?"translate(0px, -100%)":""})),d=m=>{m.preventDefault(),l.value&&(he.x=m.clientX,he.y=m.clientY,e.value.show=!0,ee(document,"click",c))},c=()=>{te(document,"click",c),o&&o.beforeClose&&o.beforeClose(),e.value.show=!1};return{showMenu:d,isLocked:s,isHided:i,contextMenu:e,contextMenuStyle:r}}const zo={class:"layer-panel"},Uo={class:"layer-top"},Ao=a("div",{class:"layer-num pl-10"},"\u56FE\u5C42",-1),Oo=a("i",{class:"b-iconfont b-icon-left",title:"\u6536\u8D77"},null,-1),Go=[Oo],Yo={class:"layer-toolbar layer-toolbar-top"},jo={class:"layer-manager-wrap"},Ko=["title","onMousedown","onMouseenter","onDblclick"],Po=["onUpdate:modelValue"],Xo={key:1,class:"layer-item-span"},Jo={class:"layer-item-text"},Ho=["title","onClick"],Wo=["title","onClick"],Fo={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{comps:e,toolbar:l,hoveredComId:s,selectedCom:i,renamingComId:r,isMultiSelect:d,selectedComs:c}=n(t),{showMenu:m}=Pe(),h=I(()=>!!i.value),p=I(()=>({opacity:i.value?1:.3}));function _(K){return d.value?c.value.map(D=>D.id).includes(K.id):!De(i.value)&&i.value.id===K.id}const y=I({get:()=>[...e.value].reverse(),set:K=>e.value=K.reverse()}),b=K=>{i.value&&t.moveCom({id:i.value.id,moveType:K})},f=()=>b(re.up),S=()=>b(re.down),C=()=>b(re.top),w=()=>b(re.bottom),V=K=>t.hoverCom(K),P=()=>t.hoverCom(""),B=K=>{const D=e.value.find(O=>O.id===K);D&&t.selectCom(D)},U=()=>t.selectCom();return(K,D)=>{const O=k("b-icon"),T=fe("focus");return g(),$("div",{class:A(["layer-panel-wp",{"is-hide":!v(l).layer}])},[a("div",zo,[a("div",Uo,[Ao,a("div",{class:"layer-action",onClick:D[0]||(D[0]=M=>v(t).toggleLayerPanel(!1))},Go)]),a("div",Yo,[a("i",{title:"\u4E0A\u79FB\u4E00\u5C42",class:A(["b-iconfont b-icon-arrowup toolbar-icon standard",v(h)]),style:J(v(p)),onClick:f},null,6),a("i",{title:"\u4E0B\u79FB\u4E00\u5C42",class:A(["b-iconfont b-icon-arrowdown toolbar-icon standard",v(h)]),style:J(v(p)),onClick:S},null,6),a("i",{title:"\u7F6E\u9876",class:A(["b-iconfont b-icon-vertical-align-botto toolbar-icon standard",v(h)]),style:J({transform:"rotate(180deg)",...v(p)}),onClick:C},null,6),a("i",{title:"\u7F6E\u5E95",class:A(["b-iconfont b-icon-vertical-align-botto toolbar-icon standard",v(h)]),style:J(v(p)),onClick:w},null,6)]),a("div",jo,[u(v(Mt),Vt({modelValue:v(y),"onUpdate:modelValue":D[4]||(D[4]=M=>dt(y)?y.value=M:null),class:"drag-area","item-key":"id"},{animation:200}),{item:x(({element:M})=>[a("div",{title:M.alias,class:A(["layer-manager-item",[{hided:M.hided,locked:M.locked,hovered:M.id===v(s),selected:_(M)}]]),onMousedown:N=>B(M.id),onMouseenter:N=>V(M.id),onMouseleave:P,onDblclick:N=>v(t).renamingCom(M.id),onContextmenu:D[3]||(D[3]=N=>v(m)(N))},[u(O,{name:M.name==="VIcon"?M.config.src:M.icon,size:"18"},null,8,["name"]),M.id===v(r)?le((g(),$("input",{key:0,"onUpdate:modelValue":N=>M.alias=N,class:"layer-item-input",onBlur:D[1]||(D[1]=N=>v(t).renamingCom("")),onKeydown:D[2]||(D[2]=ye(N=>v(t).renamingCom(""),["enter"]))},null,40,Po)),[[rt,M.alias,void 0,{trim:!0}],[T]]):(g(),$("span",Xo,[a("span",Jo,Q(M.alias),1)])),a("i",{class:A(["b-iconfont",`b-icon-${M.hided?"eye-close":"eye"}`,"show-toggle-btn"]),title:M.hided?"\u663E\u793A":"\u9690\u85CF",onClick:N=>M.hided=!M.hided},null,10,Ho),a("i",{class:A(["b-iconfont",`b-icon-${M.locked?"lock":"unlock"}`,"show-toggle-btn"]),title:M.locked?"\u89E3\u9501":"\u9501\u5B9A",onClick:N=>M.locked=!M.locked},null,10,Wo)],42,Ko)]),_:1},16,["modelValue"]),a("div",{class:"last-flex-item",onClick:U})])])],2)}}},qo={name:"VBasicBar",alias:"\u67F1\u56FE",img:G("basic-bar.svg")},Zo={name:"VHorizontalBar",alias:"\u6761\u5F62\u56FE",img:G("hori-basic-bar.svg")},Qo={name:"VCapsuleBar",alias:"\u80F6\u56CA\u67F1\u56FE",img:G("capsule-bar.svg")},ea={name:"VBasicLine",alias:"\u6298\u7EBF\u56FE",img:G("basic-line.svg")},ta={name:"VBasicArea",alias:"\u533A\u57DF\u56FE",img:G("basic-area.svg")},oa={name:"VBasicPie",alias:"\u997C\u56FE",img:G("basic-pie.svg")},aa={name:"VBasicRing",alias:"\u73AF\u56FE",img:G("basic-ring.svg")},na={name:"VBasicRadar",alias:"\u96F7\u8FBE\u56FE",img:G("basic-radar.svg")},sa={name:"VBasicMap",alias:"\u4E2D\u56FD\u5730\u56FE",img:G("2d-china.svg")},la={name:"VBasicMapEvo",alias:"\u6CB3\u5317\u7701\u5730\u56FE",img:G("basic-map-evo.svg")},ca={name:"VBasicScatter",alias:"\u6563\u70B9\u56FE",img:G("basic-scatter.svg")},ia={name:"VLineBasicScatter",alias:"\u6563\u70B9\u7EBF\u56FE",img:G("line-basic-scatter.svg")},ra={name:"VBasicBoxplot",alias:"\u76D2\u987B\u56FE",img:G("basic-boxplot.svg")},da={name:"VBasicFunnel",alias:"\u68AF\u5EA6\u56FE",img:G("basic-funnel.svg")},ua={name:"VBasicWordCloud",alias:"\u8BCD\u4E91\u56FE",img:G("basic-wordcloud.svg")},ma={name:"VBasicGauge",alias:"\u4EEA\u8868\u76D8",img:G("basic-gauge.svg")},pa={name:"VProgressCircle",alias:"\u8FDB\u5EA6\u73AF",img:G("pie-one-value.svg")},va={name:"VNumberTitleFlop",alias:"\u6570\u5B57\u6307\u6807",img:G("number-title-flop.svg")},fa={name:"VTimer",alias:"\u65F6\u95F4\u5668",img:G("timer.svg")},_a={name:"VSelect",alias:"\u4E0B\u62C9\u63A7\u4EF6",img:G("select.svg")},ha={name:"VMainTitle",alias:"\u6807\u9898",img:G("main-title.svg")},ga={name:"VBgBox",alias:"\u80CC\u666F\u5757",img:G("bg-box.svg")},ba={name:"VBorderBox",alias:"\u8FB9\u6846",img:G("border-box.svg")},ya={name:"VMainImg",alias:"\u5355\u5F20\u56FE\u7247",img:G("img.svg")},Ca={name:"VIcon",alias:"\u56FE\u6807",img:G("icon.svg")},xa={name:"VScrollTable",alias:"\u6EDA\u52A8\u8868\u683C",img:G("scroll-table.svg")},wa={name:"VEarth3d",alias:"\u70B9\u9635\u5730\u7403",img:G("earth.jpg")},ka={name:"VLightEarth3d",alias:"\u53D1\u5149\u5730\u7403",img:G("light-earth.jpg")},Sa={name:"VCube3d",alias:"3d\u7ACB\u65B9\u4F53",img:G("cube.jpg")},$a={name:"VBuilding3d",alias:"\u5EFA\u7B51\u626B\u63CF",img:G("building.jpg")},Se=[{type:"basic",name:"\u57FA\u7840",icon:"block",group:[],comps:[ha,ga,ya,ba,Ca]},{type:"analysis",name:"\u5206\u6790",icon:"barchart",group:[{name:"\u6307\u6807",comps:[va,pa]},{name:"\u67F1\u56FE",comps:[qo,Zo,Qo]},{name:"\u7EBF\u56FE",comps:[ea,ta]},{name:"\u997C\u56FE",comps:[oa,aa]},{name:"\u6563\u70B9\u56FE",comps:[ca,ia]},{name:"\u96F7\u8FBE\u56FE",comps:[na]},{name:"\u5730\u56FE",comps:[sa,la]},{name:"\u5176\u4ED6\u56FE\u8868",comps:[ra,da,ua,ma]}],comps:[]},{type:"control",name:"\u63A7\u4EF6",icon:"edit-square",group:[],comps:[_a,fa]},{type:"table",name:"\u8868\u683C",icon:"table",group:[],comps:[xa]},{type:"3D",name:"3D",icon:"earth",group:[],comps:[wa,ka,Sa,$a]},{type:"images",name:"\u56FE\u7247",icon:"image",group:[],comps:[]},{type:"comps",name:"\u7EC4\u4EF6",icon:"CodeSandbox",group:[],comps:[]}];function Va(o){const t=[];return Se.forEach(n=>{t.push(...n.comps),n.group.forEach(e=>{t.push(...e.comps)})}),t.find(n=>n.name===o)}const Ma={key:0,class:"comp-wrap"},Da=["title"],Ia={class:"inner"},Ta=["onDragstart","onClick"],Ra=["src"],Ba={class:"comp-item-text"},La={__name:"comps",props:{comps:{type:Array,default:()=>[]}},emits:["dragstart","click"],setup(o,{emit:t}){const n=(l,s)=>t("dragstart",l,s),e=l=>t("click",l);return(l,s)=>o.comps.length>0?(g(),$("div",Ma,[(g(!0),$(X,null,ae(o.comps,(i,r)=>(g(),$("div",{class:"comp-item",key:r,title:i.alias},[a("div",Ia,[a("div",{class:"comp-item-img",draggable:!0,onDragstart:d=>n(d,i.name),onClick:d=>e(i.name)},[a("img",{src:i.img},null,8,Ra)],40,Ta),a("div",Ba,Q(i.alias),1)])],8,Da))),128))])):Y("",!0)}};var ot=F(La,[["__scopeId","data-v-23a6401e"]]);function Xe(){const o=Dt(),t=R("");function n(e){t.value===e?t.value="":t.value=e}o.on("item-click",n),It("collapse",{activeGroupKey:t,collapseMitt:o})}function Na(o){const t=Tt("collapse"),n=t==null?void 0:t.collapseMitt,e=I(()=>(t==null?void 0:t.activeGroupKey.value)===o.name);function l(s){n==null||n.emit("item-click",s)}return{isActive:e,triggerClick:l}}const Ea={class:"collapse-group"},za={class:"name"},Ua={class:"wrap-label"},Aa={key:1},Oa={key:0,class:"wrap-edit"},Ga=["onClick"],Ya=["onClick"],ja={class:"content"},Ka={__name:"collapse",props:{title:{type:String,required:!0},name:{type:[String,Number,Object],required:!0},canEdit:{type:Boolean,default:!1}},emits:["edit","remove"],setup(o,{emit:t}){const n=o,{isActive:e,triggerClick:l}=Na(n),s=R(!1),i=R("");let r="";function d(){l(n.name)}function c(){s.value=!0,i.value=n.title,r=n.title}function m(y){const b=(y.target.value||"").trim();(!b||b===r)&&(s.value=!1)}function h(y){(y.target.value||"").trim()?p():s.value=!1}function p(){s.value=!1,t("edit",i.value)}const _=()=>t("remove");return(y,b)=>{const f=k("b-input"),S=k("b-icon"),C=k("b-collapse-transition"),w=fe("focus");return g(),$("div",Ea,[a("div",{class:A(["header",[{active:v(e)}]]),flex:"cross:center",onClick:d},[a("div",za,[a("div",Ua,[s.value?(g(),$("div",{key:0,class:"create-box",onClick:b[1]||(b[1]=oe(()=>{},["stop"]))},[le(u(f,{modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=V=>i.value=V),placeholder:"\u8F93\u5165\u540D\u79F0\uFF0C\u56DE\u8F66\u521B\u5EFA",size:"mini",style:{width:"150px",top:"-2px"},onBlur:m,onKeyup:ye(h,["enter"])},null,8,["modelValue","onKeyup"]),[[w]])])):(g(),$("div",Aa,Q(o.title),1))]),o.canEdit&&!s.value?(g(),$("span",Oa,[a("i",{class:"b-iconfont b-icon-edit",onClick:oe(c,["stop"])},null,8,Ga),a("i",{class:"b-iconfont b-icon-delete",onClick:oe(_,["stop"])},null,8,Ya)])):Y("",!0),a("span",{class:A(["wrap-arrow",[{active:v(e)}]])},[u(S,{name:"right",size:"12"})],2)])],2),u(C,null,{default:x(()=>[le(a("div",ja,[ze(y.$slots,"default",{},void 0,!0)],512),[[Ue,v(e)]])]),_:3})])}}};var Je=F(Ka,[["__scopeId","data-v-ead41a62"]]);const Pa={class:"group-comps"},Xa={class:"comp-wrap"},Ja={key:0,class:"comp-item img-add"},Ha={class:"inner"},Wa={class:"comp-item-img"},Fa={class:"inner"},qa=["onDragstart","onClick"],Za={key:0,class:"hover-layer"},Qa=["onClick"],en=["title"],tn={__name:"images-item",props:{groupId:{type:String,required:!0}},emits:["dragstart","click"],setup(o,{emit:t}){const n=o,e=R([]),l=I(()=>!je.includes(n.groupId)),s=()=>io(n.groupId).then(m=>e.value=m);s();async function i(m){try{H(!0);const h=m.map(p=>({group:n.groupId,name:p.name,attr:{w:p.width,h:p.height},src:p.image}));await ro(h),s()}catch(h){console.log(h)}H(!1)}async function r({group:m,id:h}){try{H(!0),await uo(m,h),s()}catch(p){console.log(p)}H(!1)}const d=(m,h)=>t("dragstart",m,h),c=m=>t("click",m);return(m,h)=>{const p=k("g-upload"),_=fe("lazy");return g(),$("div",Pa,[a("div",Xa,[v(l)?(g(),$("div",Ja,[a("div",Ha,[a("div",Wa,[u(p,{onUpload:i,multiple:""})])])])):Y("",!0),(g(!0),$(X,null,ae(e.value,(y,b)=>(g(),$("div",{class:"comp-item",key:b},[a("div",Fa,[a("div",{class:A(["comp-item-img",{"can-edit":v(l)}]),draggable:!0,onDragstart:f=>d(f,y),onClick:f=>c(y)},[le(a("img",null,null,512),[[_,y.src]]),v(l)?(g(),$("div",Za,[a("i",{class:"b-iconfont b-icon-delete-fill",title:"\u5220\u9664\u56FE\u7247",onClick:oe(f=>r(y),["stop"])},null,8,Qa)])):Y("",!0)],42,qa),a("div",{class:"comp-item-text",title:JSON.stringify(y,null,2)},Q(y.name),9,en)])]))),128))])])}}};var on=F(tn,[["__scopeId","data-v-bc0f8576"]]);const an={class:"group-wrap"},nn={class:"group-list"},sn={key:0,class:"create-box"},ln={class:"create-group"},cn={__name:"images-list",emits:["dragstart","click"],setup(o,{emit:t}){const n=R([]);Xe();const e=R({key:"",value:""}),l=be({create:!1,edit:!1}),s=()=>mo().then(_=>n.value=_);s();function i(){e.value={key:`group_images_${me()}`,value:""},l.create=!0}function r(_){if(!l.create)return;(_.target.value||"").trim()?m():l.create=!1}async function d(_,y){try{H(!0);const b={key:_.key,value:y};await po(b),s(),W.success("\u4FEE\u6539\u6210\u529F")}catch(b){console.log(b)}H(!1)}async function c(_){try{await pe.confirm({type:"error",title:"\u786E\u5B9A\u79FB\u9664\u5F53\u524D\u56FE\u7247\u5206\u7EC4\u5417\uFF1F"}),H(!0),await vo(_.key),s(),W.success("\u5220\u9664\u6210\u529F\uFF01")}catch(y){console.log(y)}H(!1)}async function m(){try{H(!0),await fo(e.value),s(),l.create=!1,W.success("\u65B0\u589E\u6210\u529F\uFF01")}catch(_){console.log(_)}H(!1)}const h=(_,y)=>t("dragstart",_,y),p=_=>t("click",_);return(_,y)=>{const b=k("b-input"),f=k("b-scrollbar"),S=k("b-button"),C=fe("focus");return g(),$("div",an,[a("div",nn,[u(f,{native:""},{default:x(()=>[(g(!0),$(X,null,ae(n.value,w=>(g(),z(Je,{key:w.key,name:w.key,title:w.value,"can-edit":!v(je).includes(w.key),onEdit:V=>d(w,V),onRemove:V=>c(w)},{default:x(()=>[u(on,{"group-id":w.key,onDragstart:h,onClick:p},null,8,["group-id"])]),_:2},1032,["name","title","can-edit","onEdit","onRemove"]))),128)),l.create?(g(),$("div",sn,[le(u(b,{modelValue:e.value.value,"onUpdate:modelValue":y[0]||(y[0]=w=>e.value.value=w),placeholder:"\u8F93\u5165\u540D\u79F0\uFF0C\u56DE\u8F66\u521B\u5EFA",size:"small",onBlur:r,onKeyup:ye(r,["enter"])},null,8,["modelValue","onKeyup"]),[[C]])])):Y("",!0)]),_:1})]),a("div",ln,[u(S,{type:"primary",transparent:"",onClick:i},{default:x(()=>[E("\u521B\u5EFA\u56FE\u7247\u5206\u7EC4")]),_:1})])])}}};var rn=F(cn,[["__scopeId","data-v-74e445e6"]]);const vt=[];vt.map(o=>o.key);const ft="COMPS_GROUP",_t="COMPS_LIB",Te=async()=>Ve.getItem(ft),Re=async o=>Ve.setItem(ft,Ie(o)),He=async()=>Ve.getItem(_t),Ne=async o=>Ve.setItem(_t,Ie(o));async function ht(){try{const o=await Te();if(o)return o;const t=Ie(vt);return await Re(t),t}catch{return[]}}async function dn(o){try{const t=await Te();return t?(t.push(o),await Re(t),!0):!1}catch{return!1}}async function un(o){try{const t=await Te();if(t){const n=Ye(t,o.key,"key");return t[n].value=o.value,await Re(t),o.key}return!1}catch{return!1}}async function mn(o){try{const t=await Te();if(t){const n=Ye(t,o,"key");return t.splice(n,1),await Re(t),!0}return!1}catch{return!1}}async function pn(o,t,n){try{const e={id:jt(),group:o,comp:t,src:n},l=await He();return l?(l.push(e),await Ne(l),!0):(await Ne([e]),!1)}catch{return!1}}async function vn(o){try{const t=await He();return t?t.filter(n=>n.group===o):[]}catch{return[]}}async function fn(o,t){try{const n=await He();if(n){const e=n.filter(s=>s.group===o),l=Ye(e,t);return e.splice(l,1),await Ne(e),!0}return!1}catch{return!1}}const _n={class:"group-comps"},hn={key:1,class:"comp-wrap"},gn={class:"inner"},bn=["onDragstart","onClick"],yn={class:"hover-layer"},Cn=["onClick"],xn={class:"comp-item-text"},wn={__name:"comp-item",props:{groupId:{type:String,required:!0}},emits:["dragstart","click"],setup(o,{emit:t}){const n=o,e=R([]),l=()=>vn(n.groupId).then(d=>e.value=d);l();async function s({group:d,id:c}){try{H(!0),await fn(d,c),l()}catch(m){console.log(m)}H(!1)}const i=(d,c)=>t("dragstart",d,c),r=d=>t("click",d);return(d,c)=>{const m=k("b-empty"),h=fe("lazy");return g(),$("div",_n,[e.value.length===0?(g(),z(m,{key:0},{default:x(()=>[E("\u6682\u65E0\u7EC4\u4EF6")]),_:1})):(g(),$("div",hn,[(g(!0),$(X,null,ae(e.value,(p,_)=>(g(),$("div",{class:"comp-item",key:_},[a("div",gn,[a("div",{class:"comp-item-img",draggable:!0,onDragstart:y=>i(y,p.comp),onClick:y=>r(p.comp)},[le(a("img",null,null,512),[[h,p.src]]),a("div",yn,[a("i",{class:"b-iconfont b-icon-delete-fill",title:"\u5220\u9664\u56FE\u7247",onClick:oe(y=>s(p),["stop"])},null,8,Cn)])],40,bn),a("div",xn,Q(p.comp.alias),1)])]))),128))]))])}}};var kn=F(wn,[["__scopeId","data-v-c2ee8224"]]);const Sn={class:"group-wrap"},$n={class:"group-list"},Vn={key:1,class:"create-box"},Mn={class:"create-group"},Dn={__name:"comp-list",emits:["dragstart","click"],setup(o,{emit:t}){const n=R([]);Xe();const e=R({key:"",value:""}),l=be({create:!1,edit:!1}),s=()=>ht().then(_=>n.value=_);s();function i(){e.value={key:`group_comp_${me()}`,value:""},l.create=!0}function r(_){if(!l.create)return;(_.target.value||"").trim()?m():l.create=!1}async function d(_,y){try{H(!0);const b={key:_.key,value:y};await un(b),s(),W.success("\u4FEE\u6539\u6210\u529F")}catch(b){console.log(b)}H(!1)}async function c(_){try{H(!0),await pe.confirm({type:"error",title:"\u786E\u5B9A\u79FB\u9664\u5F53\u524D\u7EC4\u4EF6\u5E93\u5417\uFF1F"}),await mn(_.key),s(),W.success("\u5220\u9664\u6210\u529F\uFF01")}catch(y){console.log(y)}H(!1)}async function m(){try{H(!0),await dn(e.value),s(),l.create=!1,W.success("\u65B0\u589E\u6210\u529F\uFF01")}catch(_){console.log(_)}H(!1)}const h=(_,y)=>t("dragstart",_,y),p=_=>t("click",_);return(_,y)=>{const b=k("b-empty"),f=k("b-input"),S=k("b-scrollbar"),C=k("b-button"),w=fe("focus");return g(),$("div",Sn,[a("div",$n,[u(S,{native:""},{default:x(()=>[n.value.length===0?(g(),z(b,{key:0},{default:x(()=>[E("\u6682\u65E0\u7EC4\u4EF6\u5E93")]),_:1})):Y("",!0),(g(!0),$(X,null,ae(n.value,V=>(g(),z(Je,{key:V.key,name:V.key,title:V.value,"can-edit":!v(je).includes(V.key),onEdit:P=>d(V,P),onRemove:P=>c(V)},{default:x(()=>[u(kn,{"group-id":V.key,onDragstart:h,onClick:p},null,8,["group-id"])]),_:2},1032,["name","title","can-edit","onEdit","onRemove"]))),128)),l.create?(g(),$("div",Vn,[le(u(f,{modelValue:e.value.value,"onUpdate:modelValue":y[0]||(y[0]=V=>e.value.value=V),placeholder:"\u8F93\u5165\u540D\u79F0\uFF0C\u56DE\u8F66\u521B\u5EFA",size:"small",onBlur:r,onKeyup:ye(r,["enter"])},null,8,["modelValue","onKeyup"]),[[w]])])):Y("",!0)]),_:1})]),a("div",Mn,[u(C,{type:"primary",transparent:"",onClick:i},{default:x(()=>[E("\u521B\u5EFA\u7EC4\u4EF6\u5E93")]),_:1})])])}}};var In=F(Dn,[["__scopeId","data-v-47c3cece"]]);const Tn={class:"components-panel-wp"},Rn={class:"components-panel"},Bn=a("div",{class:"panel-title"},[a("span",{class:"panel-text"},"\u7EC4\u4EF6")],-1),Ln={class:"components-type"},Nn=["onClick"],En={class:"com-tab-title"},zn=a("i",{class:"b-iconfont b-icon-left",title:"\u6536\u8D77"},null,-1),Un=[zn],An={class:"components-list-content"},On={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{pageConfig:e,toolbar:l,selectedCom:s}=n(t),i=R(-1);Xe();const r=I(()=>i.value===-1?[]:Se[i.value].group),d=I(()=>i.value===-1?[]:Se[i.value].comps);function c(C){t.toggleCompsPanel(!0),i.value=C}function m(C,w){C.dataTransfer.setData("normal-comp",w)}async function h(C){try{const w=mt(C);if(w.attr.x=Math.floor((e.value.width-w.attr.w)/2),w.attr.y=Math.floor((e.value.height-w.attr.h)/2),t.addCom({component:w}),t.selectCom(w),w.apiData&&w.apiData.type===Ae.static&&w.apiData.staticPath){const{data:V}=await pt(w.id,w.apiData.staticPath);s.value.apiData.config.data=JSON.stringify(V)}}catch(w){console.log(w)}}function p(C,w){C.dataTransfer.setData("image-comp",JSON.stringify(Ze(w)))}function _(C){const w=Ze(C);w.attr.x=Math.floor((e.value.width-w.attr.w)/2),w.attr.y=Math.floor((e.value.height-w.attr.h)/2),t.addCom({component:w}),t.selectCom(w)}function y(C,w){C.dataTransfer.setData("custom-comp",JSON.stringify(Qe(w)))}function b(C){const w=Qe(C);t.addCom({component:w}),t.selectCom(w)}function f(C){C.preventDefault(),C.stopPropagation(),C.dataTransfer.dropEffect="none"}function S(){l.value.components&&(t.toggleCompsPanel(!1),i.value=-1)}return(C,w)=>{const V=k("b-icon"),P=k("b-scrollbar");return g(),$("div",Tn,[a("div",Rn,[Bn,a("div",{class:"components-panel-content",onDragover:f},[a("div",Ln,[u(P,{native:""},{default:x(()=>[(g(!0),$(X,null,ae(v(Se),(B,U)=>(g(),$("div",{class:A(["components-item",{active:i.value===U}]),key:U,onClick:K=>c(U)},[u(V,{class:"com-tab-icon",name:B.icon},null,8,["name"]),a("span",En,Q(B.name),1)],10,Nn))),128))]),_:1})])],32),a("div",{class:A(["components-list",{"is-hide":!v(l).components}])},[a("div",{class:"components-list-top"},[a("div",{class:"action",onClick:S},Un)]),a("div",An,[u(P,{native:""},{default:x(()=>[(g(!0),$(X,null,ae(v(r),(B,U)=>(g(),z(Je,{key:U,name:U,title:B.name},{default:x(()=>[u(ot,{comps:B.comps,onDragstart:m,onClick:h},null,8,["comps"])]),_:2},1032,["name","title"]))),128)),u(ot,{comps:v(d),onDragstart:m,onClick:h},null,8,["comps"]),i.value===5?(g(),z(rn,{key:0,onDragstart:p,onClick:_})):Y("",!0),i.value===6?(g(),z(In,{key:1,onDragstart:y,onClick:b})):Y("",!0)]),_:1})])],2)])])}}},at=o=>`${o}px`,nt=(o,t,n,e)=>{const l=o!=null?o:document.createElement("canvas");l.width=t*e,l.height=n*e,l.style.width=at(t),l.style.height=at(n);const s=l.getContext("2d");return s&&s.setTransform(e,0,0,e,0,0),l};class st{constructor(t,n){this.el=t,this.options={direction:"TB",width:1e3,height:20,bgColor:"#0e1013",fontFamily:"sans-serif",fontSize:"10px",fontColor:"#90a0ae",strokeStyle:"rgba(161, 174, 179, 0.8)",lineWidth:.5,indicatorLineWidth:1,scale:1,offset:40,ratio:2,...n},this.canvas=null,this.ctx=null,this.ruler={width:0,height:0},this.constructRuler()}constructRuler(){const{el:t,options:n}=this,{direction:e,width:l,height:s,ratio:i}=n,r=Math.max(e==="TB"?t.offsetWidth:t.offsetHeight,l),d=s;this.ruler.width=r,this.ruler.height=d;const c=nt(null,r,d,i);Kt(c,"canvas-ruler"),t.appendChild(c),this.canvas=c,this.ctx=c.getContext("2d"),this.drawRuler()}drawRuler(){const{ctx:t,options:n,ruler:e}=this,{width:l,height:s}=e;t.beginPath(),t.fillStyle=n.bgColor,t.fillRect(0,0,l,s),t.closePath(),t.beginPath(),t.font=`${n.fontSize} ${n.fontFamily}`,t.textAlign="left",t.fillStyle=n.fontColor,t.strokeStyle=n.strokeStyle,t.lineWidth=n.lineWidth,this.drawPoints(),t.stroke()}drawPoints(){const{ctx:t,options:n,ruler:e}=this,{width:l,height:s}=e,{offset:i,scale:r}=n,d=0,c=s/1.5,m=s/1.2;for(let h=0;h<=l;h+=1){const p=h-i;if(p<0)continue;let _=-1,y=-1;p%50===0?(_=Math.floor(p/r),y=d):p%25===0?y=c:p%5===0&&(y=m),y>=0&&(t.moveTo(h+.5,s+.5),t.lineTo(h+.5,y),_>-1&&t.fillText(`${_}`,h+2.5,s/1.5))}}setSize(t,n,e){const{el:l,options:s}=this;s.width=t,s.height=n,s.scale=e;const{direction:i,width:r,height:d,ratio:c}=s,m=Math.max(i==="TB"?l.offsetWidth:l.offsetHeight,r),h=d;this.ruler.width=m,this.ruler.height=h,nt(this.canvas,m,h,c),this.drawRuler()}destroy(){const{el:t}=this;t.remove()}}const Gn={name:"ruler",setup(){const{schemaStore:o,storeToRefs:t}=j(),{canvas:n}=t(o),e=R(null),l=R(null),s=R(null),i=R(null),r=R(!0),d=R(0),c=R(0),m=document.documentElement.clientWidth;Rt(()=>{if(e.value&&l.value){const p=Math.max(n.value.width,m);s.value?s.value.setSize(p,18,n.value.scale):s.value=new st(e.value,{direction:"TB",width:p,scale:n.value.scale}),i.value?i.value.setSize(n.value.height,18,n.value.scale):i.value=new st(l.value,{direction:"LR",width:n.value.height,scale:n.value.scale})}});const h=p=>{const _=p.target;d.value=_.scrollLeft,c.value=_.scrollTop};return Ce(()=>{const p=document.getElementById("canvas-wp");p==null||p.addEventListener("scroll",h)}),Bt(()=>{const p=document.getElementById("canvas-wp");p==null||p.removeEventListener("scroll",h)}),{visible:r,hRulerWpRef:e,vRulerWpRef:l,vScroll:c,hScroll:d}}},Yn=o=>(xe("data-v-5f454e16"),o=o(),we(),o),jn={class:"canvas-ruler-wp"},Kn=Yn(()=>a("div",{class:"ruler-corner"},null,-1));function Pn(o,t,n,e,l,s){return g(),$("div",jn,[a("div",{ref:"hRulerWpRef",class:"ruler-wrapper h-container",style:J(`transform: translateX(-${e.hScroll}px);`)},null,4),a("div",{ref:"vRulerWpRef",class:"ruler-wrapper v-container",style:J(`transform: rotate(90deg) translateX(-${e.vScroll}px);`)},null,4),Kn])}var Xn=F(Gn,[["render",Pn],["__scopeId","data-v-5f454e16"]]);function lt(o){if(o={...o},o.rotate!==0){const t=o.width*et(o.rotate)+o.height*tt(o.rotate),n=(o.width-t)/2;o.left+=n,o.right=o.left+t;const e=o.height*et(o.rotate)+o.width*tt(o.rotate),l=(e-o.height)/2;o.top-=l,o.bottom=o.top+e,o.width=t,o.height=e}else o.bottom=o.top+o.height,o.right=o.left+o.width;return o}const Jn=5,Hn={name:"mark-line",setup(){const{schemaStore:o,storeToRefs:t}=j(),{comps:n,selectedCom:e,canvas:l,toolbox:s}=t(o),i=R([]),r=R(["xt","xc","xb","yl","yc","yr"]),d=R({xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}),c=()=>{Object.keys(d.value).forEach(f=>{d.value[f]=!1})};function m({key:f,value:S}){const C={left:"x",top:"y"};o.setShapeSingleStyle({key:C[f],value:S})}const h=(f,S)=>{const C=i.value,w=e.value,V=n.value.filter(D=>!D.hided),P=l.value.scale,B=lt(y(w.attr)),U=B.width/2,K=B.height/2;c(),V.forEach(D=>{if(D.id===w.id||D.locked||D.hided)return;const{top:O,left:T,bottom:M,right:N,width:Z,height:L}=lt(y(D.attr)),se=Z/2,ie=L/2,ne={top:[{isNearly:b(B.top,O),lineNode:C.xt,line:"xt",dragShift:O,lineShift:O},{isNearly:b(B.bottom,O),lineNode:C.xt,line:"xt",dragShift:O-B.height,lineShift:O},{isNearly:b(B.top+K,O+ie),lineNode:C.xc,line:"xc",dragShift:O+ie-K,lineShift:O+ie},{isNearly:b(B.top,M),lineNode:C.xb,line:"xb",dragShift:M,lineShift:M},{isNearly:b(B.bottom,M),lineNode:C.xb,line:"xb",dragShift:M-B.height,lineShift:M}],left:[{isNearly:b(B.left,T),lineNode:C.yl,line:"yl",dragShift:T,lineShift:T},{isNearly:b(B.right,T),lineNode:C.yl,line:"yl",dragShift:T-B.width,lineShift:T},{isNearly:b(B.left+U,T+se),lineNode:C.yc,line:"yc",dragShift:T+se-U,lineShift:T+se},{isNearly:b(B.left,N),lineNode:C.yr,line:"yr",dragShift:N,lineShift:N},{isNearly:b(B.right,N),lineNode:C.yr,line:"yr",dragShift:N-B.width,lineShift:N}]},_e=[],{rotate:Le}=B;Object.keys(ne).forEach(ue=>{ne[ue].forEach(ce=>{if(!ce.isNearly)return;const ke=Le!==0?p(ue,ce,B):ce.dragShift;m({key:ue,value:ke}),ce.lineNode.style[ue]=`${ce.lineShift*P+60}px`,_e.push(ce.line)})}),_e.length&&_(_e,f,S)})},p=(f,S,C)=>{const{w,h:V}=e.value.attr;return Math.round(f==="top"?S.dragShift-(V-C.height)/2:S.dragShift-(w-C.width)/2)},_=(f,S,C)=>{C?f.includes("yr")?d.value.yr=!0:f.includes("yc")?d.value.yc=!0:f.includes("yl")&&(d.value.yl=!0):f.includes("yl")?d.value.yl=!0:f.includes("yc")?d.value.yc=!0:f.includes("yr")&&(d.value.yr=!0),S?f.includes("xb")?d.value.xb=!0:f.includes("xc")?d.value.xc=!0:f.includes("xt")&&(d.value.xt=!0):f.includes("xt")?d.value.xt=!0:f.includes("xc")?d.value.xc=!0:f.includes("xb")&&(d.value.xb=!0)},y=f=>({left:f.x,top:f.y,width:f.w,height:f.h,rotate:f.rotate}),b=(f,S)=>Math.abs(f-S)<=Jn;return Ce(()=>{de.on("move",({isDownward:f,isRightward:S})=>{s.value.markLine&&h(f,S)}),de.on("unmove",()=>{c()})}),Me(()=>{de.off("move"),de.off("unmove")}),{lineRefs:i,lines:r,lineStatus:d}}},Wn={class:"mark-line"};function Fn(o,t,n,e,l,s){return g(),$("div",Wn,[(g(!0),$(X,null,ae(e.lines,i=>le((g(),$("div",{key:i,class:A(["line",[i.includes("x")?"xline":"yline",i]]),ref_for:!0,ref:r=>{e.lineRefs[i]=r}},null,2)),[[Ue,e.lineStatus[i]||!1]])),128))])}var qn=F(Hn,[["render",Fn],["__scopeId","data-v-00d4450a"]]);const{schemaStore:gt}=j(),Zn=[{direction:"lt",angle:0},{direction:"t",angle:45},{direction:"rt",angle:90},{direction:"r",angle:135},{direction:"rb",angle:180},{direction:"b",angle:225},{direction:"lb",angle:270},{direction:"l",angle:315}],ct=[{start:338,end:23,cursor:"nwse-resize"},{start:23,end:68,cursor:"ns-resize"},{start:68,end:113,cursor:"nesw-resize"},{start:113,end:158,cursor:"ew-resize"},{start:158,end:203,cursor:"nwse-resize"},{start:203,end:248,cursor:"ns-resize"},{start:248,end:293,cursor:"nesw-resize"},{start:293,end:338,cursor:"ew-resize"}],Qn=o=>{const t=(o+360)%360,n={};let e=-1;return Zn.forEach(l=>{const s=(l.angle+t)%360,i=ct.length,r=0;for(;r<i;){e=(e+1)%i;const d=ct[e];if(s<23||s>=338){n[l.direction]="nwse-resize";break}if(d.start<=s&&s<d.end){n[l.direction]=d.cursor;break}}}),n};function es(o,t,n,e,l,s,i){o==="t"?(s.h=Math.round(t.h+(n.y-e.y)/l),s.y=Math.round(t.y+(e.y-n.y)/l),s.h=Math.max(s.h,20),t.lockedRatio&&(s.w=s.h*i)):o==="rt"?(s.h=Math.round(t.h+(n.y-e.y)/l),s.w=Math.round(t.w+(e.x-n.x)/l),s.y=Math.round(t.y+(e.y-n.y)/l),s.w=Math.max(s.w,20),s.h=Math.max(s.h,20),t.lockedRatio&&(s.w=s.h*i)):o==="r"?(s.w=Math.round(t.w+(e.x-n.x)/l),s.w=Math.max(s.w,20),t.lockedRatio&&(s.h=s.w/i)):o==="rb"?(s.h=Math.round(t.h+(e.y-n.y)/l),s.w=Math.round(t.w+(e.x-n.x)/l),s.w=Math.max(s.w,20),s.h=Math.max(s.h,20),t.lockedRatio&&(s.h=s.w/i)):o==="b"?(s.h=Math.round(t.h+(e.y-n.y)/l),s.h=Math.max(s.h,20),t.lockedRatio&&(s.w=s.h*i)):o==="lb"?(s.h=Math.round(t.h+(e.y-n.y)/l),s.w=Math.round(t.w+(n.x-e.x)/l),s.x=Math.round(t.x+(e.x-n.x)/l),s.w=Math.max(s.w,20),s.h=Math.max(s.h,20),t.lockedRatio&&(s.h=s.w/i)):o==="l"?(s.w=Math.round(t.w+(n.x-e.x)/l),s.x=Math.round(t.x+(e.x-n.x)/l),s.w=Math.max(s.w,20),t.lockedRatio&&(s.h=s.w/i)):o==="lt"&&(s.h=Math.round(t.h+(n.y-e.y)/l),s.w=Math.round(t.w+(n.x-e.x)/l),s.w=Math.max(s.w,20),s.h=Math.max(s.h,20),s.x=Math.round(t.x+(e.x-n.x)/l),s.y=Math.round(t.y+(e.y-n.y)/l),t.lockedRatio&&(s.h=s.w/i,s.y=Math.round(t.y+(e.x-n.x)/l)))}const bt=(o,t,n,e,l)=>{const s={...n.attr},i=s.w/s.h,r=Object.create(null),d=o.clientX,c=o.clientY;let m=!1;const h=_=>{const y=_.clientX,b=_.clientY,f=Math.round((y-d)/e/l)*l,S=Math.round((b-c)/e/l)*l;m=Math.abs(f)>=1||Math.abs(S)>=1,t?es(t,s,{x:d,y:c},{x:y,y:b},e,r,i):(r.x=s.x+f,r.y=s.y+S),n.attr={...n.attr,...r},ge().then(()=>{de.emit("move",{isDownward:b-c>0,isRightward:y-d>0})})},p=()=>{de.emit("unmove"),m&&gt.recordSnapshot(),te(document,"mousemove",h),te(document,"mouseup",p)};ee(document,"mousemove",h),ee(document,"mouseup",p)},ts=(o,t,n,e)=>{bt(o,null,t,n,e)},os=(o,t,n,e,l)=>{bt(o,t,n,e,l)},as=(o,t,n)=>{const e=t.getBoundingClientRect(),l=e.left+e.width/2,s=e.top+e.height/2,i=Math.atan2(s-o.clientY,l-o.clientX)*180/Math.PI-n.attr.rotate;let r=!1;const d=m=>{r=!0;const h=Math.atan2(s-m.clientY,l-m.clientX)*180/Math.PI-i,p=Math.round(h%360);n.attr.rotate=p<0?p+360:p},c=()=>{r&&gt.recordSnapshot(),te(document,"mousemove",d),te(document,"mouseup",c)};ee(document,"mousemove",d),ee(document,"mouseup",c)},ns={name:"refer-line",props:{attr:{type:Object,required:!0},scale:{type:Number,required:!0}},setup(o){const t=I(()=>({height:`${o.attr.y+60/o.scale}px`,borderLeftWidth:`${.9/o.scale}px`})),n=I(()=>({width:`${o.attr.x+60/o.scale}px`,borderTopWidth:`${.9/o.scale}px`})),e=I(()=>({fontSize:`${12/o.scale}px`,top:`-${6/o.scale}px`,left:`-${6/o.scale}px`}));return{topLineStyle:t,leftLineStyle:n,accountStyle:e}}},ss={class:"nav-line"};function ls(o,t,n,e,l,s){return g(),$("div",ss,[a("div",{class:"nav-line-top",style:J(e.topLineStyle)},null,4),a("div",{class:"nav-line-left",style:J(e.leftLineStyle)},null,4),a("div",{class:"nav-line-account",style:J(e.accountStyle)},Q(n.attr.x)+", "+Q(n.attr.y),5)])}var cs=F(ns,[["render",ls]]);const is={name:"dv-transform",components:{ReferLine:cs},props:{data:{type:Object,required:!0}},setup(o){const t=Lt(),{showMenu:n}=Pe(),{schemaStore:e,storeToRefs:l}=j(),{canvas:s,comps:i,pageConfig:r,selectedCom:d,hoveredComId:c,toolbox:m,spaceDown:h,isMultiSelect:p}=l(e),_=I(()=>c.value===o.data.id),y=I(()=>p.value?!1:!De(d.value)&&d.value.id===o.data.id),b=I(()=>({locked:o.data.locked,selected:y.value})),f=I(()=>o.data.attr.rotateY&&o.data.attr.rotateY!==0?{"transform-style":"preserve-3d",perspective:"1000px",overflow:"visible"}:null),S=I(()=>({top:0,left:0,width:`${o.data.attr.w}px`,height:`${o.data.attr.h}px`,transform:`translate(${o.data.attr.x}px, ${o.data.attr.y}px)`})),C=I(()=>({"is-hide":!y.value||o.data.locked})),w=I(()=>({transform:`rotate(${o.data.attr.rotate}deg)`})),V=I(()=>{var L;return{width:`${o.data.attr.w}px`,height:`${o.data.attr.h}px`,transform:`rotatey(${(L=o.data.attr.rotateY)!=null?L:0}deg)`}}),P=I(()=>({display:o.data.hided?"none":"block"})),B=I(()=>Qn(o.data.attr.rotate)),U=I(()=>s.value.scale),K=I(()=>{const L=`scale(${1/U.value}, ${1/U.value})`;return{t:{name:"top",style:{cursor:B.value.t,transform:L}},rt:{name:"top-right",style:{cursor:B.value.rt,transform:L}},r:{name:"right",style:{cursor:B.value.r,transform:L}},rb:{name:"bottom-right",style:{cursor:B.value.rb,transform:L}},b:{name:"bottom",style:{cursor:B.value.b,transform:L}},lb:{name:"bottom-left",style:{cursor:B.value.lb,transform:L}},l:{name:"left",style:{cursor:B.value.l,transform:L}},lt:{name:"top-left",style:{cursor:B.value.lt,transform:L}}}}),D=()=>e.hoverCom(o.data.id),O=()=>e.hoverCom(""),T=()=>{e.selectCom(o.data)};return{comps:i,selectedCom:d,hoveredComId:c,toolbox:m,isHovered:_,isSelected:y,hideStyle:P,transformClass:b,dvComStyle:f,transformStyle:S,handlerClass:C,handlerStyle:w,disableEventStyle:V,onEnter:D,onLeave:O,onMove:L=>{h.value||(L.stopPropagation(),L.preventDefault(),T(),!o.data.locked&&ts(L,o.data,U.value,r.value.grid))},onZoom:(L,se)=>{T(),os(L,se,o.data,U.value,r.value.grid)},onRotate:L=>{as(L,t.vnode.el,o.data)},points:K,scale:U,showMenu:n}}},rs=["onMousedown"],ds=["onMousedown"],us=a("div",{class:"transform-bg"},null,-1),ms={key:1,class:"b-iconfont b-icon-lock",title:"\u89E3\u9501"};function ps(o,t,n,e,l,s){const i=k("refer-line");return g(),$("div",{class:A(["dv-transform",e.transformClass]),style:J(e.transformStyle)},[e.toolbox.referLine&&e.isSelected?(g(),z(i,{key:0,attr:n.data.attr,scale:e.scale},null,8,["attr","scale"])):Y("",!0),a("div",{class:A(["dv-scale",{hovered:e.isHovered}]),style:J(e.hideStyle),onMouseenter:t[2]||(t[2]=(...r)=>e.onEnter&&e.onEnter(...r)),onMouseleave:t[3]||(t[3]=(...r)=>e.onLeave&&e.onLeave(...r)),onMousedown:t[4]||(t[4]=(...r)=>e.onMove&&e.onMove(...r))},[a("div",{class:A(["transform-handler",e.handlerClass]),style:J(e.handlerStyle)},[a("div",{class:"dv-com",style:J(e.dvComStyle)},[ze(o.$slots,"default"),a("div",{class:"dv-event-disable",style:J(e.disableEventStyle),onContextmenu:t[0]||(t[0]=(...r)=>e.showMenu&&e.showMenu(...r))},null,36)],4),(g(!0),$(X,null,ae(e.points,(r,d)=>(g(),$(X,{key:d},[r.rotateStyle?(g(),$("i",{key:0,class:A(`${r.name}-handler`),"data-html2canvas-ignore":""},[a("span",{class:"rotate-handler",style:J(r.rotateStyle),onMousedown:t[1]||(t[1]=oe((...c)=>e.onRotate&&e.onRotate(...c),["prevent","stop"]))},[a("span",{class:"control-point",style:J(r.style),onMousedown:oe(c=>e.onZoom(c,d),["prevent","stop"])},null,44,rs)],36)],2)):(g(),$("i",{key:1,class:A(`${r.name}-handler`),"data-html2canvas-ignore":""},[a("span",{class:"control-point",style:J(r.style),onMousedown:oe(c=>e.onZoom(c,d),["prevent","stop"])},null,44,ds)],2))],64))),128)),us],6)],38),n.data.locked?(g(),$("i",ms)):Y("",!0)],6)}var vs=F(is,[["render",ps]]);const fs=["onClick"],_s=["onClick"],hs={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{undoDisable:e,redoDisable:l}=n(t),s=I(()=>t.toolbar.config?{right:"330px"}:{right:0}),i=()=>t.undo(),r=()=>t.redo();return(d,c)=>(g(),$("div",{class:"action-bar-wrap",style:J(v(s))},[a("i",{class:"action-btn b-iconfont b-icon-aim",title:"\u6700\u4F73\u753B\u5E03\u6BD4\u4F8B",onClick:c[0]||(c[0]=oe(m=>v(t).autoCanvasScale(),["stop"]))}),a("i",{class:"action-btn b-iconfont b-icon-icon-test",title:"1:1\u753B\u5E03\u5927\u5C0F",onClick:c[1]||(c[1]=oe(m=>v(t).setCanvasScale(100),["stop"]))}),a("i",{class:A(["action-btn b-iconfont b-icon-rollback",{disabled:v(e)}]),title:"\u64A4\u9500",onClick:oe(i,["stop"])},null,10,fs),a("i",{class:A(["action-btn b-iconfont b-icon-rollback",{disabled:v(l)}]),title:"\u91CD\u505A",onClick:oe(r,["stop"]),style:{transform:"rotateY(180deg)"}},null,10,_s)],4))}};var gs=F(hs,[["__scopeId","data-v-293a1cf3"]]);const bs=["onMousedown"],ys={__name:"index",props:{x:Number,y:Number,width:Number,height:Number,showArea:Boolean},setup(o){const{schemaStore:t,storeToRefs:n}=j(),{pageConfig:e,canvas:l,selectedComs:s,areaData:i}=n(t);function r(d){let c=!1;const m={x:i.value.x,y:i.value.y},h=s.value.map(V=>V.attr),p=Object.create(null),_=[],y=d.clientX,b=d.clientY,f=l.value.scale,S=e.value.grid,C=V=>{const P=V.clientX,B=V.clientY,U=Math.round((P-y)/f/S)*S,K=Math.round((B-b)/f/S)*S;c=Math.abs(U)>=1||Math.abs(K)>=1,p.x=m.x+U,p.y=m.y+K,i.value={...i.value,...p},s.value.forEach((D,O)=>{_[O]={x:h[O].x+U,y:h[O].y+K},D.attr={...D.attr,..._[O]}})},w=()=>{c&&t.recordSnapshot(),te(document,"mousemove",C),te(document,"mouseup",w)};ee(document,"mousemove",C),ee(document,"mouseup",w)}return(d,c)=>le((g(),$("div",{style:J({left:o.x+"px",top:o.y+"px",width:o.width+"px",height:o.height+"px"}),class:"select-area",onMousedown:oe(r,["stop"])},null,44,bs)),[[Ue,o.showArea]])}};var Cs=F(ys,[["__scopeId","data-v-8dc9f1ea"]]);const xs={class:"canvas-main"},ws=["onMousedown"],ks={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{pageConfig:e,spaceDown:l,canvas:s,selectedCom:i,comps:r,toolbox:d,getPanelOffsetLeft:c,getPanelOffsetTop:m,editorEL:h,areaData:p}=n(t),_=R(null),y=be({drag:!1,startX:0,startY:0});let b=0,f=0;const S=I(()=>({width:`${s.value.width}px`,height:`${s.value.height}px`})),C=I(()=>({position:"absolute",width:`${e.value.width}px`,height:`${e.value.height}px`,transform:`scale(${s.value.scale}) translate(0px, 0px)`,backgroundImage:`url(${e.value.bgImage})`,backgroundColor:e.value.bgColor})),w=Pt(t.autoCanvasScale,50);async function V(T){T.preventDefault();try{const M=T.dataTransfer.getData("image-comp");if(M){const L=JSON.parse(M);P(T,L);return}const N=T.dataTransfer.getData("custom-comp");if(N){const L=JSON.parse(N);P(T,L);return}const Z=T.dataTransfer.getData("normal-comp");if(Z){const L=mt(Z);if(P(T,L),L.apiData&&L.apiData.type===Ae.static&&L.apiData.staticPath){const{data:se}=await pt(L.id,L.apiData.staticPath);i.value.apiData.config.data=JSON.stringify(se)}}}catch(M){console.warn(M)}}function P(T,M){const{scale:N}=s.value,Z=(T.clientX-c.value+_.value.scrollLeft)/N,L=(T.clientY-m.value+_.value.scrollTop)/N;M.attr.x=Math.round(Z-M.attr.w/2),M.attr.y=Math.round(L-M.attr.h/2),t.addCom({component:M}),t.selectCom(M)}function B(T){T.preventDefault(),T.stopPropagation(),T.dataTransfer.dropEffect="copy"}function U(T){if(l.value){y.drag=!0;const M=T.clientX,N=T.clientY,Z=s.value.scale,{scrollLeft:L,scrollTop:se,clientWidth:ie,scrollWidth:ne,clientHeight:_e,scrollHeight:Le}=_.value,ue=ie<ne||_e<Le,ce={left:L,top:se},ke=Fe=>{if(ue){const wt=Fe.clientX,kt=Fe.clientY,St=Math.round((wt-M)/Z),$t=Math.round((kt-N)/Z);_.value.scrollLeft=ce.left-St,_.value.scrollTop=ce.top-$t}},We=()=>{y.drag=!1,te(document,"mousemove",ke),te(document,"mouseup",We)};ee(document,"mousemove",ke),ee(document,"mouseup",We)}else t.selectCom()}function K(T){if(i.value||T.preventDefault(),l.value||T.target.className==="select-area")return;O();const M=h.value.getBoundingClientRect();b=M.x,f=M.y;const N=T.clientX,Z=T.clientY;p.value.showArea=!0;const L=s.value.scale;p.value.x=(N-b)/L,p.value.y=(Z-f)/L;const se=ne=>{p.value.width=Math.abs((ne.clientX-N)/L),p.value.height=Math.abs((ne.clientY-Z)/L),ne.clientX<N&&(p.value.x=(ne.clientX-b)/L),ne.clientY<Z&&(p.value.y=(ne.clientY-f)/L)},ie=ne=>{if(te(document,"mousemove",se),te(document,"mouseup",ie),ne.clientX===N&&ne.clientY===Z){O();return}D()};ee(document,"mousemove",se),ee(document,"mouseup",ie)}function D(){const T=Xt(p.value,r.value);if(T.length===0){O();return}if(T.length===1){t.selectCom(T[0]),O();return}t.multiSelectComs(T)}function O(){p.value.showArea=!1,p.value.width=0,p.value.height=0}return Ce(()=>{ee(window,"resize",w),de.on("hideArea",O),t.getEditor(),w()}),Me(()=>{te(window,"resize",w)}),(T,M)=>(g(),$("div",xs,[a("div",{id:"canvas-wp",ref_key:"canvasWpRef",ref:_,class:"canvas-panel-wrap",onMousedown:oe(U,["stop"])},[a("div",{class:"screen-shot",style:J(v(S))},[v(d).markLine?(g(),z(qn,{key:0,style:J(v(S))},null,8,["style"])):Y("",!0),u(gs),u(Xn),a("div",{id:"canvas-components",class:"canvas-panel",style:J(v(C)),onDragover:B,onDrop:V,onMousedown:K},[(g(!0),$(X,null,ae(v(r),N=>(g(),z(vs,{key:N.id,data:N},{default:x(()=>{var Z;return[(g(),z(ut(N.name),{data:N,style:J({width:N.attr.w+"px",height:N.attr.h+"px",opacity:N.attr.opacity,transform:`rotatey(${(Z=N.attr.rotateY)!=null?Z:0}deg)`}),id:`component_${N.id}`},null,8,["data","style","id"]))]}),_:2},1032,["data"]))),128)),u(Cs,Nt(Et(v(p))),null,16)],36)],4)],40,ws)]))}};async function Ee(o){try{const t=o.clientWidth,n=o.clientHeight;return await zt(o,{quality:.7,width:t,height:n})}catch(t){return console.error(t),""}}const Ss={name:"page-config",setup(){const{schemaStore:o,storeToRefs:t}=j(),{pageConfig:n}=t(o),e=R(""),l=R(!1),s=()=>{n.value.bgColor="#0d2a42",n.value.bgImage=""},i=()=>o.autoCanvasScale(),r=c=>{if(c!=="custom"){const m=c.split("x"),h=+m[0],p=+m[1];o.setScreenSize({width:h,height:p})}};async function d(){H(!0),W.warning("\u6B63\u5728\u622A\u53D6\u753B\u5E03\u7F29\u7565\u56FE\uFF0C\u8BF7\u52FF\u8FDB\u884C\u5176\u4ED6\u64CD\u4F5C\uFF01"),l.value=!0;const c=document.getElementById("canvas-components");c.style.top=0,c.style.left=0,o.setCanvasScale(100),setTimeout(async()=>{try{const m=await Ee(c);n.value.thumbnail=m,W.success("\u622A\u53D6\u7F29\u7565\u56FE\u6210\u529F\uFF01")}catch(m){console.log(m)}c.style.top="60px",c.style.left="60px",o.autoCanvasScale(),l.value=!1,H(!1)},300)}return ve([()=>n.value.width,()=>n.value.height],()=>{const{width:c,height:m}=n.value;c===1920&&m===1080||c===2560&&m===1080||c===3440&&m===1080||c===3440&&m===1440||c===414&&m===736||c===375&&m===667||c===375&&m===812?e.value=`${c}x${m}`:e.value="custom"},{immediate:!0}),{screenLabel:e,onSizeChange:i,resetBGImage:s,pageConfig:n,pageMap:[{group:"web\u7AEF",data:Jt.map(c=>({value:`${c.width}x${c.height}`,label:c.label}))},{group:"\u79FB\u52A8\u8BBE\u5907",data:Ht.map(c=>({value:`${c.width}x${c.height}`,label:c.label}))},{group:"\u5176\u4ED6",data:[{value:"custom",label:"\u81EA\u5B9A\u4E49"}]}],sizeChange:r,createPreviewThumb:Ee,createThumb:d,thumbLoading:l}}},yt=o=>(xe("data-v-644ec27b"),o=o(),we(),o),$s={class:"page-config-panel"},Vs=yt(()=>a("div",{class:"page-config-top"},"\u9875\u9762\u8BBE\u7F6E",-1)),Ms={class:"page-config-content"},Ds={class:"page-config-wp"},Is={class:"page-config-wp"},Ts={class:"page-config-wp"},Rs={class:"image-thumb-wrap"},Bs=["src"],Ls={key:1,class:"tip",flex:"dir:top main:center cross:center"},Ns=yt(()=>a("p",null,"\u6682\u672A\u622A\u53D6\u7F29\u7565\u56FE",-1)),Es={class:"pt-5"};function zs(o,t,n,e,l,s){const i=k("g-group-select"),r=k("g-field"),d=k("g-input-number"),c=k("g-color-picker"),m=k("g-image"),h=k("b-icon"),p=k("b-button"),_=k("b-scrollbar");return g(),$("div",$s,[Vs,a("div",Ms,[u(_,null,{default:x(()=>[a("div",Ds,[u(r,{label:"\u5C4F\u5E55\u8BBE\u7F6E"},{default:x(()=>[u(i,{modelValue:e.screenLabel,"onUpdate:modelValue":t[0]||(t[0]=y=>e.screenLabel=y),data:e.pageMap,onChange:e.sizeChange},null,8,["modelValue","data","onChange"])]),_:1}),u(r,{label:"\u5C4F\u5E55\u5927\u5C0F",flat:""},{default:x(()=>[u(d,{modelValue:e.pageConfig.width,"onUpdate:modelValue":t[1]||(t[1]=y=>e.pageConfig.width=y),label:"\u5BBD\u5EA6",min:375,max:3840,inline:"",suffix:"px",onChange:e.onSizeChange},null,8,["modelValue","onChange"]),u(d,{modelValue:e.pageConfig.height,"onUpdate:modelValue":t[2]||(t[2]=y=>e.pageConfig.height=y),label:"\u9AD8\u5EA6",min:600,max:2160,inline:"",suffix:"px",onChange:e.onSizeChange},null,8,["modelValue","onChange"])]),_:1}),u(r,{label:"\u80CC\u666F\u989C\u8272"},{default:x(()=>[u(c,{modelValue:e.pageConfig.bgColor,"onUpdate:modelValue":t[3]||(t[3]=y=>e.pageConfig.bgColor=y)},null,8,["modelValue"])]),_:1}),u(r,{label:"\u80CC\u666F\u9884\u8BBE",tooltip:"\u53EF\u4EE5\u52A0\u8F7D\u5BF9\u5E94\u9884\u8BBE\u7684\u56FE\u7247\u80CC\u666F"},{default:x(()=>[u(m,{"ignore-group-keys":["header","box","decoration","widget"],"show-resize":!1,"show-clear":"",onClear:e.resetBGImage,modelValue:e.pageConfig.bgImage,"onUpdate:modelValue":t[4]||(t[4]=y=>e.pageConfig.bgImage=y)},null,8,["onClear","modelValue"])]),_:1})]),a("div",Is,[u(r,{label:"\u6805\u683C\u95F4\u8DDD",tooltip:"\u6BCF\u6B21\u79FB\u52A8\u7684\u8DDD\u79BB\uFF0C\u5355\u4F4Dpx"},{default:x(()=>[u(d,{modelValue:e.pageConfig.grid,"onUpdate:modelValue":t[5]||(t[5]=y=>e.pageConfig.grid=y),min:1,max:20,suffix:"px"},null,8,["modelValue"])]),_:1})]),a("div",Ts,[u(r,{label:"\u7F29\u7565\u56FE",tooltip:"\u622A\u53D6\u5F53\u524D\u753B\u5E03\u5B58\u4E3A\u7F29\u7565\u56FE"},{default:x(()=>[a("div",Rs,[e.pageConfig.thumbnail?(g(),$("img",{key:0,src:e.pageConfig.thumbnail,alt:""},null,8,Bs)):(g(),$("div",Ls,[u(h,{name:"image",size:"52"}),Ns]))]),a("div",Es,[u(p,{type:"primary",size:"small",loading:e.thumbLoading,onClick:e.createThumb},{default:x(()=>[E(" \u622A\u53D6 ")]),_:1},8,["loading","onClick"]),u(p,{size:"small",loading:e.thumbLoading,onClick:t[6]||(t[6]=y=>e.pageConfig.thumbnail="")},{default:x(()=>[E(" \u6E05\u9664 ")]),_:1},8,["loading"])])]),_:1})])]),_:1})])])}var Us=F(Ss,[["render",zs],["__scopeId","data-v-644ec27b"]]);const{schemaStore:Ct,storeToRefs:As}=j(),{selectedCom:Os}=As(Ct),Gs={name:"config-title",props:{comName:{type:String},comAlias:{type:String},com:{type:Object,default:()=>({})},showCfg:{type:Boolean,default:!1}},emits:["update:com"],setup(o){const t=R(!1),n=R(""),e=I(()=>{const d=Va(o.comName);return d?d.name:o.comName}),l=()=>{t.value=!0,n.value=JSON.stringify(o.com,null,2)},s=()=>{Ge(JSON.stringify(o.com)),W.success("\u5DF2\u590D\u5236\u914D\u7F6E\u9879\u81F3\u526A\u5207\u677F"),t.value=!1},i=()=>{try{const d=JSON.parse(n.value);n.value=JSON.stringify(d,null,2),r(d),W.success("\u56FE\u8868\u5E94\u7528\u6210\u529F\uFF01"),t.value=!1}catch{W.error("\u914D\u7F6E\u9879\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u8BF7\u68C0\u67E5\u540E\u518D\u5E94\u7528\u914D\u7F6E\uFF01")}};function r(d){const c=Os.value.id;Ct.replaceCom(c,d)}return{openDetail:l,compJson:n,comTitle:e,copyCom:s,putJson:i,detailVisible:t}}},Ys=o=>(xe("data-v-133b1084"),o=o(),we(),o),js={class:"com-title-wp"},Ks={class:"com-title"},Ps={class:"title-name"},Xs={class:"alias-name"},Js={class:"version-tag"},Hs=Ys(()=>a("span",null,"\u914D\u7F6E\u9879",-1)),Ws={class:"data-editor",style:{margin:"0"}},Fs={class:"t-right pt-8"};function qs(o,t,n,e,l,s){const i=k("b-icon"),r=k("b-ace-editor"),d=k("b-button"),c=k("b-modal");return g(),$("div",js,[a("div",Ks,[a("div",Ps,[a("span",Xs,Q(n.comAlias),1)]),a("div",Js,[a("span",null,Q(e.comTitle),1)])]),ze(o.$slots,"default",{},()=>[n.showCfg?(g(),$("div",{key:0,class:"search-config",onClick:t[0]||(t[0]=(...m)=>e.openDetail&&e.openDetail(...m)),title:"\u67E5\u770B\u914D\u7F6E\u9879"},[u(i,{name:"filesearch",size:"14"}),Hs])):Y("",!0)],!0),u(c,{modelValue:e.detailVisible,"onUpdate:modelValue":t[2]||(t[2]=m=>e.detailVisible=m),title:`[${n.comAlias}] \u914D\u7F6E\u9879 `,"append-to-body":"",top:"60px","custom-class":"schema-modal"},{default:x(()=>[a("div",Ws,[u(r,{modelValue:e.compJson,"onUpdate:modelValue":t[1]||(t[1]=m=>e.compJson=m),theme:"tomorrow_night",wrap:"",styles:{border:"none"}},null,8,["modelValue"])]),a("div",Fs,[u(d,{size:"small",type:"primary",icon:"snippets",onClick:e.putJson},{default:x(()=>[E("\u5E94\u7528\u914D\u7F6E\u9879")]),_:1},8,["onClick"]),u(d,{size:"small",type:"primary",icon:"file-copy",onClick:e.copyCom},{default:x(()=>[E(" \u590D\u5236\u914D\u7F6E\u9879 ")]),_:1},8,["onClick"])])]),_:1},8,["modelValue","title"])])}var Be=F(Gs,[["render",qs],["__scopeId","data-v-133b1084"]]);const Zs={name:"data-center-panel",components:{ConfigTitle:Be,SourcePanel:Wt(()=>Ut(()=>import("./source-panel-5f051c18.js"),["static/js/source-panel-5f051c18.js","static/css/source-panel-9456a5cd.css","static/js/vendor-0bcca4c5.js","static/js/chunk-brace-b1f520b9.js","static/js/index-a2a480dc.js","static/css/index-1c17caf9.css","static/js/chunk-bin-ui-next-98c8f2d2.js","static/css/chunk-bin-ui-next-233b4550.css","static/js/chunk-bin-datav-bdc06cb1.js","static/css/chunk-bin-datav-b06db975.css","static/js/chunk-three-06bdd351.js","static/js/chunk-gsap-80ac4909.js","static/js/chunk-particles.vue3-83a83be1.js","static/js/chunk-mockjs-9e1335a8.js"]))},setup(){const{schemaStore:o,storeToRefs:t}=j(),{selectedCom:n}=t(o),e=I(()=>Object.keys(n.value.apiData));return{selectedCom:n,dataKeys:e}}},Qs={class:"data-center-panel"},el={class:"scroll-container"},tl={key:1,style:{"min-height":"300px"},flex:"main:center cross:center"};function ol(o,t,n,e,l,s){const i=k("config-title"),r=k("source-panel"),d=k("b-empty"),c=k("b-scrollbar");return g(),$("div",Qs,[u(i,{"com-name":e.selectedCom.name,"com-alias":e.selectedCom.alias},null,8,["com-name","com-alias"]),a("div",el,[u(c,{native:""},{default:x(()=>[e.dataKeys.length>0?(g(),z(r,{key:0})):(g(),$("div",tl,[u(d,null,{default:x(()=>[E("\u8BE5\u7EC4\u4EF6\u4E0D\u9700\u8981\u914D\u7F6E\u6570\u636E")]),_:1})]))]),_:1})])])}var al=F(Zs,[["render",ol]]);const nl={class:"basic-setting-wp"},sl={flex:"cross:center"},ll=a("span",{class:"pr-5"},"\u56FE\u8868\u5C3A\u5BF8",-1),xt={__name:"basic-setting",props:{attr:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},emits:["update:attr"],setup(o,{emit:t}){const n=o,e=I({get:()=>n.attr,set:d=>t("update:attr",d)}),{schemaStore:l,storeToRefs:s}=j(),{curComIsGroup:i,isMultiSelect:r}=s(l);return(d,c)=>{const m=k("b-icon"),h=k("g-input-number"),p=k("g-field"),_=k("g-slider"),y=k("b-button"),b=k("b-button-group");return g(),$("div",nl,[u(p,{label:"\u56FE\u8868\u5C3A\u5BF8",flat:""},{label:x(()=>[a("div",sl,[ll,u(m,{name:v(e).lockedRatio?"link":"disconnect",color:v(e).lockedRatio?"#1089ff":"#ccc",title:v(e).lockedRatio?"\u89E3\u9664\u9501\u5B9A\u5BBD\u9AD8\u5173\u8054":"\u9501\u5B9A\u5BBD\u9AD8\u5173\u8054",type:"button",onClick:c[0]||(c[0]=f=>v(e).lockedRatio=!v(e).lockedRatio)},null,8,["name","color","title"])])]),default:x(()=>[u(h,{modelValue:v(e).w,"onUpdate:modelValue":c[1]||(c[1]=f=>v(e).w=f),label:"\u5BBD\u5EA6",min:10,max:4e3,inline:"",suffix:"px",disabled:o.readonly},null,8,["modelValue","disabled"]),u(h,{modelValue:v(e).h,"onUpdate:modelValue":c[2]||(c[2]=f=>v(e).h=f),label:"\u9AD8\u5EA6",min:10,max:4e3,inline:"",suffix:"px",disabled:o.readonly},null,8,["modelValue","disabled"])]),_:1}),u(p,{label:"\u56FE\u8868\u4F4D\u7F6E",flat:""},{default:x(()=>[u(h,{modelValue:v(e).x,"onUpdate:modelValue":c[3]||(c[3]=f=>v(e).x=f),label:"X",inline:"",suffix:"px",disabled:o.readonly},null,8,["modelValue","disabled"]),u(h,{modelValue:v(e).y,"onUpdate:modelValue":c[4]||(c[4]=f=>v(e).y=f),label:"Y",inline:"",suffix:"px",disabled:o.readonly},null,8,["modelValue","disabled"])]),_:1}),v(r)?Y("",!0):(g(),z(p,{key:0,label:"\u65CB\u8F6C\u89D2\u5EA6",flat:""},{default:x(()=>[u(h,{modelValue:v(e).rotate,"onUpdate:modelValue":c[5]||(c[5]=f=>v(e).rotate=f),label:"2d\u65CB\u8F6C",min:0,max:360,step:1,inline:"",suffix:"deg"},null,8,["modelValue"]),u(h,{modelValue:v(e).rotateY,"onUpdate:modelValue":c[6]||(c[6]=f=>v(e).rotateY=f),label:"3d\u65CB\u8F6C",min:-180,max:180,step:1,inline:"",suffix:"deg"},null,8,["modelValue"])]),_:1})),v(r)?Y("",!0):(g(),z(p,{key:1,label:"\u900F\u660E\u5EA6"},{default:x(()=>[u(_,{modelValue:v(e).opacity,"onUpdate:modelValue":c[7]||(c[7]=f=>v(e).opacity=f),min:0,max:1,step:.05},null,8,["modelValue","step"])]),_:1})),v(r)?Y("",!0):(g(),z(p,{key:2,label:"\u4F4D\u7F6E"},{default:x(()=>[u(b,null,{default:x(()=>[(g(!0),$(X,null,ae(v(_o),f=>(g(),z(y,{key:f.value,size:"mini",title:f.label,onClick:S=>v(l).doAdsorption(f.value)},{default:x(()=>[a("i",{class:A(`iconfont-align b-icon-${f.value}-vs`)},null,2)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})),v(r)?(g(),z(p,{key:3,label:"\u5BF9\u9F50"},{default:x(()=>[u(b,null,{default:x(()=>[(g(!0),$(X,null,ae(v(ho),f=>(g(),z(y,{key:f.value,size:"mini",title:f.label,onClick:S=>v(l).doAlign(f.value)},{default:x(()=>[a("i",{class:A(`iconfont-align b-icon-${f.value}`)},null,2)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})):Y("",!0),v(r)||v(i)?(g(),z(p,{key:4,label:"\u7EC4\u5408\u62C6\u5206"},{default:x(()=>[u(b,null,{default:x(()=>[u(y,{size:"mini",icon:"group",disabled:!v(r),onClick:c[8]||(c[8]=f=>v(l).group())},{default:x(()=>[E(" \u7EC4\u5408 ")]),_:1},8,["disabled"]),u(y,{size:"mini",icon:"ungroup",disabled:!v(i),onClick:c[9]||(c[9]=f=>v(l).ungroup())},{default:x(()=>[E(" \u62C6\u5206 ")]),_:1},8,["disabled"])]),_:1})]),_:1})):Y("",!0)])}}},cl={class:"setting-panel"},il={class:"setting-panel-content"},rl={class:"scroll-container"},dl={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{selectedCom:e}=n(t);return(l,s)=>{const i=k("b-scrollbar");return g(),$("div",cl,[u(Be,{"com-name":v(e).name,"com-alias":v(e).alias,com:v(e),"show-cfg":""},null,8,["com-name","com-alias","com"]),a("div",il,[a("div",rl,[u(i,null,{default:x(()=>[(g(),z(xt,{key:`${v(e).id}'_basic-setting`,attr:v(e).attr},null,8,["attr"])),(g(),z(ut(v(e).name+"Config"),{key:v(e).id,data:v(e)},null,8,["data"]))]),_:1})])])])}}},ul={class:"setting-panel"},ml={class:"setting-panel-content"},pl={class:"scroll-container"},vl={__name:"multi-setting",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{areaData:e}=n(t),l=I(()=>e.value.showArea),s=I(()=>({x:e.value.x,y:e.value.y,w:e.value.width,h:e.value.height}));return(i,r)=>{const d=k("b-scrollbar");return g(),$("div",ul,[u(Be,{"com-alias":"\u591A\u9009\u533A\u57DF"}),a("div",ml,[a("div",pl,[u(d,null,{default:x(()=>[u(xt,{attr:v(s),readonly:v(l)},null,8,["attr","readonly"])]),_:1})])])])}}},fl={style:{margin:"-16px",padding:"10px"}},_l={__name:"EventParamsModal",props:{modelValue:{type:Boolean,default:!1},params:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(o,{emit:t}){const n=o,e=I({get:()=>n.modelValue,set:s=>t("update:modelValue",s)}),l=[{title:"\u53C2\u6570\u540D",key:"desc"},{title:"\u53C2\u6570Key",key:"name"},{title:"\u53C2\u6570\u7C7B\u578B",key:"type"}];return(s,i)=>{const r=k("b-table"),d=k("b-modal");return g(),z(d,{modelValue:v(e),"onUpdate:modelValue":i[0]||(i[0]=c=>dt(e)?e.value=c:null),title:"\u53C2\u6570\u4FE1\u606F",width:"750px","append-to-body":"","custom-class":"schema-modal"},{default:x(()=>[a("div",fl,[u(r,{columns:l,data:o.params,size:"small",border:""},null,8,["data"])])]),_:1},8,["modelValue"])}}},hl={flex:"main:justify cross:center"},gl={__name:"trigger-config",props:{eventList:{type:Array,default:()=>Ft},events:{type:Object,default:()=>({})}},setup(o){const t=o,n=I(()=>t.events),e=I(()=>{let r=!1;return t.eventList.forEach(d=>{if(!De(n.value[d])){r=!0;return}}),r}),l=R([]),s=R(!1);function i(r){l.value=r,s.value=!0}return(r,d)=>{const c=k("b-checkbox"),m=k("b-button"),h=k("g-field"),p=k("g-field-collapse");return v(e)?(g(),z(p,{key:0,label:"\u89E6\u53D1\u4E8B\u4EF6","default-open":""},{default:x(()=>[(g(!0),$(X,null,ae(o.eventList,_=>(g(),$(X,{key:_},[v(n)[_]?(g(),z(h,{key:0,label:v(n)[_].name},{default:x(()=>[a("div",hl,[u(c,{modelValue:v(n)[_].enable,"onUpdate:modelValue":y=>v(n)[_].enable=y},null,8,["modelValue","onUpdate:modelValue"]),u(m,{type:"text",title:"\u67E5\u770B\u4E8B\u4EF6\u53C2\u6570",onClick:y=>i(v(n)[_].params)},{default:x(()=>[E(" \u67E5\u770B ")]),_:2},1032,["onClick"])])]),_:2},1032,["label"])):Y("",!0)],64))),128)),u(_l,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=_=>s.value=_),params:l.value},null,8,["modelValue","params"])]),_:1})):Y("",!0)}}},bl={class:"series-title",style:{top:"-8px"}},yl={style:{width:"50%","padding-right":"8px"}},Cl={style:{width:"50%","padding-right":"8px"}},xl={key:0,style:{"min-height":"80px"},flex:"main:center cross:center"},wl={__name:"response-config",props:{compId:{type:String,default:""},events:{type:Object,default:()=>({})}},setup(o){const t=o,n=I(()=>t.events),e=I(()=>Object.keys(n.value).includes("onEvents")),l=I(()=>qt.value.filter(h=>h.compId!==t.compId).map(h=>({value:h.compId,label:h.compName}))),s=I(()=>{const h=n.value.actions;return Object.keys(h).map(p=>({value:p,label:h[p].title}))});function i(h){return Zt.value.filter(p=>p.eventName.includes(h)).map(p=>({value:p.eventName,label:p.title}))}function r(){n.value.onEvents.push({eventSource:"",eventName:"",actionName:"",actionParams:[],register:!1})}function d(h){if(h.eventSource===""){W.warning("\u8BF7\u9009\u62E9\u4E8B\u4EF6\u6E90\uFF01");return}if(h.eventName===""){W.warning("\u8BF7\u7ED1\u5B9A\u4E8B\u4EF6\uFF01");return}if(h.actionName===""){W.warning("\u8BF7\u7ED1\u5B9A\u52A8\u4F5C\uFF01");return}h.register=!0}function c(h,p){p.register?p.register=!1:n.value.onEvents.splice(h,1)}function m(h,p){const _=n.value.actions[h];_&&(p.actionParams=Ie(_.params))}return(h,p)=>{const _=k("b-icon"),y=k("b-button"),b=k("g-select"),f=k("g-field"),S=k("g-field-collapse");return v(e)?(g(),z(S,{key:0,label:"\u54CD\u5E94\u4E8B\u4EF6","default-open":""},{add:x(()=>[u(y,{type:"text",title:"\u65B0\u589E\u4E00\u4E2A\u54CD\u5E94\u4E8B\u4EF6",onClick:r},{default:x(()=>[u(_,{name:"plus",size:"16"})]),_:1})]),default:x(()=>[(g(!0),$(X,null,ae(v(n).onEvents,(C,w)=>(g(),z(f,{key:w,label:"\u4E8B\u4EF6","label-width":"85px",flat:""},{label:x(()=>[a("div",bl,[a("span",null,"\u4E8B\u4EF6"+Q(w+1),1)])]),default:x(()=>[u(b,{modelValue:C.eventSource,"onUpdate:modelValue":V=>C.eventSource=V,data:v(l),disabled:C.register,label:"\u4E8B\u4EF6\u6E90"},null,8,["modelValue","onUpdate:modelValue","data","disabled"]),C.eventSource!==""?(g(),$(X,{key:0},[u(b,{modelValue:C.eventName,"onUpdate:modelValue":V=>C.eventName=V,data:i(C.eventSource),disabled:C.register,inline:"",label:"\u7ED1\u5B9A\u4E8B\u4EF6"},null,8,["modelValue","onUpdate:modelValue","data","disabled"]),u(b,{modelValue:C.actionName,"onUpdate:modelValue":V=>C.actionName=V,data:v(s),disabled:C.register,inline:"",label:"\u7ED1\u5B9A\u52A8\u4F5C",onChange:V=>m(C.actionName,C)},null,8,["modelValue","onUpdate:modelValue","data","disabled","onChange"])],64)):Y("",!0),a("span",yl,[u(y,{size:"small",style:{width:"100%"},type:"primary",disabled:C.register,onClick:V=>d(C)},{default:x(()=>[E(" \u6CE8\u518C\u4E8B\u4EF6 ")]),_:2},1032,["disabled","onClick"])]),a("span",Cl,[u(y,{size:"small",style:{width:"100%"},onClick:V=>c(w,C)},{default:x(()=>[E(Q(C.register?"\u53D6\u6D88":"\u5220\u9664"),1)]),_:2},1032,["onClick"])])]),_:2},1024))),128)),v(n).onEvents.length===0?(g(),$("div",xl," \u6682\u65E0\u54CD\u5E94\u4E8B\u4EF6 ")):Y("",!0)]),_:1})):Y("",!0)}}},kl={class:"events-panel"},Sl={class:"events-panel-content"},$l=a("div",{class:"data-result-title"},"\u4E8B\u4EF6\u914D\u7F6E",-1),Vl={class:"scroll-container"},Ml={class:"setting-panel-gui"},Dl={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{selectedCom:e}=n(t),l=I(()=>e.value.events);return(s,i)=>{const r=k("b-scrollbar");return g(),$("div",kl,[u(Be,{"com-name":v(e).name,"com-alias":v(e).alias,com:v(e)},null,8,["com-name","com-alias","com"]),a("div",Sl,[$l,a("div",Vl,[u(r,null,{default:x(()=>[a("div",Ml,[u(gl,{events:v(l)},null,8,["events"]),u(wl,{events:v(l),"comp-id":v(e).id},null,8,["events","comp-id"])])]),_:1})])])])}}},Il={class:"config-panel"},Tl={key:0,class:"page-config-panel"},Rl={class:"page-config-top"},Bl={class:"tabs-wrapper"},Ll={key:0,class:"page-config-content"},Nl={key:1,class:"page-config-content"},El={style:{height:"100%"}},zl={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{toolbar:e,selectedCom:l,isMultiSelect:s}=n(t),i=R(0),r=d=>{s.value&&d>0||i.value!==d&&(i.value=d)};return ve(()=>l.value,()=>{i.value=0}),(d,c)=>{const m=k("b-icon"),h=k("b-tooltip");return g(),$("div",{class:A(["config-panel-wp",{"is-hide":!v(e).config}])},[a("div",Il,[v(l)||v(s)?(g(),$("div",Tl,[a("div",Rl,[a("div",Bl,[a("div",{class:A(["tab-item",{active:i.value===0}]),onClick:c[0]||(c[0]=p=>r(0))},[u(h,{content:"\u914D\u7F6E"},{default:x(()=>[u(m,{name:"control",size:"20"})]),_:1})],2),a("div",{class:A(["tab-item",{active:i.value===1}]),onClick:c[1]||(c[1]=p=>r(1))},[u(h,{content:"\u6570\u636E"},{default:x(()=>[u(m,{name:"cloud-server",size:"22"})]),_:1})],2),a("div",{class:A(["tab-item",{active:i.value===2}]),onClick:c[2]||(c[2]=p=>r(2))},[u(h,{content:"\u4E8B\u4EF6"},{default:x(()=>[u(m,{name:"deploymentunit",size:"18"})]),_:1})],2)])]),v(s)?(g(),$("div",Ll,[u(vl)])):(g(),$("div",Nl,[a("div",El,[i.value===0?(g(),z(dl,{key:v(l).id})):Y("",!0),i.value===1?(g(),z(al,{key:v(l).id})):Y("",!0),i.value===2?(g(),z(Dl,{key:v(l).id})):Y("",!0)])]))])):(g(),z(Us,{key:1}))])],2)}}};const Ul={class:"toolbox-panel",flex:"main:justify"},Al={style:{width:"500px"},flex:""},Ol=a("i",{class:"action-btn b-iconfont b-icon-rollback"},null,-1),Gl=a("i",{class:"action-btn b-iconfont b-icon-rollback",style:{transform:"rotateY(180deg)"}},null,-1),Yl=a("div",null,null,-1),jl={class:"btn-box"},Kl={class:"btn-box"},Pl={class:"ctrl-box",flex:"cross:center"},Xl={__name:"index",setup(o){const{schemaStore:t,storeToRefs:n}=j(),{toolbar:e,toolbox:l,undoDisable:s,redoDisable:i}=n(t),r=R(!1),d=R(null),c=()=>{pe.confirm({type:"error",title:"\u786E\u8BA4\u6E05\u7A7A\u753B\u5E03\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"}).then(()=>{t.clearScreen()}).catch(()=>{})},m=()=>t.undo(),h=()=>t.redo();function p(){r.value=!0,ge(()=>{d.value&&d.value.addEventListener("paste",_),d.value.focus(),d.value.placeholder="\u7C98\u8D34\u56FE\u8868\u914D\u7F6E"})}function _(y){const b=y.clipboardData.getData("Text");try{const f=JSON.parse(b);((f==null?void 0:f.type)==="com"||(f==null?void 0:f.type)==="group")&&(f.id=`${f.name}_${me()}`,f.name==="Group"&&f.components.forEach(S=>{S.id=`${S.name}_${me()}`}),t.addCom({component:f}),W.success("\u7C98\u8D34\u56FE\u8868\u6210\u529F\uFF01"))}catch(f){console.log(f),W.error("\u7C98\u8D34\u7684\u5185\u5BB9\u4E0D\u662F\u56FE\u8868\u7EC4\u4EF6\uFF01")}setTimeout(()=>{d.value.value="",r.value=!1,d.value.removeEventListener("paste",_)},100)}return(y,b)=>{const f=k("b-button"),S=k("b-switch");return g(),$("div",{class:A(["toolbox-panel-wp",{"is-hide":!v(e).toolbox}])},[a("div",Ul,[a("div",Al,[u(f,{size:"mini",disabled:v(s),onClick:m},{default:x(()=>[Ol,E(" \u64A4\u9500 ")]),_:1},8,["disabled"]),u(f,{size:"mini",disabled:v(i),onClick:h},{default:x(()=>[Gl,E(" \u91CD\u505A ")]),_:1},8,["disabled"]),Yl,a("div",jl,[E(" \u53C2\u8003\u7EBF\xA0\xA0 "),u(S,{modelValue:v(l).referLine,"onUpdate:modelValue":b[0]||(b[0]=C=>v(l).referLine=C),size:"small"},null,8,["modelValue"])]),a("div",Kl,[E(" \u5BF9\u9F50\u7EBF\xA0\xA0 "),u(S,{modelValue:v(l).markLine,"onUpdate:modelValue":b[1]||(b[1]=C=>v(l).markLine=C),size:"small"},null,8,["modelValue"])])]),a("div",Pl,[E(" \xA0\xA0 "),r.value?(g(),$("textarea",{key:0,class:"paste-inner",ref_key:"textpasteRef",ref:d},null,512)):(g(),z(f,{key:1,size:"mini",icon:"diff",onClick:p},{default:x(()=>[E("\u7C98\u8D34\u56FE\u8868")]),_:1})),u(f,{size:"mini",icon:"clear",onClick:c},{default:x(()=>[E("\u6E05\u7A7A\u753B\u5E03")]),_:1})])])],2)}}};const Jl={name:"shortcut",props:{modelValue:{type:Boolean}},emits:["update:modelValue"]},Hl=o=>(xe("data-v-7e8e628e"),o=o(),we(),o),Wl=Hl(()=>a("div",{class:"shortcut-wp"},[a("div",{class:"shortcut-box"},[a("div",{class:"key-title"},"\u57FA\u7840\u5FEB\u6377\u952E"),a("div",{class:"key-wrap"},[a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5F00\u5173\u56FE\u5C42\u9762\u677F"),a("div",{class:"shortcut-value"},"Ctrl + \u2190")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5F00\u5173\u914D\u7F6E\u9762\u677F"),a("div",{class:"shortcut-value"},"Ctrl + \u2192")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5F00\u5173\u7EC4\u4EF6\u9762\u677F"),a("div",{class:"shortcut-value"},"Ctrl + \u2191")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5F00\u5173\u5DE5\u5177\u680F"),a("div",{class:"shortcut-value"},"Ctrl + \u2193")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u590D\u5236\u9009\u4E2D\u7EC4\u4EF6"),a("div",{class:"shortcut-value"},"Ctrl + C")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u7C98\u8D34\u7EC4\u4EF6"),a("div",{class:"shortcut-value"},"Ctrl + V")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u64A4\u9500\u64CD\u4F5C"),a("div",{class:"shortcut-value"},"Ctrl + Z")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u4FDD\u5B58\u770B\u677F"),a("div",{class:"shortcut-value"},"Ctrl + S")])])]),a("div",{class:"shortcut-box"},[a("div",{class:"key-title"},"\u753B\u5E03\u64CD\u4F5C"),a("div",{class:"key-wrap"},[a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u753B\u5E03\u7F29\u653E\u6700\u4F73\u6BD4\u4F8B"),a("div",{class:"shortcut-value"},"Ctrl + A")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u753B\u5E03\u7F29\u653E\u4E3A1\uFF1A1"),a("div",{class:"shortcut-value"},"Ctrl + D")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u81EA\u7531\u7F29\u653E"),a("div",{class:"shortcut-value"},"Ctrl + \u9F20\u6807\u6EDA\u8F6E/\u6EDA\u52A8")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u79FB\u52A8\u753B\u5E03"),a("div",{class:"shortcut-value"},"Space + \u9F20\u6807\u5DE6\u952E/\u62D6\u52A8")])])]),a("div",{class:"shortcut-box"},[a("div",{class:"key-title"},"\u7EC4\u4EF6\u64CD\u4F5C"),a("div",{class:"key-wrap"},[a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u7EC4\u4EF6\u7F6E\u9876"),a("div",{class:"shortcut-value"},"Alt + Home")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u7EC4\u4EF6\u7F6E\u5E95"),a("div",{class:"shortcut-value"},"Alt + End")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u4E0A\u79FB\u4E00\u5C42"),a("div",{class:"shortcut-value"},"Alt + \u2191")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u4E0B\u79FB\u4E00\u5C42"),a("div",{class:"shortcut-value"},"Alt + \u2193")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u79FB\u52A8\u7EC4\u4EF61\u50CF\u7D20"),a("div",{class:"shortcut-value"},"\u2191 \u2193 \u2190 \u2192")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u79FB\u52A8\u7EC4\u4EF610\u50CF\u7D20"),a("div",{class:"shortcut-value"},"Shift + \u2191 \u2193 \u2190 \u2192")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u91CD\u547D\u540D"),a("div",{class:"shortcut-value"},"F2/\u53CC\u51FB\u56FE\u5C42")]),a("div",{class:"shortcut-item"},[a("div",{class:"shortcut-title"},"\u5220\u9664\u9009\u4E2D\u7EC4\u4EF6"),a("div",{class:"shortcut-value"},"Delete")])])])],-1));function Fl(o,t,n,e,l,s){const i=k("b-modal");return g(),z(i,{title:"\u5FEB\u6377\u952E\u6307\u5357","model-value":n.modelValue,"append-to-body":"","custom-class":"schema-modal",onClose:t[0]||(t[0]=r=>o.$emit("update:modelValue",!1))},{default:x(()=>[Wl]),_:1},8,["model-value"])}var ql=F(Jl,[["render",Fl],["__scopeId","data-v-7e8e628e"]]);const Zl={name:"footer-panel",components:{Shortcut:ql},setup(){const{schemaStore:o,storeToRefs:t}=j(),{pageConfig:n,canvas:e}=t(o),l=R([200,150,100,50]),s=R(20),i=R(20),r=R(!1),d=async c=>{c===-1?o.autoCanvasScale():o.setCanvasScale(c===0?s.value:c)};return ve(()=>e.value.scale,c=>{const m=parseInt((c*100).toFixed(2));i.value=m,s.value=m}),{pageConfig:n,scaleList:l,inputScale:s,scale:i,submitScale:d,keycodeVisible:r}}},Ql={class:"footer-panel"},ec={class:"screen-info",flex:"cross:center"},tc={class:"ml-8",style:{transform:"scale(0.9)"}},oc={flex:"cross:center"},ac={class:"scale-input-wp"},nc=a("span",{class:"percent"},"%",-1),sc=a("i",{class:"b-iconfont b-icon-down"},null,-1),lc={class:"scale-slider-wp"};function cc(o,t,n,e,l,s){const i=k("b-icon"),r=k("b-tooltip"),d=k("b-dropdown-item"),c=k("b-dropdown-menu"),m=k("b-dropdown"),h=k("b-slider"),p=k("shortcut");return g(),$(X,null,[a("div",Ql,[a("div",ec,[u(r,{content:"\u5FEB\u6377\u952E\u63D0\u793A","open-delay":500},{default:x(()=>[u(i,{name:"read",size:"16",type:"button",onClick:t[0]||(t[0]=_=>e.keycodeVisible=!0)})]),_:1}),a("span",tc,Q(e.pageConfig.width)+" \u50CF\u7D20 * "+Q(e.pageConfig.height)+" \u50CF\u7D20",1)]),a("div",oc,[u(m,{trigger:"click",onCommand:e.submitScale},{dropdown:x(()=>[u(c,null,{default:x(()=>[(g(!0),$(X,null,ae(e.scaleList,_=>(g(),z(d,{key:_,name:_},{default:x(()=>[E(Q(`${_}%`),1)]),_:2},1032,["name"]))),128)),u(d,{name:-1},{default:x(()=>[E("\u81EA\u9002\u5E94")]),_:1})]),_:1})]),default:x(()=>[a("div",ac,[le(a("input",{"onUpdate:modelValue":t[1]||(t[1]=_=>e.inputScale=_),type:"number",class:"scale-input",onKeydown:t[2]||(t[2]=ye(_=>e.submitScale(0),["enter"]))},null,544),[[rt,e.inputScale]]),nc,sc])]),_:1},8,["onCommand"]),a("div",lc,[u(h,{modelValue:e.scale,"onUpdate:modelValue":t[3]||(t[3]=_=>e.scale=_),min:10,max:200,step:5,"show-tooltip":!1,onChange:e.submitScale},null,8,["modelValue","onChange"])])])]),u(p,{modelValue:e.keycodeVisible,"onUpdate:modelValue":t[4]||(t[4]=_=>e.keycodeVisible=_)},null,8,["modelValue"])],64)}var ic=F(Zl,[["render",cc]]);const q=o=>(xe("data-v-00b8514a"),o=o(),we(),o),rc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-vertical-align-botto",style:{transform:"rotate(180deg)"}},null,-1)),dc=q(()=>a("span",{class:"key-code"},"Alt + Home",-1)),uc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-vertical-align-botto"},null,-1)),mc=q(()=>a("span",{class:"key-code"},"Alt + End",-1)),pc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-arrowup"},null,-1)),vc=q(()=>a("span",{class:"key-code"},"Alt + \u2191",-1)),fc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-arrowdown"},null,-1)),_c=q(()=>a("span",{class:"key-code"},"Alt + \u2193",-1)),hc=q(()=>a("div",{class:"context-menu-divider"},null,-1)),gc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-unlock"},null,-1)),bc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-lock"},null,-1)),yc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-eye"},null,-1)),Cc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-eye-close"},null,-1)),xc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-save"},null,-1)),wc=q(()=>a("div",{class:"context-menu-divider"},null,-1)),kc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-edit"},null,-1)),Sc=q(()=>a("span",{class:"key-code"},"F2",-1)),$c=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-file-copy"},null,-1)),Vc=q(()=>a("span",{class:"key-code"},"Ctrl + C,V",-1)),Mc=q(()=>a("i",{class:"menu-icon b-iconfont b-icon-delete"},null,-1)),Dc=q(()=>a("span",{class:"key-code"},"Delete",-1)),Ic={__name:"index",setup(o,{expose:t}){const n=R([]),e=R({}),l=()=>ht().then(D=>n.value=D),{schemaStore:s,storeToRefs:i}=j(),{selectedCom:r,selectedComs:d}=i(s),{isLocked:c,isHided:m,contextMenu:h,contextMenuStyle:p}=Pe(),_=D=>{r.value&&s.moveCom({id:r.value.id,moveType:D})},y=()=>_(re.up),b=()=>_(re.down),f=()=>_(re.top),S=()=>_(re.bottom),C=()=>{r.value&&(r.value.locked=!r.value.locked)},w=()=>{r.value&&(r.value.hided=!r.value.hided)},V=async()=>{e.value=n.value[0].key,pe({title:"\u6307\u5B9A\u7EC4\u4EF6\u5E93",message:qe(to,{modelValue:e.value,onChange:D=>e.value=D},()=>n.value.map(D=>qe(eo,{label:D.value,value:D.key}))),showCancelButton:!0,confirmText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",beforeClose:async(D,O,T)=>{if(D==="confirm"){try{const M=document.getElementById(`component_${r.value.id}`),N=await Ee(M);await pn(e.value,r.value,N),O.confirmButtonLoading=!0}catch(M){console.log(M)}O.confirmButtonLoading=!1,T()}else T()}}).then(()=>W.success("\u4FDD\u5B58\u6210\u529F!")).catch(()=>{})},P=()=>{const D=r.value;D&&pe.confirm({type:"error",title:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u76841\u4E2A\u7EC4\u4EF6"}).then(()=>{s.deleteCom(D.id)}).catch(()=>{})},B=()=>{const D=r.value;D&&s.renamingCom(D.id)},U=()=>{s.copyComs(d.value)},K=D=>{D.preventDefault(),l()};return Ce(()=>{ee(document,"contextmenu",K)}),Me(()=>{te(document,"contextmenu",K)}),t({moveUp:y,moveBottom:S,moveDown:b,moveTop:f,lockCom:C,hideCom:w,toDeleteCom:P,renameCom:B,toCopyCom:U}),(D,O)=>(g(),z(At,{name:"zoom-in-top"},{default:x(()=>[v(h).show?(g(),$("div",{key:0,class:"context-menu-wrap",style:J(v(p))},[a("div",{class:"context-menu-item",onClick:f},[rc,E(" \u7F6E\u9876 "),dc]),a("div",{class:"context-menu-item",onClick:S},[uc,E(" \u7F6E\u5E95 "),mc]),a("div",{class:"context-menu-item",onClick:y},[pc,E(" \u4E0A\u79FB\u4E00\u5C42 "),vc]),a("div",{class:"context-menu-item",onClick:b},[fc,E(" \u4E0B\u79FB\u4E00\u5C42 "),_c]),hc,a("div",{class:"context-menu-item",onClick:C},[v(c)?(g(),$(X,{key:0},[gc,E(" \u89E3\u9501 ")],64)):(g(),$(X,{key:1},[bc,E(" \u9501\u5B9A ")],64))]),a("div",{class:"context-menu-item",onClick:w},[v(m)?(g(),$(X,{key:0},[yc,E(" \u663E\u793A ")],64)):(g(),$(X,{key:1},[Cc,E(" \u9690\u85CF ")],64))]),n.value.length?(g(),$("div",{key:0,class:"context-menu-item",onClick:V},[xc,E(" \u4FDD\u5B58 ")])):Y("",!0),wc,a("div",{class:"context-menu-item",onClick:B},[kc,E(" \u91CD\u547D\u540D "),Sc]),a("div",{class:"context-menu-item",onClick:U},[$c,E(" \u590D\u5236 "),Vc]),a("div",{class:"context-menu-item",onClick:P},[Mc,E(" \u5220\u9664 "),Dc])],4)):Y("",!0)]),_:1}))}};var Tc=F(Ic,[["__scopeId","data-v-00b8514a"]]);function Rc(){const o=$e(),{schemaStore:t}=j(),n=R(!1),e=async s=>{try{n.value=!0;const i=await Qt(s);if(i){const{id:r,name:d,pid:c,layout:m,components:h}=i,p={pageInfo:{id:r,name:d,pid:c},pageConfig:JSON.parse(m),comps:h.map(_=>JSON.parse(_.componentContent))};t.loadScreenData(p),await ge(),document.title=d}}catch(i){console.log(i)}n.value=!1},l=async()=>{try{n.value=!0;const s=await ao();if(s.tpl.length>0){const i=await co(s.tpl);if(i){const r=JSON.parse(i.content),{comps:d,pageConfig:c}=r;t.loadScreenData({comps:d,pageConfig:c})}}else t.setScreenSize(s)}catch(s){console.log(s)}n.value=!1};return ve(()=>o.path,async()=>{const{id:s}=o.query;s?await e(s):await l()},{immediate:!0}),{loading:n}}function Bc(){const o=R(null),t=R(null),{saveScreenData:n}=Ke(),{schemaStore:e,storeToRefs:l}=j(),{pageInfo:s,canvas:i,selectedCom:r,selectedComs:d}=l(e),c=$e();let m=null;const h=b=>{const f=b.target;if(!["input","textarea"].includes(f.tagName.toLowerCase())){const S=b.key.toLowerCase();S==="delete"?(t.value&&t.value.toDeleteCom(),b.preventDefault()):S==="f2"&&(t.value&&t.value.renameCom(),b.preventDefault());const C=r.value;b.altKey&&(p("altKey"),S==="arrowup"?t.value&&t.value.moveUp():S==="arrowdown"?t.value&&t.value.moveDown():S==="home"?t.value&&t.value.moveTop():S==="end"&&t.value&&t.value.moveBottom(),b.preventDefault()),b.ctrlKey&&(p("ctrlKey"),S==="arrowup"?(e.toggleCompsPanel(),b.preventDefault()):S==="arrowdown"?(e.toggleToolbox(),b.preventDefault()):S==="arrowleft"?(e.toggleLayerPanel(),b.preventDefault()):S==="arrowright"?(e.toggleConfigPanel(),b.preventDefault()):S==="a"?(e.autoCanvasScale(),b.preventDefault()):S==="d"?(e.setCanvasScale(100),b.preventDefault()):S==="c"?(m=d.value,console.log(m),Ge(JSON.stringify(m)),b.preventDefault()):S==="v"?(m&&e.copyComs(m),b.preventDefault()):S==="s"?(s.value.id||c.query.id?(W("\u6B63\u5728\u4FDD\u5B58..."),n("edit").then(()=>W.success("\u4FDD\u5B58\u6210\u529F\uFF01"))):o.value&&o.value.handleSaveScreen(),b.preventDefault()):S==="z"&&(e.undo(),b.preventDefault())),b.shiftKey&&p("shiftKey"),b.keyCode===32&&(p("spaceKey"),b.preventDefault());const w=b.shiftKey?10:1;C&&!b.altKey&&(S==="arrowleft"?(C.attr.x-=w,e.recordSnapshot(),b.preventDefault()):S==="arrowright"?(C.attr.x+=w,e.recordSnapshot(),b.preventDefault()):S==="arrowup"?(C.attr.y-=w,e.recordSnapshot(),b.preventDefault()):S==="arrowdown"&&(C.attr.y+=w,e.recordSnapshot(),b.preventDefault()))}},p=b=>{e.toggleKey({key:b,status:!0})},_=()=>{e.resetKeyCode()},y=b=>{const f=parseInt((i.value.scale*100).toFixed(2)),S=(b.wheelDelta>0?1:-1)*5,C=Math.min(Math.max(f+S,20),200);e.setCanvasScale(C)};return Ce(()=>{ee(document,"keydown",h),ee(document,"keyup",_)}),Me(()=>{te(document,"keydown",h),te(document,"keyup",_)}),{headerRef:o,contextMenuRef:t,ctrlMouseWheel:y}}const Lc={name:"ScreenEditor",components:{ContextMenu:Tc,FooterPanel:ic,ToolboxPanel:Xl,CanvasMain:ks,ConfigPanel:zl,ComponentsPanel:On,LayerPanel:Fo,HeaderBar:Eo},setup(){return{...Rc(),...Bc()}}},Nc={key:0,flex:"main:center cross:center",class:"full-wrapper"},Ec={key:1,class:"editor-main-wrapper"},zc={class:"edit-main-wp"};function Uc(o,t,n,e,l,s){const i=k("header-bar"),r=k("svg-loading"),d=k("components-panel"),c=k("layer-panel"),m=k("toolbox-panel"),h=k("canvas-main"),p=k("footer-panel"),_=k("config-panel"),y=k("context-menu");return g(),$("div",{class:"schema-screen-container",onWheel:t[0]||(t[0]=oe((...b)=>o.ctrlMouseWheel&&o.ctrlMouseWheel(...b),["ctrl","prevent"]))},[u(i,{ref:"headerRef","back-url":"/dashboard"},null,512),o.loading?(g(),$("div",Nc,[u(r,{name:"loading02"})])):(g(),$("div",Ec,[u(d),u(c),a("div",zc,[u(m),u(h),u(p)]),u(_)])),u(y,{ref:"contextMenuRef"},null,512)],32)}var Qc=F(Lc,[["render",Uc]]);export{Qc as default};
