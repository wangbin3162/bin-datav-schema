var M=Object.defineProperty;var x=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var y=(t,a,e)=>a in t?M(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,w=(t,a)=>{for(var e in a||(a={}))j.call(a,e)&&y(t,e,a[e]);if(x)for(var e of x(a))z.call(a,e)&&y(t,e,a[e]);return t};import{a4 as C,f as b,J as f,o as d,A as r,u as m,w as T,B as i,I as B,a as S,t as E,a8 as U,a9 as A}from"./vendor-0fc4fabe.js";import{a as I}from"./chunk-bin-ui-next-51eb6328.js";import{a as L}from"./index-89bf360d.js";import"./chunk-brace-7fd40d4c.js";const N=(t,a)=>{const e=w({allowType:"jpeg|jpg|png",allowSize:2},a);return new RegExp(`\\.(${e.allowType})$`,"i").test(t.name)?t.size/1024/1024>e.allowSize?(I.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${e.allowSize}MB\uFF01`),!1):!0:(I.error(`\u4E0A\u4F20\u56FE\u7247\u7684\u683C\u5F0F\u53EA\u80FD\u662F ${e.allowType} \u4E2D\u7684\u4E00\u79CD\uFF01`),!1)};const P={name:"g-upload-img",props:{modelValue:{type:String,required:!0},allowType:{type:String,default:"jpeg|jpg|png"},size:{type:Number,default:2},label:{type:String,default:""},showSuffix:{type:Boolean,default:!1},suffixTitle:{type:String,default:"\u9884\u8BBE"},prefixIcon:{type:String,default:"link"},suffixIcon:{type:String,default:"sketch"},staticPath:{type:String},images:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,a){const e=b(!1),o=b(!1),g=s=>{if(!N(s,{allowType:t.allowType,allowSize:t.size}))return!1;try{const u=new FileReader;u.readAsDataURL(s),u.onload=V=>{const k=V.target.result;l(k)}}catch(u){console.warn(u)}return!1},_=()=>{t.modelValue&&(o.value=!0)},c=()=>{o.value=!1},l=s=>{a.emit("update:modelValue",s)};return{loading:e,visibleCover:o,handleUpload:g,handleMouseEnter:_,handleMouseLeave:c,handleCommand:s=>{const v=L(`/images/${s}`);l(v)},removeImage:()=>{l(""),o.value=!1},handleInput:l}}},p=t=>(U("data-v-d5dcf84e"),t=t(),A(),t),R={class:"dv-gui g-upload"},D={class:"g-upload-image-content"},q=["src"],F={key:1,class:"g-upload-tip",flex:"dir:top main:center cross:center"},J=p(()=>i("p",null,"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u8FD9\u91CC\u66F4\u6362",-1)),G={key:0,class:"g-upload-image-cover"},H=p(()=>i("span",null,"\u66F4\u6539",-1)),K=p(()=>i("p",{style:{padding:"0 10px"}},"|",-1)),O={key:0,class:"g-input__caption"};function Q(t,a,e,o,g,_){const c=f("g-images"),l=f("b-icon"),h=f("b-upload");return d(),r("div",R,[m(c,{"model-value":e.modelValue,"show-suffix":e.showSuffix,"suffix-title":e.suffixTitle,"static-path":e.staticPath,"prefix-icon":e.prefixIcon,"suffix-icon":e.suffixIcon,images:e.images,placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740","onUpdate:modelValue":o.handleInput},null,8,["model-value","show-suffix","suffix-title","static-path","prefix-icon","suffix-icon","images","onUpdate:modelValue"]),m(h,{action:"","before-upload":o.handleUpload,"show-upload-list":!1},{default:T(()=>[i("div",{class:"g-upload-image-wrap",onMouseenter:a[1]||(a[1]=(...n)=>o.handleMouseEnter&&o.handleMouseEnter(...n)),onMouseleave:a[2]||(a[2]=(...n)=>o.handleMouseLeave&&o.handleMouseLeave(...n))},[i("div",D,[e.modelValue?(d(),r("img",{key:0,src:e.modelValue,alt:""},null,8,q)):(d(),r("div",F,[m(l,{name:"image",size:"52"}),J]))]),o.visibleCover?(d(),r("div",G,[H,K,i("span",{onClick:a[0]||(a[0]=B((...n)=>o.removeImage&&o.removeImage(...n),["stop"]))},"\u5220\u9664")])):S("",!0)],32)]),_:1},8,["before-upload"]),e.label?(d(),r("span",O,E(e.label),1)):S("",!0)])}var ee=C(P,[["render",Q],["__scopeId","data-v-d5dcf84e"]]);export{ee as default};
